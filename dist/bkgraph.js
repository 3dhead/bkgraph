/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

// Copyright 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// (c) 2010-2013 Thomas Fuchs

// Zepto.js may be freely distributed under the MIT license.

/*!
 * ZRender, a high performance canvas library.
 *  
 * Copyright (c) 2013, Baidu Inc.
 * All rights reserved.
 * 
 * LICENSE
 * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
 */

/**
 * ETPL (Enterprise Template)
 * Copyright 2013 Baidu Inc. All rights reserved.
 *
 * @file 模板引擎
 * @author errorrik(errorrik@gmail.com)
 *         otakustay(otakustay@gmail.com)
 */

/*!
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */

(function(e){typeof define!="undefined"&&define.amd?define(["exports"],e.bind(window)):e(window.bkgraph={})})(function(_exports){var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("zrender/dep/excanvas",["require"],function(e){return document.createElement("canvas").getContext?G_vmlCanvasManager=!1:function(){function f(){return this.context_||(this.context_=new I(this))}function c(e,t,n){var r=l.call(arguments,2);return function(){return e.apply(t,r.concat(l.call(arguments)))}}function h(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function p(e,t,n){e.namespaces[t]||e.namespaces.add(t,n,"#default#VML")}function d(e){p(e,"g_vml_","urn:schemas-microsoft-com:vml"),p(e,"g_o_","urn:schemas-microsoft-com:office:office");if(!e.styleSheets.ex_canvas_){var t=e.createStyleSheet();t.owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function m(e){var t=e.srcElement;switch(e.propertyName){case"width":t.getContext().clearRect(),t.style.width=t.attributes.width.nodeValue+"px",t.firstChild.style.width=t.clientWidth+"px";break;case"height":t.getContext().clearRect(),t.style.height=t.attributes.height.nodeValue+"px",t.firstChild.style.height=t.clientHeight+"px"}}function g(e){var t=e.srcElement;t.firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function E(){return[[1,0,0],[0,1,0],[0,0,1]]}function S(e,t){var n=E();for(var r=0;r<3;r++)for(var i=0;i<3;i++){var s=0;for(var o=0;o<3;o++)s+=e[r][o]*t[o][i];n[r][i]=s}return n}function x(e,t){t.fillStyle=e.fillStyle,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle,t.globalAlpha=e.globalAlpha,t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,t.arcScaleX_=e.arcScaleX_,t.arcScaleY_=e.arcScaleY_,t.lineScale_=e.lineScale_}function N(e){var t=e.indexOf("(",3),n=e.indexOf(")",t+1),r=e.substring(t+1,n).split(",");if(r.length!=4||e.charAt(3)!="a")r[3]=1;return r}function C(e){return parseFloat(e)/100}function k(e,t,n){return Math.min(n,Math.max(t,e))}function L(e){var t,n,r,i,s,o;i=parseFloat(e[0])/360%360,i<0&&i++,s=k(C(e[1]),0,1),o=k(C(e[2]),0,1);if(s==0)t=n=r=o;else{var u=o<.5?o*(1+s):o+s-o*s,a=2*o-u;t=A(a,u,i+1/3),n=A(a,u,i),r=A(a,u,i-1/3)}return"#"+y[Math.floor(t*255)]+y[Math.floor(n*255)]+y[Math.floor(r*255)]}function A(e,t,n){return n<0&&n++,n>1&&n--,6*n<1?e+(t-e)*6*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function M(e){if(e in O)return O[e];var t,n=1;e=String(e);if(e.charAt(0)=="#")t=e;else if(/^rgb/.test(e)){var r=N(e),t="#",i;for(var s=0;s<3;s++)r[s].indexOf("%")!=-1?i=Math.floor(C(r[s])*255):i=+r[s],t+=y[k(i,0,255)];n=+r[3]}else if(/^hsl/.test(e)){var r=N(e);t=L(r),n=r[3]}else t=T[e]||e;return O[e]={color:t,alpha:n}}function P(e){if(D[e])return D[e];var t=document.createElement("div"),n=t.style,r;try{n.font=e,r=n.fontFamily.split(",")[0]}catch(i){}return D[e]={style:n.fontStyle||_.style,variant:n.fontVariant||_.variant,weight:n.fontWeight||_.weight,size:n.fontSize||_.size,family:r||_.family}}function H(e,t){var n={};for(var r in e)n[r]=e[r];var i=parseFloat(t.currentStyle.fontSize),s=parseFloat(e.size);return typeof e.size=="number"?n.size=e.size:e.size.indexOf("px")!=-1?n.size=s:e.size.indexOf("em")!=-1?n.size=i*s:e.size.indexOf("%")!=-1?n.size=i/100*s:e.size.indexOf("pt")!=-1?n.size=s/.75:n.size=i,n}function B(e){return e.style+" "+e.variant+" "+e.weight+" "+e.size+"px '"+e.family+"'"}function F(e){return j[e]||"square"}function I(e){this.m_=E(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=o*1,this.globalAlpha=1,this.font="12px 微软雅黑",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=e;var t="width:"+e.clientWidth+"px;height:"+e.clientHeight+"px;overflow:hidden;position:absolute",n=e.ownerDocument.createElement("div");n.style.cssText=t,e.appendChild(n);var r=n.cloneNode(!1);r.style.backgroundColor="#fff",r.style.filter="alpha(opacity=0)",e.appendChild(r),this.element_=n,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function R(e,t,n,r){e.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:n.x,cp2y:n.y,x:r.x,y:r.y}),e.currentX_=r.x,e.currentY_=r.y}function U(e,t){var n=M(e.strokeStyle),r=n.color,i=n.alpha*e.globalAlpha,s=e.lineScale_*e.lineWidth;s<1&&(i*=s),t.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',e.lineJoin,'"',' miterlimit="',e.miterLimit,'"',' endcap="',F(e.lineCap),'"',' weight="',s,'px"',' color="',r,'" />')}function z(t,n,r,i){var s=t.fillStyle,u=t.arcScaleX_,a=t.arcScaleY_,f=i.x-r.x,l=i.y-r.y;if(s instanceof $){var c=0,h={x:0,y:0},p=0,d=1;if(s.type_=="gradient"){var v=s.x0_/u,m=s.y0_/a,g=s.x1_/u,y=s.y1_/a,b=W(t,v,m),w=W(t,g,y),E=w.x-b.x,S=w.y-b.y;c=Math.atan2(E,S)*180/Math.PI,c<0&&(c+=360),c<1e-6&&(c=0)}else{var b=W(t,s.x0_,s.y0_);h={x:(b.x-r.x)/f,y:(b.y-r.y)/l},f/=u*o,l/=a*o;var x=e.max(f,l);p=2*s.r0_/x,d=2*s.r1_/x-p}var T=s.colors_;T.sort(function(e,t){return e.offset-t.offset});var N=T.length,C=T[0].color,k=T[N-1].color,L=T[0].alpha*t.globalAlpha,A=T[N-1].alpha*t.globalAlpha,O=[];for(var _=0;_<N;_++){var D=T[_];O.push(D.offset*d+p+" "+D.color)}n.push('<g_vml_:fill type="',s.type_,'"',' method="none" focus="100%"',' color="',C,'"',' color2="',k,'"',' colors="',O.join(","),'"',' opacity="',A,'"',' g_o_:opacity2="',L,'"',' angle="',c,'"',' focusposition="',h.x,",",h.y,'" />')}else if(s instanceof J){if(f&&l){var P=-r.x,H=-r.y;n.push("<g_vml_:fill",' position="',P/f*u*u,",",H/l*a*a,'"',' type="tile"',' src="',s.src_,'" />')}}else{var B=M(t.fillStyle),j=B.color,F=B.alpha*t.globalAlpha;n.push('<g_vml_:fill color="',j,'" opacity="',F,'" />')}}function W(e,t,n){var r=e.m_;return{x:o*(t*r[0][0]+n*r[1][0]+r[2][0])-u,y:o*(t*r[0][1]+n*r[1][1]+r[2][1])-u}}function X(e){return isFinite(e[0][0])&&isFinite(e[0][1])&&isFinite(e[1][0])&&isFinite(e[1][1])&&isFinite(e[2][0])&&isFinite(e[2][1])}function V(e,t,n){if(!X(t))return;e.m_=t;if(n){var r=t[0][0]*t[1][1]-t[0][1]*t[1][0];e.lineScale_=s(i(r))}}function $(e){this.type_=e,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function J(e,t){Q(e);switch(t){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=t;break;default:K("SYNTAX_ERR")}this.src_=e.src,this.width_=e.width,this.height_=e.height}function K(e){throw new G(e)}function Q(e){(!e||e.nodeType!=1||e.tagName!="IMG")&&K("TYPE_MISMATCH_ERR"),e.readyState!="complete"&&K("INVALID_STATE_ERR")}function G(e){this.code=this[e],this.message=e+": DOM Exception "+this.code}var e=Math,t=e.round,n=e.sin,r=e.cos,i=e.abs,s=e.sqrt,o=10,u=o/2,a=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1],l=Array.prototype.slice;d(document);var v={init:function(e){var t=e||document;t.createElement("canvas"),t.attachEvent("onreadystatechange",c(this.init_,this,t))},init_:function(e){var t=e.getElementsByTagName("canvas");for(var n=0;n<t.length;n++)this.initElement(t[n])},initElement:function(e){if(!e.getContext){e.getContext=f,d(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",m),e.attachEvent("onresize",g);var t=e.attributes;t.width&&t.width.specified?e.style.width=t.width.nodeValue+"px":e.width=e.clientWidth,t.height&&t.height.specified?e.style.height=t.height.nodeValue+"px":e.height=e.clientHeight}return e}};v.init();var y=[];for(var b=0;b<16;b++)for(var w=0;w<16;w++)y[b*16+w]=b.toString(16)+w.toString(16);var T={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},O={},_={style:"normal",variant:"normal",weight:"normal",size:12,family:"微软雅黑"},D={},j={butt:"flat",round:"round"},q=I.prototype;q.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},q.beginPath=function(){this.currentPath_=[]},q.moveTo=function(e,t){var n=W(this,e,t);this.currentPath_.push({type:"moveTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},q.lineTo=function(e,t){var n=W(this,e,t);this.currentPath_.push({type:"lineTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},q.bezierCurveTo=function(e,t,n,r,i,s){var o=W(this,i,s),u=W(this,e,t),a=W(this,n,r);R(this,u,a,o)},q.quadraticCurveTo=function(e,t,n,r){var i=W(this,e,t),s=W(this,n,r),o={x:this.currentX_+2/3*(i.x-this.currentX_),y:this.currentY_+2/3*(i.y-this.currentY_)},u={x:o.x+(s.x-this.currentX_)/3,y:o.y+(s.y-this.currentY_)/3};R(this,o,u,s)},q.arc=function(e,t,i,s,a,f){i*=o;var l=f?"at":"wa",c=e+r(s)*i-u,h=t+n(s)*i-u,p=e+r(a)*i-u,d=t+n(a)*i-u;c==p&&!f&&(c+=.125);var v=W(this,e,t),m=W(this,c,h),g=W(this,p,d);this.currentPath_.push({type:l,x:v.x,y:v.y,radius:i,xStart:m.x,yStart:m.y,xEnd:g.x,yEnd:g.y})},q.rect=function(e,t,n,r){this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath()},q.strokeRect=function(e,t,n,r){var i=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath(),this.stroke(),this.currentPath_=i},q.fillRect=function(e,t,n,r){var i=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.closePath(),this.fill(),this.currentPath_=i},q.createLinearGradient=function(e,t,n,r){var i=new $("gradient");return i.x0_=e,i.y0_=t,i.x1_=n,i.y1_=r,i},q.createRadialGradient=function(e,t,n,r,i,s){var o=new $("gradientradial");return o.x0_=e,o.y0_=t,o.r0_=n,o.x1_=r,o.y1_=i,o.r1_=s,o},q.drawImage=function(n,r){var i,s,u,a,f,l,c,h,p=n.runtimeStyle.width,d=n.runtimeStyle.height;n.runtimeStyle.width="auto",n.runtimeStyle.height="auto";var v=n.width,m=n.height;n.runtimeStyle.width=p,n.runtimeStyle.height=d;if(arguments.length==3)i=arguments[1],s=arguments[2],f=l=0,c=u=v,h=a=m;else if(arguments.length==5)i=arguments[1],s=arguments[2],u=arguments[3],a=arguments[4],f=l=0,c=v,h=m;else{if(arguments.length!=9)throw Error("Invalid number of arguments");f=arguments[1],l=arguments[2],c=arguments[3],h=arguments[4],i=arguments[5],s=arguments[6],u=arguments[7],a=arguments[8]}var g=W(this,i,s),y=c/2,b=h/2,w=[],E=10,S=10,x=scaleY=1;w.push(" <g_vml_:group",' coordsize="',o*E,",",o*S,'"',' coordorigin="0,0"',' style="width:',E,"px;height:",S,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var T=[];x=Math.sqrt(this.m_[0][0]*this.m_[0][0]+this.m_[0][1]*this.m_[0][1]),scaleY=Math.sqrt(this.m_[1][0]*this.m_[1][0]+this.m_[1][1]*this.m_[1][1]),T.push("M11=",this.m_[0][0]/x,",","M12=",this.m_[1][0]/scaleY,",","M21=",this.m_[0][1]/x,",","M22=",this.m_[1][1]/scaleY,",","Dx=",t(g.x/o),",","Dy=",t(g.y/o),"");var N=g,C=W(this,i+u,s),k=W(this,i,s+a),L=W(this,i+u,s+a);N.x=e.max(N.x,C.x,k.x,L.x),N.y=e.max(N.y,C.y,k.y,L.y),w.push("padding:0 ",t(N.x/o),"px ",t(N.y/o),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",T.join(""),", sizingmethod='clip');")}else w.push("top:",t(g.y/o),"px;left:",t(g.x/o),"px;");w.push(' ">'),(f||l)&&w.push('<div style="overflow: hidden; width:',Math.ceil((u+f*u/c)*x),"px;"," height:",Math.ceil((a+l*a/h)*scaleY),"px;"," filter:progid:DxImageTransform.Microsoft.Matrix(Dx=",-f*u/c*x,",Dy=",-l*a/h*scaleY,');">'),w.push('<div style="width:',Math.round(x*v*u/c),"px;"," height:",Math.round(scaleY*m*a/h),"px;"," filter:"),this.globalAlpha<1&&w.push(" progid:DXImageTransform.Microsoft.Alpha(opacity="+this.globalAlpha*100+")"),w.push(" progid:DXImageTransform.Microsoft.AlphaImageLoader(src=",n.src,',sizingMethod=scale)">'),(f||l)&&w.push("</div>"),w.push("</div></div>"),this.element_.insertAdjacentHTML("BeforeEnd",w.join(""))},q.stroke=function(e){var n=[],r=!1,i=10,s=10;n.push("<g_vml_:shape",' filled="',!!e,'"',' style="position:absolute;width:',i,"px;height:",s,'px;"',' coordorigin="0,0"',' coordsize="',o*i,",",o*s,'"',' stroked="',!e,'"',' path="');var u=!1,a={x:null,y:null},f={x:null,y:null};for(var l=0;l<this.currentPath_.length;l++){var c=this.currentPath_[l],h;switch(c.type){case"moveTo":h=c,n.push(" m ",t(c.x),",",t(c.y));break;case"lineTo":n.push(" l ",t(c.x),",",t(c.y));break;case"close":n.push(" x "),c=null;break;case"bezierCurveTo":n.push(" c ",t(c.cp1x),",",t(c.cp1y),",",t(c.cp2x),",",t(c.cp2y),",",t(c.x),",",t(c.y));break;case"at":case"wa":n.push(" ",c.type," ",t(c.x-this.arcScaleX_*c.radius),",",t(c.y-this.arcScaleY_*c.radius)," ",t(c.x+this.arcScaleX_*c.radius),",",t(c.y+this.arcScaleY_*c.radius)," ",t(c.xStart),",",t(c.yStart)," ",t(c.xEnd),",",t(c.yEnd))}if(c){if(a.x==null||c.x<a.x)a.x=c.x;if(f.x==null||c.x>f.x)f.x=c.x;if(a.y==null||c.y<a.y)a.y=c.y;if(f.y==null||c.y>f.y)f.y=c.y}}n.push(' ">'),e?z(this,n,a,f):U(this,n),n.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",n.join(""))},q.fill=function(){this.stroke(!0)},q.closePath=function(){this.currentPath_.push({type:"close"})},q.save=function(){var e={};x(this,e),this.aStack_.push(e),this.mStack_.push(this.m_),this.m_=S(E(),this.m_)},q.restore=function(){this.aStack_.length&&(x(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},q.translate=function(e,t){var n=[[1,0,0],[0,1,0],[e,t,1]];V(this,S(n,this.m_),!1)},q.rotate=function(e){var t=r(e),i=n(e),s=[[t,i,0],[-i,t,0],[0,0,1]];V(this,S(s,this.m_),!1)},q.scale=function(e,t){this.arcScaleX_*=e,this.arcScaleY_*=t;var n=[[e,0,0],[0,t,0],[0,0,1]];V(this,S(n,this.m_),!0)},q.transform=function(e,t,n,r,i,s){var o=[[e,t,0],[n,r,0],[i,s,1]];V(this,S(o,this.m_),!0)},q.setTransform=function(e,t,n,r,i,s){var o=[[e,t,0],[n,r,0],[i,s,1]];V(this,o,!0)},q.drawText_=function(e,n,r,i,s){var u=this.m_,a=1e3,f=0,l=a,c={x:0,y:0},p=[],d=H(P(this.font),this.element_),v=B(d),m=this.element_.currentStyle,g=this.textAlign.toLowerCase();switch(g){case"left":case"center":case"right":break;case"end":g=m.direction=="ltr"?"right":"left";break;case"start":g=m.direction=="rtl"?"right":"left";break;default:g="left"}switch(this.textBaseline){case"hanging":case"top":c.y=d.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":c.y=-d.size/2.25}switch(g){case"right":f=a,l=.05;break;case"center":f=l=a/2}var y=W(this,n+c.x,r+c.y);p.push('<g_vml_:line from="',-f,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!s,'" stroked="',!!s,'" style="position:absolute;width:1px;height:1px;">'),s?U(this,p):z(this,p,{x:-f,y:0},{x:l,y:d.size});var b=u[0][0].toFixed(3)+","+u[1][0].toFixed(3)+","+u[0][1].toFixed(3)+","+u[1][1].toFixed(3)+",0,0",w=t(y.x/o)+","+t(y.y/o);p.push('<g_vml_:skew on="t" matrix="',b,'" ',' offset="',w,'" origin="',f,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',h(e),'" style="v-text-align:',g,";font:",h(v),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",p.join(""))},q.fillText=function(e,t,n,r){this.drawText_(e,t,n,r,!1)},q.strokeText=function(e,t,n,r){this.drawText_(e,t,n,r,!0)},q.measureText=function(e){if(!this.textMeasureEl_){var t='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",t),this.textMeasureEl_=this.element_.lastChild}var n=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(n.createTextNode(e)),{width:this.textMeasureEl_.offsetWidth}},q.clip=function(){},q.arcTo=function(){},q.createPattern=function(e,t){return new J(e,t)},$.prototype.addColorStop=function(e,t){t=M(t),this.colors_.push({offset:e,color:t.color,alpha:t.alpha})};var Y=G.prototype=new Error;Y.INDEX_SIZE_ERR=1,Y.DOMSTRING_SIZE_ERR=2,Y.HIERARCHY_REQUEST_ERR=3,Y.WRONG_DOCUMENT_ERR=4,Y.INVALID_CHARACTER_ERR=5,Y.NO_DATA_ALLOWED_ERR=6,Y.NO_MODIFICATION_ALLOWED_ERR=7,Y.NOT_FOUND_ERR=8,Y.NOT_SUPPORTED_ERR=9,Y.INUSE_ATTRIBUTE_ERR=10,Y.INVALID_STATE_ERR=11,Y.SYNTAX_ERR=12,Y.INVALID_MODIFICATION_ERR=13,Y.NAMESPACE_ERR=14,Y.INVALID_ACCESS_ERR=15,Y.VALIDATION_ERR=16,Y.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=v,CanvasRenderingContext2D=I,CanvasGradient=$,CanvasPattern=J,DOMException=G}(),G_vmlCanvasManager}),define("zrender/tool/util",["require","../dep/excanvas"],function(e){function n(e){if(typeof e=="object"&&e!==null){var r=e;if(e instanceof Array){r=[];for(var i=0,s=e.length;i<s;i++)r[i]=n(e[i])}else if(!t[Object.prototype.toString.call(e)]){r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=n(e[o]))}return r}return e}function r(e,n,r,s){if(n.hasOwnProperty(r))if(typeof e[r]=="object"&&!t[Object.prototype.toString.call(e[r])])i(e[r],n[r],s);else if(s||!(r in e))e[r]=n[r]}function i(e,t,n){for(var i in t)r(e,t,i,n);return e}function o(){if(!s){e("../dep/excanvas");if(G_vmlCanvasManager){var t=document.createElement("div");t.style.position="absolute",t.style.top="-1000px",document.body.appendChild(t),s=G_vmlCanvasManager.initElement(t).getContext("2d")}else s=document.createElement("canvas").getContext("2d")}return s}function p(){return a||(u=document.createElement("canvas"),f=u.width,l=u.height,a=u.getContext("2d")),a}function d(e,t){var n=100,r;e+c>f&&(f=e+c+n,u.width=f,r=!0),t+h>l&&(l=t+h+n,u.height=l,r=!0),e<-c&&(c=Math.ceil(-e/n)*n,f+=c,u.width=f,r=!0),t<-h&&(h=Math.ceil(-t/n)*n,l+=h,u.height=l,r=!0),r&&a.translate(c,h)}function v(){return{x:c,y:h}}function m(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function g(e,t){function r(){}var n=e.prototype;r.prototype=t.prototype,e.prototype=new r;for(var i in n)e.prototype[i]=n[i];e.constructor=e}var t={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},s,u,a,f,l,c=0,h=0;return{inherits:g,clone:n,merge:i,getContext:o,getPixelContext:p,getPixelOffset:v,adjustCanvasSize:d,indexOf:m}}),define("zrender/config",[],function(){var e={EVENT:{RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},catchBrushException:!1,debugMode:0};return e}),define("zrender/tool/log",["require","../config"],function(e){var t=e("../config");return function(){if(t.debugMode===0)return;if(t.debugMode==1)for(var e in arguments)throw new Error(arguments[e]);else if(t.debugMode>1)for(var e in arguments)console.log(arguments[e])}}),define("zrender/tool/guid",[],function(){var e=2311;return function(){return"zrender__"+e++}}),define("zrender/tool/env",[],function(){function e(e){var t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),a=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),f=a&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),c=e.match(/Silk\/([\d._]+)/),h=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/),y=e.match(/MSIE ([\d.]+)/),b=r&&e.match(/Mobile\//)&&!m,w=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!m,y=e.match(/MSIE\s([\d.]+)/);if(n.webkit=!!r)n.version=r[1];return i&&(t.android=!0,t.version=i[2]),u&&!o&&(t.ios=t.iphone=!0,t.version=u[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),o&&(t.ios=t.ipod=!0,t.version=o[3]?o[3].replace(/_/g,"."):null),a&&(t.webos=!0,t.version=a[2]),f&&(t.touchpad=!0),h&&(t.blackberry=!0,t.version=h[2]),p&&(t.bb10=!0,t.version=p[2]),d&&(t.rimtabletos=!0,t.version=d[2]),v&&(n.playbook=!0),l&&(t.kindle=!0,t.version=l[1]),c&&(n.silk=!0,n.version=c[1]),!c&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),g&&(n.firefox=!0,n.version=g[1]),y&&(n.ie=!0,n.version=y[1]),b&&(e.match(/Safari/)||!!t.ios)&&(n.safari=!0),w&&(n.webview=!0),y&&(n.ie=!0,n.version=y[1]),t.tablet=!!(s||v||i&&!e.match(/Mobile/)||g&&e.match(/Tablet/)||y&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!!(!t.tablet&&!t.ipod&&(i||u||a||h||p||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)||y&&e.match(/Touch/))),{browser:n,os:t,canvasSupported:document.createElement("canvas").getContext?!0:!1}}return e(navigator.userAgent)}),define("zrender/mixin/Eventful",["require"],function(e){var t=function(){this._handlers={}};return t.prototype.one=function(e,t,n){var r=this._handlers;return!t||!e?this:(r[e]||(r[e]=[]),r[e].push({h:t,one:!0,ctx:n||this}),this)},t.prototype.bind=function(e,t,n){var r=this._handlers;return!t||!e?this:(r[e]||(r[e]=[]),r[e].push({h:t,one:!1,ctx:n||this}),this)},t.prototype.unbind=function(e,t){var n=this._handlers;if(!e)return this._handlers={},this;if(t){if(n[e]){var r=[];for(var i=0,s=n[e].length;i<s;i++)n[e][i]["h"]!=t&&r.push(n[e][i]);n[e]=r}n[e]&&n[e].length===0&&delete n[e]}else delete n[e];return this},t.prototype.dispatch=function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>3&&(t=Array.prototype.slice.call(t,1));var r=this._handlers[e],i=r.length;for(var s=0;s<i;){switch(n){case 1:r[s].h.call(r[s].ctx);break;case 2:r[s].h.call(r[s].ctx,t[1]);break;case 3:r[s].h.call(r[s].ctx,t[1],t[2]);break;default:r[s].h.apply(r[s].ctx,t)}r[s].one?(r.splice(s,1),i--):s++}}return this},t.prototype.dispatchWithContext=function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>4&&(t=Array.prototype.slice.call(t,1,t.length-1));var r=t[t.length-1],i=this._handlers[e],s=i.length;for(var o=0;o<s;){switch(n){case 1:i[o].h.call(r);break;case 2:i[o].h.call(r,t[1]);break;case 3:i[o].h.call(r,t[1],t[2]);break;default:i[o].h.apply(r,t)}i[o].one?(i.splice(o,1),s--):o++}}return this},t}),define("zrender/tool/event",["require","../mixin/Eventful"],function(e){function n(e){return typeof e.zrenderX!="undefined"&&e.zrenderX||typeof e.offsetX!="undefined"&&e.offsetX||typeof e.layerX!="undefined"&&e.layerX||typeof e.clientX!="undefined"&&e.clientX}function r(e){return typeof e.zrenderY!="undefined"&&e.zrenderY||typeof e.offsetY!="undefined"&&e.offsetY||typeof e.layerY!="undefined"&&e.layerY||typeof e.clientY!="undefined"&&e.clientY}function i(e){return typeof e.zrenderDelta!="undefined"&&e.zrenderDelta||typeof e.wheelDelta!="undefined"&&e.wheelDelta||typeof e.detail!="undefined"&&-e.detail}var t=e("../mixin/Eventful"),s=typeof window.addEventListener=="function"?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};return{getX:n,getY:r,getDelta:i,stop:s,Dispatcher:t}}),define("zrender/tool/vector",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(t,n){var r=new e(2);return r[0]=t||0,r[1]=n||0,r},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,n){return e[0]=t,e[1]=n,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},sub:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},len:function(e){return Math.sqrt(this.lenSquare(e))},lenSquare:function(e){return e[0]*e[0]+e[1]*e[1]},mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},normalize:function(e,n){var r=t.len(n);return r===0?(e[0]=0,e[1]=0):(e[0]=n[0]/r,e[1]=n[1]/r),e},distance:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},distanceSquare:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:function(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e},applyTransform:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}};return t.length=t.len,t.lengthSquare=t.lenSquare,t.dist=t.distance,t.distSquare=t.distanceSquare,t}),define("zrender/tool/matrix",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(){var n=new e(6);return t.identity(n),n},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},mul:function(e,t,n){return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=t[1]*n[0]+t[3]*n[1],e[2]=t[0]*n[2]+t[2]*n[3],e[3]=t[1]*n[2]+t[3]*n[3],e[4]=t[0]*n[4]+t[2]*n[5]+t[4],e[5]=t[1]*n[4]+t[3]*n[5]+t[5],e},translate:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e},rotate:function(e,t,n){var r=t[0],i=t[2],s=t[4],o=t[1],u=t[3],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*f,e[1]=-r*f+o*l,e[2]=i*l+u*f,e[3]=-i*f+l*u,e[4]=l*s+f*a,e[5]=l*a-f*s,e},scale:function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e},invert:function(e,t){var n=t[0],r=t[2],i=t[4],s=t[1],o=t[3],u=t[5],a=n*o-s*r;return a?(a=1/a,e[0]=o*a,e[1]=-s*a,e[2]=-r*a,e[3]=n*a,e[4]=(r*u-o*i)*a,e[5]=(s*i-n*u)*a,e):null},mulVector:function(e,t,n){var r=t[0],i=t[2],s=t[4],o=t[1],u=t[3],a=t[5];return e[0]=n[0]*r+n[1]*i+s,e[1]=n[0]*o+n[1]*u+a,e}};return t}),define("zrender/Handler",["require","./config","./tool/env","./tool/event","./tool/util","./tool/vector","./tool/matrix","./mixin/Eventful"],function(e){function c(e,t){return function(n){return e.call(t,n)}}function h(e,t){return function(n,r,i){return e.call(t,n,r,i)}}function p(e){var t=f.length;while(t--){var n=f[t];e["_"+n+"Handler"]=c(l[n],e)}}function m(e,t,n){if(this._draggingTarget&&this._draggingTarget.id==e.id||e.isSilent())return!1;var r=this._event;if(e.isCover(t,n)){e.hoverable&&this.storage.addHover(e);var i=e.parent;while(i){if(i.clipShape&&!i.clipShape.isCover(this._mouseX,this._mouseY))return!1;i=i.parent}return this._lastHover!=e&&(this._processOutShape(r),this._processDragLeave(r),this._lastHover=e,this._processDragEnter(r)),this._processOverShape(r),this._processDragOver(r),this._hasfound=1,!0}return!1}var t=e("./config"),n=e("./tool/env"),r=e("./tool/event"),i=e("./tool/util"),s=e("./tool/vector"),o=e("./tool/matrix"),u=t.EVENT,a=e("./mixin/Eventful"),f=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],l={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(u.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,u.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,u.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){e=this._zrenderEventFixed(e);var t=e.wheelDelta||-e.detail,n=t>0?1.1:1/1.1,r=this.painter.getLayers(),i=!1;for(var s in r)if(s!=="hover"){var o=r[s],a=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var f=o.__zoom;f*=n,f=Math.max(Math.min(o.maxZoom,f),o.minZoom),n=f/o.__zoom,o.__zoom=f,a[0]-=(this._mouseX-a[0])*(n-1),a[1]-=(this._mouseY-a[1])*(n-1),o.scale[0]*=n,o.scale[1]*=n,o.dirty=!0,i=!0}}i&&this.painter.refresh(),this._dispatchAgency(this._lastHover,u.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){if(this.painter.isLoading())return;this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=r.getX(e),this._mouseY=r.getY(e);var t=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover();if(!this._hasfound){if(!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)this._processOutShape(e),this._processDragLeave(e);this._lastHover=null,this.storage.delHover(),this.painter.clearHover()}var i="default";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var s=this.painter.getLayers(),o=!1;for(var a in s)if(a!=="hover"){var f=s[a];f.panable&&(i="move",f.position[0]+=t,f.position[1]+=n,o=!0,f.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?i="move":this._hasfound&&this._lastHover.clickable&&(i="pointer"),this.root.style.cursor=i,this._dispatchAgency(this._lastHover,u.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){e=this._zrenderEventFixed(e);var t=e.toElement||e.relatedTarget;if(t!=this.root)while(t&&t.nodeType!=9){if(t==this.root){this._mousemoveHandler(e);return}t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="default",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.isLoading()||this.painter.refreshHover(),this.dispatch(u.GLOBALOUT,e)},mousedown:function(e){this._clickThreshold=0;if(this._lastDownButton==2){this._lastDownButton=e.button,this._mouseDownTarget=null;return}this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,u.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="default",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,u.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&r.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<u.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<u.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&r.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}},d=function(e,t,r){a.call(this),this.root=e,this.storage=t,this.painter=r,this._lastX=this._lastY=this._mouseX=this._mouseY=0,this._findHover=h(m,this),this._domHover=r.getDomHover(),p(this),window.addEventListener?(window.addEventListener("resize",this._resizeHandler),n.os.tablet||n.os.phone?(e.addEventListener("touchstart",this._touchstartHandler),e.addEventListener("touchmove",this._touchmoveHandler),e.addEventListener("touchend",this._touchendHandler)):(e.addEventListener("click",this._clickHandler),e.addEventListener("dblclick",this._dblclickHandler),e.addEventListener("mousewheel",this._mousewheelHandler),e.addEventListener("mousemove",this._mousemoveHandler),e.addEventListener("mousedown",this._mousedownHandler),e.addEventListener("mouseup",this._mouseupHandler)),e.addEventListener("DOMMouseScroll",this._mousewheelHandler),e.addEventListener("mouseout",this._mouseoutHandler)):(window.attachEvent("onresize",this._resizeHandler),e.attachEvent("onclick",this._clickHandler),e.attachEvent("ondblclick ",this._dblclickHandler),e.attachEvent("onmousewheel",this._mousewheelHandler),e.attachEvent("onmousemove",this._mousemoveHandler),e.attachEvent("onmouseout",this._mouseoutHandler),e.attachEvent("onmousedown",this._mousedownHandler),e.attachEvent("onmouseup",this._mouseupHandler))};d.prototype.on=function(e,t){return this.bind(e,t),this},d.prototype.un=function(e,t){return this.unbind(e,t),this},d.prototype.trigger=function(e,t){switch(e){case u.RESIZE:case u.CLICK:case u.DBLCLICK:case u.MOUSEWHEEL:case u.MOUSEMOVE:case u.MOUSEDOWN:case u.MOUSEUP:case u.MOUSEOUT:this["_"+e+"Handler"](t)}},d.prototype.dispose=function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),n.os.tablet||n.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=this._domHover=this.storage=this.painter=null,this.un()},d.prototype._processDragStart=function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var n=t;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,u.DRAGSTART,e),this.painter.refresh()}},d.prototype._processDragEnter=function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,u.DRAGENTER,e,this._draggingTarget)},d.prototype._processDragOver=function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,u.DRAGOVER,e,this._draggingTarget)},d.prototype._processDragLeave=function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,u.DRAGLEAVE,e,this._draggingTarget)},d.prototype._processDrop=function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,u.DROP,e,this._draggingTarget))},d.prototype._processDragEnd=function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,u.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null},d.prototype._processOverShape=function(e){this._dispatchAgency(this._lastHover,u.MOUSEOVER,e)},d.prototype._processOutShape=function(e){this._dispatchAgency(this._lastHover,u.MOUSEOUT,e)},d.prototype._dispatchAgency=function(e,t,n,r){var i="on"+t,s={type:t,event:n,target:e,cancelBubble:!1},o=e;r&&(s.dragged=r);while(o){o[i]&&(s.cancelBubble=o[i](s)),o.dispatch(t,s),o=o.parent;if(s.cancelBubble)break}e?s.cancelBubble||this.dispatch(t,s):r||this.dispatch(t,{type:t,event:n})},d.prototype._iterateAndFindHover=function(){var e=o.create();return function(){var t=this.storage.getShapeList(),n,r,i=[0,0];for(var u=t.length-1;u>=0;u--){var a=t[u];n!==a.zlevel&&(r=this.painter.getLayer(a.zlevel,r),i[0]=this._mouseX,i[1]=this._mouseY,r.needTransform&&(o.invert(e,r.transform),s.applyTransform(i,i,e)));if(this._findHover(a,i[0],i[1]))break}}}();var v=[{x:10},{x:-20},{x:10,y:10},{y:-20}];return d.prototype._mobildFindFixed=function(e){this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var t=0;!this._lastHover&&t<v.length;t++){var n=v[t];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)},d.prototype._zrenderEventFixed=function(e,t){if(e.zrenderFixed)return e;if(!t){e=e||window.event;var n=e.toElement||e.relatedTarget||e.srcElement||e.target;n&&n!=this._domHover&&(e.zrenderX=(typeof e.offsetX!="undefined"?e.offsetX:e.layerX)+n.offsetLeft,e.zrenderY=(typeof e.offsetY!="undefined"?e.offsetY:e.layerY)+n.offsetTop)}else{var r=e.type!="touchend"?e.targetTouches[0]:e.changedTouches[0];if(r){var i=this.root.getBoundingClientRect();e.zrenderX=r.clientX-i.left,e.zrenderY=r.clientY-i.top}}return e.zrenderFixed=1,e},i.merge(d.prototype,a.prototype,!0),d}),define("zrender/tool/curve",["require","./vector"],function(e){function a(e){return e>-n&&e<n}function f(e){return e>n||e<-n}function l(e,t,n,r,i){var s=1-i;return s*s*(s*e+3*i*t)+i*i*(i*r+3*s*n)}function c(e,t,n,r,i){var s=1-i;return 3*(((t-e)*s+2*(n-t)*i)*s+(r-n)*i*i)}function h(e,t,n,s,o,u){var f=s+3*(t-n)-e,l=3*(n-t*2+e),c=3*(t-e),h=e-o,p=l*l-3*f*c,d=l*c-9*f*h,v=c*c-3*l*h,m=0;if(a(p)&&a(d))if(a(l))u[0]=0;else{var g=-c/l;g>=0&&g<=1&&(u[m++]=g)}else{var y=d*d-4*p*v;if(a(y)){var b=d/p,g=-l/f+b,w=-b/2;g>=0&&g<=1&&(u[m++]=g),w>=0&&w<=1&&(u[m++]=w)}else if(y>0){var E=Math.sqrt(y),S=p*l+1.5*f*(-d+E),x=p*l+1.5*f*(-d-E);S<0?S=-Math.pow(-S,i):S=Math.pow(S,i),x<0?x=-Math.pow(-x,i):x=Math.pow(x,i);var g=(-l-(S+x))/(3*f);g>=0&&g<=1&&(u[m++]=g)}else{var T=(2*p*l-3*f*d)/(2*Math.sqrt(p*p*p)),N=Math.acos(T)/3,C=Math.sqrt(p),k=Math.cos(N),g=(-l-2*C*k)/(3*f),w=(-l+C*(k+r*Math.sin(N)))/(3*f),L=(-l+C*(k-r*Math.sin(N)))/(3*f);g>=0&&g<=1&&(u[m++]=g),w>=0&&w<=1&&(u[m++]=w),L>=0&&L<=1&&(u[m++]=L)}}return m}function p(e,t,n,r,i){var s=6*n-12*t+6*e,o=9*t+3*r-3*e-9*n,u=3*t-3*e,l=0;if(a(o)){if(f(s)){var c=-u/s;c>=0&&c<=1&&(i[l++]=c)}}else{var h=s*s-4*o*u;if(a(h))i[0]=-s/(2*o);else if(h>0){var p=Math.sqrt(h),c=(-s+p)/(2*o),d=(-s-p)/(2*o);c>=0&&c<=1&&(i[l++]=c),d>=0&&d<=1&&(i[l++]=d)}}return l}function d(e,t,n,r,i,s){var o=(t-e)*i+e,u=(n-t)*i+t,a=(r-n)*i+n,f=(u-o)*i+o,l=(a-u)*i+u,c=(l-f)*i+f;s[0]=e,s[1]=o,s[2]=f,s[3]=c,s[4]=c,s[5]=l,s[6]=a,s[7]=r}function v(e,r,i,a,f,c,h,p,d,v,m){var g,y=.005,b=Infinity;s[0]=d,s[1]=v;for(var w=0;w<1;w+=.05){o[0]=l(e,i,f,h,w),o[1]=l(r,a,c,p,w);var E=t.distSquare(s,o);E<b&&(g=w,b=E)}b=Infinity;for(var S=0;S<32;S++){if(y<n)break;var x=g-y,T=g+y;o[0]=l(e,i,f,h,x),o[1]=l(r,a,c,p,x);var E=t.distSquare(o,s);if(x>=0&&E<b)g=x,b=E;else{u[0]=l(e,i,f,h,T),u[1]=l(r,a,c,p,T);var N=t.distSquare(u,s);T<=1&&N<b?(g=T,b=N):y*=.5}}return m&&(m[0]=l(e,i,f,h,g),m[1]=l(r,a,c,p,g)),Math.sqrt(b)}function m(e,t,n,r){var i=1-r;return i*(i*e+2*r*t)+r*r*n}function g(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}function y(e,t,n,r,i){var s=e-2*t+n,o=2*(t-e),u=e-r,l=0;if(a(s)){if(f(o)){var c=-u/o;c>=0&&c<=1&&(i[l++]=c)}}else{var h=o*o-4*s*u;if(a(h)){var c=-o/(2*s);c>=0&&c<=1&&(i[l++]=c)}else if(h>0){var p=Math.sqrt(h),c=(-o+p)/(2*s),d=(-o-p)/(2*s);c>=0&&c<=1&&(i[l++]=c),d>=0&&d<=1&&(i[l++]=d)}}return l}function b(e,t,n){var r=e+n-2*t;return r===0?.5:(e-t)/r}function w(e,r,i,a,f,l,c,h,p){var d,v=.005,g=Infinity;s[0]=c,s[1]=h;for(var y=0;y<1;y+=.05){o[0]=m(e,i,f,y),o[1]=m(r,a,l,y);var b=t.distSquare(s,o);b<g&&(d=y,g=b)}g=Infinity;for(var w=0;w<32;w++){if(v<n)break;var E=d-v,S=d+v;o[0]=m(e,i,f,E),o[1]=m(r,a,l,E);var b=t.distSquare(o,s);if(E>=0&&b<g)d=E,g=b;else{u[0]=m(e,i,f,S),u[1]=m(r,a,l,S);var x=t.distSquare(u,s);S<=1&&x<g?(d=S,g=x):v*=.5}}return p&&(p[0]=m(e,i,f,d),p[1]=m(r,a,l,d)),Math.sqrt(g)}var t=e("./vector"),n=1e-4,r=Math.sqrt(3),i=1/3,s=t.create(),o=t.create(),u=t.create();return{cubicAt:l,cubicDerivativeAt:c,cubicRootAt:h,cubicExtrema:p,cubicSubdivide:d,cubicProjectPoint:v,quadraticAt:m,quadraticDerivativeAt:g,quadraticRootAt:y,quadraticExtremum:b,quadraticProjectPoint:w}}),define("zrender/tool/area",["require","./util","./curve"],function(e){function l(e){return e%=f,e<0&&(e+=f),e}function c(e,n,i,s){if(!n||!e)return!1;var o=e.type;r=r||t.getContext();var u=h(e,n,i,s);if(typeof u!="undefined")return u;if(e.buildPath&&r.isPointInPath)return p(e,r,n,i,s);switch(o){case"ellipse":return!0;case"trochoid":var a=n.location=="out"?n.r1+n.r2+n.d:n.r1-n.r2+n.d;return S(n,i,s,a);case"rose":return S(n,i,s,n.maxr);default:return!1}}function h(e,t,n,r){var i=e.type;switch(i){case"bezier-curve":if(typeof t.cpX2=="undefined")return g(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,n,r);return m(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,n,r);case"line":return v(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,n,r);case"broken-line":return b(t.pointList,t.lineWidth,n,r);case"ring":return w(t.x,t.y,t.r0,t.r,n,r);case"circle":return S(t.x,t.y,t.r,n,r);case"sector":var s=t.startAngle*Math.PI/180,o=t.endAngle*Math.PI/180;return t.clockwise||(s=-s,o=-o),x(t.x,t.y,t.r0,t.r,s,o,!t.clockwise,n,r);case"path":return _(t.pathArray,Math.max(t.lineWidth,5),t.brushType,n,r);case"polygon":case"star":case"isogon":return T(t.pointList,n,r);case"text":var u=t.__rect||e.getRect(t);return E(u.x,u.y,u.width,u.height,n,r);case"rectangle":case"image":return E(t.x,t.y,t.width,t.height,n,r)}}function p(e,t,n,r,i){return t.beginPath(),e.buildPath(t,n),t.closePath(),t.isPointInPath(r,i)}function d(e,t,n,r){return!c(e,t,n,r)}function v(e,t,n,r,i,s,o){if(i===0)return!1;var u=Math.max(i,5),a=0,f=e;if(o>t+u&&o>r+u||o<t-u&&o<r-u||s>e+u&&s>n+u||s<e-u&&s<n-u)return!1;if(e===n)return Math.abs(s-e)<=u/2;a=(t-r)/(e-n),f=(e*r-n*t)/(e-n);var l=a*s-o+f,c=l*l/(a*a+1);return c<=u/2*u/2}function m(e,t,r,i,s,o,u,a,f,l,c){if(f===0)return!1;var h=Math.max(f,5);if(c>t+h&&c>i+h&&c>o+h&&c>a+h||c<t-h&&c<i-h&&c<o-h&&c<a-h||l>e+h&&l>r+h&&l>s+h&&l>u+h||l<e-h&&l<r-h&&l<s-h&&l<u-h)return!1;var p=n.cubicProjectPoint(e,t,r,i,s,o,u,a,l,c,null);return p<=h/2}function g(e,t,r,i,s,o,u,a,f){if(u===0)return!1;var l=Math.max(u,5);if(f>t+l&&f>i+l&&f>o+l||f<t-l&&f<i-l&&f<o-l||a>e+l&&a>r+l&&a>s+l||a<e-l&&a<r-l&&a<s-l)return!1;var c=n.quadraticProjectPoint(e,t,r,i,s,o,a,f,null);return c<=l/2}function y(e,t,n,r,i,s,o,u,a){if(o===0)return!1;var c=Math.max(o,5);u-=e,a-=t;var h=Math.sqrt(u*u+a*a);if(h-c>n||h+c<n)return!1;if(Math.abs(r-i)>=f)return!0;if(s){var p=r;r=l(i),i=l(p)}else r=l(r),i=l(i);r>i&&(i+=f);var d=Math.atan2(a,u);return d<0&&(d+=f),d>=r&&d<=i||d+f>=r&&d+f<=i}function b(e,t,n,r){var t=Math.max(t,10);for(var i=0,s=e.length-1;i<s;i++){var o=e[i][0],u=e[i][1],a=e[i+1][0],f=e[i+1][1];if(v(o,u,a,f,t,n,r))return!0}return!1}function w(e,t,n,r,i,s){var o=(i-e)*(i-e)+(s-t)*(s-t);return o<r*r&&o>n*n}function E(e,t,n,r,i,s){return i>=e&&i<=e+n&&s>=t&&s<=t+r}function S(e,t,n,r,i){return(r-e)*(r-e)+(i-t)*(i-t)<n*n}function x(e,t,n,r,i,s,o,u,a){return y(e,t,(n+r)/2,i,s,o,r-n,u,a)}function T(e,t,n){var r=e.length,i=0;for(var s=0,o=r-1;s<r;s++){var u=e[o][0],a=e[o][1],f=e[s][0],l=e[s][1];i+=N(u,a,f,l,t,n),o=s}return i!==0}function N(e,t,n,r,i,s){if(s>t&&s>r||s<t&&s<r)return 0;if(r==t)return 0;var o=r<t?1:-1,u=(s-t)/(r-t),a=u*(n-e)+e;return a>i?o:0}function L(){var e=k[0];k[0]=k[1],k[1]=e}function A(e,t,r,i,s,o,u,a,f,l){if(l>t&&l>i&&l>o&&l>a||l<t&&l<i&&l<o&&l<a)return 0;var c=n.cubicRootAt(t,i,o,a,l,C);if(c===0)return 0;var h=0,p=-1,d,v;for(var m=0;m<c;m++){var g=C[m],y=n.cubicAt(e,r,s,u,g);if(y<f)continue;p<0&&(p=n.cubicExtrema(t,i,o,a,k),k[1]<k[0]&&p>1&&L(),d=n.cubicAt(t,i,o,a,k[0]),p>1&&(v=n.cubicAt(t,i,o,a,k[1]))),p==2?g<k[0]?h+=d<t?1:-1:g<k[1]?h+=v<d?1:-1:h+=a<v?1:-1:g<k[0]?h+=d<t?1:-1:h+=a<d?1:-1}return h}function O(e,t,r,i,s,o,u,a){if(a>t&&a>i&&a>o||a<t&&a<i&&a<o)return 0;var f=n.quadraticRootAt(t,i,o,a,C);if(f===0)return 0;var l=n.quadraticExtremum(t,i,o);if(l>=0&&l<=1){var c=0,h=n.quadraticAt(t,i,o,l);for(var p=0;p<f;p++){var d=n.quadraticAt(e,r,s,C[p]);if(d>u)continue;C[p]<l?c+=h<t?1:-1:c+=o<h?1:-1}return c}var d=n.quadraticAt(e,r,s,C[0]);return d>u?0:o<t?1:-1}function M(e,t,n,r,i,s,o,u){u-=t;if(u>n||u<-n)return 0;var a=Math.sqrt(n*n-u*u);C[0]=-a,C[1]=a;if(Math.abs(r-i)>=f){r=0,i=f;var c=s?1:-1;return o>=C[0]+e&&o<=C[1]+e?c:0}if(s){var a=r;r=l(i),i=l(a)}else r=l(r),i=l(i);r>i&&(i+=f);var h=0;for(var p=0;p<2;p++){var d=C[p];if(d+e>o){var v=Math.atan2(u,d),c=s?1:-1;v<0&&(v=f+v);if(v>=r&&v<=i||v+f>=r&&v+f<=i)v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c}}return h}function _(e,t,n,r,i){var s=0,o=0,u=0,a=0,f=0,l=!0,c=!0;n=n||"fill";var h=n==="stroke"||n==="both",p=n==="fill"||n==="both";for(var d=0;d<e.length;d++){var b=e[d],w=b.points;if(l||b.command==="M"){if(d>0){p&&(s+=N(o,u,a,f,r,i));if(s!==0)return!0}a=w[w.length-2],f=w[w.length-1],l=!1,c&&b.command!=="A"&&(c=!1,o=a,u=f)}switch(b.command){case"M":o=w[0],u=w[1];break;case"L":if(h&&v(o,u,w[0],w[1],t,r,i))return!0;p&&(s+=N(o,u,w[0],w[1],r,i)),o=w[0],u=w[1];break;case"C":if(h&&m(o,u,w[0],w[1],w[2],w[3],w[4],w[5],t,r,i))return!0;p&&(s+=A(o,u,w[0],w[1],w[2],w[3],w[4],w[5],r,i)),o=w[4],u=w[5];break;case"Q":if(h&&g(o,u,w[0],w[1],w[2],w[3],t,r,i))return!0;p&&(s+=O(o,u,w[0],w[1],w[2],w[3],r,i)),o=w[2],u=w[3];break;case"A":var E=w[0],S=w[1],x=w[2],T=w[3],C=w[4],k=w[5],L=Math.cos(C)*x+E,_=Math.sin(C)*T+S;c?(c=!1,a=L,f=_):s+=N(o,u,L,_);var D=(r-E)*T/x+E;if(h&&y(E,S,T,C,C+k,1-w[7],t,D,i))return!0;p&&(s+=M(E,S,T,C,C+k,1-w[7],D,i)),o=Math.cos(C+k)*x+E,u=Math.sin(C+k)*T+S;break;case"z":if(h&&v(o,u,a,f,t,r,i))return!0;l=!0}}return p&&(s+=N(o,u,a,f,r,i)),s!==0}function D(e,n){var s=e+":"+n;if(i[s])return i[s];r=r||t.getContext(),r.save(),n&&(r.font=n),e=(e+"").split("\n");var u=0;for(var f=0,l=e.length;f<l;f++)u=Math.max(r.measureText(e[f]).width,u);return r.restore(),i[s]=u,++o>a&&(o=0,i={}),u}function P(e,n){var i=e+":"+n;if(s[i])return s[i];r=r||t.getContext(),r.save(),n&&(r.font=n),e=(e+"").split("\n");var o=(r.measureText("国").width+2)*e.length;return r.restore(),s[i]=o,++u>a&&(u=0,s={}),o}var t=e("./util"),n=e("./curve"),r,i={},s={},o=0,u=0,a=5e3,f=Math.PI*2,C=[-1,-1,-1],k=[-1,-1];return{isInside:c,isOutside:d,getTextWidth:D,getTextHeight:P,isInsidePath:_,isInsidePolygon:T,isInsideSector:x,isInsideCircle:S,isInsideLine:v,isInsideRect:E,isInsideBrokenLine:b}}),define("zrender/mixin/Transformable",["require","../tool/matrix","../tool/vector"],function(e){function s(e){return e>-i&&e<i}function o(e){return e>i||e<-i}var t=e("../tool/matrix"),n=e("../tool/vector"),r=[0,0],i=5e-5,u=function(){this.position||(this.position=[0,0]),typeof this.rotation=="undefined"&&(this.rotation=[0,0,0]),this.scale||(this.scale=[1,1,0,0]),this.needLocalTransform=!1,this.needTransform=!1};return u.prototype={constructor:u,updateNeedTransform:function(){this.needLocalTransform=o(this.rotation[0])||o(this.position[0])||o(this.position[1])||o(this.scale[0]-1)||o(this.scale[1]-1)},updateTransform:function(){this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform;if(!this.needTransform)return;var e=this.transform||t.create();t.identity(e);if(this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){r[0]=-this.scale[2]||0,r[1]=-this.scale[3]||0;var n=o(r[0])||o(r[1]);n&&t.translate(e,e,r),t.scale(e,e,this.scale),n&&(r[0]=-r[0],r[1]=-r[1],t.translate(e,e,r))}if(this.rotation instanceof Array){if(this.rotation[0]!==0){r[0]=-this.rotation[1]||0,r[1]=-this.rotation[2]||0;var n=o(r[0])||o(r[1]);n&&t.translate(e,e,r),t.rotate(e,e,this.rotation[0]),n&&(r[0]=-r[0],r[1]=-r[1],t.translate(e,e,r))}}else this.rotation!==0&&t.rotate(e,e,this.rotation);(o(this.position[0])||o(this.position[1]))&&t.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?t.mul(this.transform,this.parent.transform,this.transform):t.copy(this.transform,this.parent.transform))},setTransform:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}},lookAt:function(){var e=n.create();return function(r){this.transform||(this.transform=t.create());var i=this.transform;n.sub(e,r,this.position);if(s(e[0])&&s(e[1]))return;n.normalize(e,e),i[2]=e[0]*this.scale[1],i[3]=e[1]*this.scale[1],i[0]=e[1]*this.scale[0],i[1]=-e[0]*this.scale[0],i[4]=this.position[0],i[5]=this.position[1],this.decomposeTransform()}}(),decomposeTransform:function(){if(!this.transform)return;var e=this.transform,t=e[0]*e[0]+e[1]*e[1],n=this.position,r=this.scale,i=this.rotation;o(t-1)&&(t=Math.sqrt(t));var s=e[2]*e[2]+e[3]*e[3];o(s-1)&&(s=Math.sqrt(s)),n[0]=e[4],n[1]=e[5],r[0]=t,r[1]=s,r[2]=r[3]=0,i[0]=Math.atan2(-e[1]/s,e[0]/t),i[1]=i[2]=0}},u}),define("zrender/tool/color",["require","../tool/util"],function(e){function f(e){r=e}function l(){r=i}function c(e,t){return e|=0,t=t||r,t[e%t.length]}function h(e){s=e}function p(){o=s}function d(){return s}function v(e,r,i,s,o,u,a){n||(n=t.getContext());var f=n.createRadialGradient(e,r,i,s,o,u);for(var l=0,c=a.length;l<c;l++)f.addColorStop(a[l][0],a[l][1]);return f.__nonRecursion=!0,f}function m(e,r,i,s,o){n||(n=t.getContext());var u=n.createLinearGradient(e,r,i,s);for(var a=0,f=o.length;a<f;a++)u.addColorStop(o[a][0],o[a][1]);return u.__nonRecursion=!0,u}function g(e,t,n){e=S(e),t=S(t),e=F(e),t=F(t);var r=[],i=(t[0]-e[0])/n,s=(t[1]-e[1])/n,o=(t[2]-e[2])/n;for(var u=0,a=e[0],f=e[1],l=e[2];u<n;u++)r[u]=b([R(Math.floor(a),[0,255]),R(Math.floor(f),[0,255]),R(Math.floor(l),[0,255])]),a+=i,f+=s,l+=o;return a=t[0],f=t[1],l=t[2],r[u]=b([a,f,l]),r}function y(e,t){var n=[],r=e.length;t===undefined&&(t=20);if(r===1)n=g(e[0],e[0],t);else if(r>1)for(var i=0,s=r-1;i<s;i++){var o=g(e[i],e[i+1],t);i<s-1&&o.pop(),n=n.concat(o)}return n}function b(e,t){t=t||"rgb";if(e&&(e.length===3||e.length===4)){e=q(e,function(e){return e>1?Math.ceil(e):e});if(t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var n=q(e.slice(1,3),function(e){return e+"%"});e[1]=n[0],e[2]=n[1]}return t.indexOf("a")>-1?(e.length===3&&e.push(1),e[3]=R(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}function w(e){e=_(e),e.indexOf("rgba")<0&&(e=S(e));var t=[],n=0;return e.replace(/[\d.]+/g,function(e){n<3?e|=0:e=+e,t[n++]=e}),t}function E(e,t){var n=F(e),r=n[3];return typeof r=="undefined"&&(r=1),e.indexOf("hsb")>-1?n=U(n):e.indexOf("hsl")>-1&&(n=z(n)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?n=X(n):t.indexOf("hsl")>-1&&(n=V(n)),n[3]=r,b(n,t)}function S(e){return E(e,"rgba")}function x(e){return E(e,"rgb")}function T(e){return E(e,"hex")}function N(e){return E(e,"hsva")}function C(e){return E(e,"hsv")}function k(e){return E(e,"hsba")}function L(e){return E(e,"hsb")}function A(e){return E(e,"hsla")}function O(e){return E(e,"hsl")}function M(e){for(var t in a)if(T(a[t])===T(e))return t;return null}function _(e){return String(e).replace(/\s+/g,"")}function D(e){a[e]&&(e=a[e]),e=_(e),e=e.replace(/hsv/i,"hsb");if(/^#[\da-f]{3}$/i.test(e)){e=parseInt(e.slice(1),16);var t=(e&3840)<<8,n=(e&240)<<4,r=e&15;e="#"+((1<<24)+(t<<4)+t+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return e}function P(e,t){var n=t>0?1:-1;typeof t=="undefined"&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=x(e);var r=F(e);for(var i=0;i<3;i++)n===1?r[i]=r[i]*(1-t)|0:r[i]=(255-r[i])*t+r[i]|0;return"rgb("+r.join(",")+")"}function H(e){var t=F(S(e));return t=q(t,function(e){return 255-e}),b(t,"rgb")}function B(e,t,n){typeof n=="undefined"&&(n=.5),n=1-R(n,[0,1]);var r=n*2-1,i=F(S(e)),s=F(S(t)),o=i[3]-s[3],u=((r*o===-1?r:(r+o)/(1+r*o))+1)/2,a=1-u,f=[];for(var l=0;l<3;l++)f[l]=i[l]*u+s[l]*a;var c=i[3]*n+s[3]*(1-n);return c=Math.max(0,Math.min(1,c)),i[3]===1&&s[3]===1?b(f,"rgb"):(f[3]=c,b(f,"rgba"))}function j(){return"#"+Math.random().toString(16).slice(2,8)}function F(e){e=D(e);var t=e.match(u);if(t===null)throw new Error("The color format error");var n,r,i=[],s;if(t[2])n=t[2].replace("#","").split(""),s=[n[0]+n[1],n[2]+n[3],n[4]+n[5]],i=q(s,function(e){return R(parseInt(e,16),[0,255])});else if(t[4]){var o=t[4].split(",");r=o[3],s=o.slice(0,3),i=q(s,function(e){return e=Math.floor(e.indexOf("%")>0?parseInt(e,0)*2.55:e),R(e,[0,255])}),typeof r!="undefined"&&i.push(R(parseFloat(r),[0,1]))}else if(t[5]||t[6]){var a=(t[5]||t[6]).split(","),f=parseInt(a[0],0)/360,l=a[1],c=a[2];r=a[3],i=q([l,c],function(e){return R(parseFloat(e)/100,[0,1])}),i.unshift(f),typeof r!="undefined"&&i.push(R(parseFloat(r),[0,1]))}return i}function I(e,t){t===null&&(t=1);var n=F(S(e));return n[3]=R(Number(t).toFixed(4),[0,1]),b(n,"rgba")}function q(e,t){if(typeof t!="function")throw new TypeError;var n=e?e.length:0;for(var r=0;r<n;r++)e[r]=t(e[r]);return e}function R(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}function U(e){var t=e[0],n=e[1],r=e[2],i,s,o;if(n===0)i=r*255,s=r*255,o=r*255;else{var u=t*6;u===6&&(u=0);var a=u|0,f=r*(1-n),l=r*(1-n*(u-a)),c=r*(1-n*(1-(u-a))),h=0,p=0,d=0;a===0?(h=r,p=c,d=f):a===1?(h=l,p=r,d=f):a===2?(h=f,p=r,d=c):a===3?(h=f,p=l,d=r):a===4?(h=c,p=f,d=r):(h=r,p=f,d=l),i=h*255,s=p*255,o=d*255}return[i,s,o]}function z(e){var t=e[0],n=e[1],r=e[2],i,s,o;if(n===0)i=r*255,s=r*255,o=r*255;else{var u;r<.5?u=r*(1+n):u=r+n-n*r;var a=2*r-u;i=255*W(a,u,t+1/3),s=255*W(a,u,t),o=255*W(a,u,t-1/3)}return[i,s,o]}function W(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+(t-e)*6*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function X(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=s-i,u=s,a,f;if(o===0)a=0,f=0;else{f=o/s;var l=((s-t)/6+o/2)/o,c=((s-n)/6+o/2)/o,h=((s-r)/6+o/2)/o;t===s?a=h-c:n===s?a=1/3+l-h:r===s&&(a=2/3+c-l),a<0&&(a+=1),a>1&&(a-=1)}return a*=360,f*=100,u*=100,[a,f,u]}function V(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=s-i,u=(s+i)/2,a,f;if(o===0)a=0,f=0;else{u<.5?f=o/(s+i):f=o/(2-s-i);var l=((s-t)/6+o/2)/o,c=((s-n)/6+o/2)/o,h=((s-r)/6+o/2)/o;t===s?a=h-c:n===s?a=1/3+l-h:r===s&&(a=2/3+c-l),a<0&&(a+=1),a>1&&(a-=1)}return a*=360,f*=100,u*=100,[a,f,u]}var t=e("../tool/util"),n,r=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],i=r,s="rgba(255,255,0,0.5)",o=s,u=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,a={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};return{customPalette:f,resetPalette:l,getColor:c,getHighlightColor:d,customHighlight:h,resetHighlight:p,getRadialGradient:v,getLinearGradient:m,getGradientColors:y,getStepColors:g,reverse:H,mix:B,lift:P,trim:_,random:j,toRGB:x,toRGBA:S,toHex:T,toHSL:O,toHSLA:A,toHSB:L,toHSBA:k,toHSV:C,toHSVA:N,toName:M,toColor:b,toArray:w,alpha:I,getData:F}}),define("zrender/shape/Base",["require","../tool/matrix","../tool/guid","../tool/util","../tool/log","../mixin/Transformable","../mixin/Eventful","../tool/area","../tool/area","../tool/color","../tool/area"],function(e){function a(t,n,r,i,s,o,u){s&&(t.font=s),t.textAlign=o,t.textBaseline=u;var a=f(n,r,i,s,o,u);n=(n+"").split("\n");var l=e("../tool/area").getTextHeight("国",s);switch(u){case"top":i=a.y;break;case"bottom":i=a.y+l;break;default:i=a.y+l/2}for(var c=0,h=n.length;c<h;c++)t.fillText(n[c],r,i),i+=l}function f(t,n,r,i,s,o){var u=e("../tool/area"),a=u.getTextWidth(t,i),f=u.getTextHeight("国",i);t=(t+"").split("\n");switch(s){case"end":case"right":n-=a;break;case"center":n-=a/2}switch(o){case"top":break;case"bottom":r-=f*t.length;break;default:r-=f*t.length/2}return{x:n,y:r,width:a,height:f*t.length}}var t=window.G_vmlCanvasManager,n=e("../tool/matrix"),r=e("../tool/guid"),i=e("../tool/util"),s=e("../tool/log"),o=e("../mixin/Transformable"),u=e("../mixin/Eventful"),l=function(e){e=e||{},this.id=e.id||r();for(var t in e)this[t]=e[t];this.style=this.style||{},this.highlightStyle=this.highlightStyle||null,this.parent=null,this.__dirty=!0,this.__clipShapes=[],o.call(this),u.call(this)};l.prototype.invisible=!1,l.prototype.ignore=!1,l.prototype.zlevel=0,l.prototype.draggable=!1,l.prototype.clickable=!1,l.prototype.hoverable=!0,l.prototype.z=0,l.prototype.brush=function(e,t){var n=this.beforeBrush(e,t);e.beginPath(),this.buildPath(e,n);switch(n.brushType){case"both":e.fill();case"stroke":n.lineWidth>0&&e.stroke();break;default:e.fill()}this.drawText(e,n,this.style),this.afterBrush(e)},l.prototype.beforeBrush=function(e,t){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),this.brushTypeOnly=="stroke"&&(n.strokeColor=n.strokeColor||n.color),e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n},l.prototype.afterBrush=function(e){e.restore()};var c=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];l.prototype.setContext=function(e,t){for(var n=0,r=c.length;n<r;n++){var i=c[n][0],s=t[i],o=c[n][1];typeof s!="undefined"&&(e[o]=s)}};var h=n.create();return l.prototype.doClip=function(e){if(this.__clipShapes&&!t)for(var r=0;r<this.__clipShapes.length;r++){var i=this.__clipShapes[r];if(i.needTransform){var s=i.transform;n.invert(h,s),e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}e.beginPath(),i.buildPath(e,i.style),e.clip();if(i.needTransform){var s=h;e.transform(s[0],s[1],s[2],s[3],s[4],s[5])}}},l.prototype.getHighlightStyle=function(t,n,r){var i={};for(var s in t)i[s]=t[s];var o=e("../tool/color"),u=o.getHighlightColor();t.brushType!="stroke"?(i.strokeColor=u,i.lineWidth=(t.lineWidth||1)+this.getHighlightZoom(),i.brushType="both"):r!="stroke"?(i.strokeColor=u,i.lineWidth=(t.lineWidth||1)+this.getHighlightZoom()):i.strokeColor=n.strokeColor||o.mix(t.strokeColor,o.toRGB(u));for(var s in n)typeof n[s]!="undefined"&&(i[s]=n[s]);return i},l.prototype.getHighlightZoom=function(){return this.type!="text"?6:2},l.prototype.drift=function(e,t){this.position[0]+=e,this.position[1]+=t},l.prototype.getTansform=function(){var e=[];return function(t,r){var i=[t,r];return this.needTransform&&this.transform&&(n.invert(e,this.transform),n.mulVector(i,e,[t,r,1]),t==i[0]&&r==i[1]&&this.updateNeedTransform()),i}}(),l.prototype.buildPath=function(e,t){s("buildPath not implemented in "+this.type)},l.prototype.getRect=function(e){s("getRect not implemented in "+this.type)},l.prototype.isCover=function(t,n){var r=this.getTansform(t,n);t=r[0],n=r[1];var i=this.style.__rect;return i||(i=this.style.__rect=this.getRect(this.style)),t>=i.x&&t<=i.x+i.width&&n>=i.y&&n<=i.y+i.height?e("../tool/area").isInside(this,this.style,t,n):!1},l.prototype.drawText=function(e,t,n){if(typeof t.text=="undefined"||t.text===!1)return;var r=t.textColor||t.color||t.strokeColor;e.fillStyle=r;var i=10,s,o,u,f,l=t.textPosition||this.textPosition||"top";switch(l){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var c=(n||t).__rect||this.getRect(n||t);switch(l){case"inside":u=c.x+c.width/2,f=c.y+c.height/2,s="center",o="middle",t.brushType!="stroke"&&r==t.color&&(e.fillStyle="#fff");break;case"left":u=c.x-i,f=c.y+c.height/2,s="end",o="middle";break;case"right":u=c.x+c.width+i,f=c.y+c.height/2,s="start",o="middle";break;case"top":u=c.x+c.width/2,f=c.y-i,s="center",o="bottom";break;case"bottom":u=c.x+c.width/2,f=c.y+c.height+i,s="center",o="top"}}break;case"start":case"end":var h,p,d,v;if(typeof t.pointList!="undefined"){var m=t.pointList;if(m.length<2)return;var g=m.length;switch(l){case"start":h=m[0][0],p=m[1][0],d=m[0][1],v=m[1][1];break;case"end":h=m[g-2][0],p=m[g-1][0],d=m[g-2][1],v=m[g-1][1]}}else h=t.xStart||0,p=t.xEnd||0,d=t.yStart||0,v=t.yEnd||0;switch(l){case"start":s=h<p?"end":"start",o=d<v?"bottom":"top",u=h,f=d;break;case"end":s=h<p?"start":"end",o=d<v?"top":"bottom",u=p,f=v}i-=4,h!=p?u-=s=="end"?i:-i:s="center",d!=v?f-=o=="bottom"?i:-i:o="middle";break;case"specific":u=t.textX||0,f=t.textY||0,s="start",o="middle"}u!=null&&f!=null&&a(e,t.text,u,f,t.textFont,t.textAlign||s,t.textBaseline||o)},l.prototype.modSelf=function(){this.__dirty=!0,this.style&&(this.style.__rect=null)},l.prototype.isSilent=function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)},i.merge(l.prototype,o.prototype,!0),i.merge(l.prototype,u.prototype,!0),l}),define("zrender/shape/Text",["require","../tool/area","./Base","../tool/util"],function(e){var t=e("../tool/area"),n=e("./Base"),r=function(e){n.call(this,e)};return r.prototype={type:"text",brush:function(e,n){var r=this.style;n&&(r=this.getHighlightStyle(r,this.highlightStyle||{}));if(typeof r.text=="undefined"||r.text===!1)return;e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r.textFont&&(e.font=r.textFont),e.textAlign=r.textAlign||"start",e.textBaseline=r.textBaseline||"middle";var i=(r.text+"").split("\n"),s=t.getTextHeight("国",r.textFont),o=this.getRect(r),u=r.x,a;r.textBaseline=="top"?a=o.y:r.textBaseline=="bottom"?a=o.y+s:a=o.y+s/2;for(var f=0,l=i.length;f<l;f++){if(r.maxWidth)switch(r.brushType){case"fill":e.fillText(i[f],u,a,r.maxWidth);break;case"stroke":e.strokeText(i[f],u,a,r.maxWidth);break;case"both":e.fillText(i[f],u,a,r.maxWidth),e.strokeText(i[f],u,a,r.maxWidth);break;default:e.fillText(i[f],u,a,r.maxWidth)}else switch(r.brushType){case"fill":e.fillText(i[f],u,a);break;case"stroke":e.strokeText(i[f],u,a);break;case"both":e.fillText(i[f],u,a),e.strokeText(i[f],u,a);break;default:e.fillText(i[f],u,a)}a+=s}e.restore();return},getRect:function(e){if(e.__rect)return e.__rect;var n=t.getTextWidth(e.text,e.textFont),r=t.getTextHeight(e.text,e.textFont),i=e.x;e.textAlign=="end"||e.textAlign=="right"?i-=n:e.textAlign=="center"&&(i-=n/2);var s;return e.textBaseline=="top"?s=e.y:e.textBaseline=="bottom"?s=e.y-r:s=e.y-r/2,e.__rect={x:i,y:s,width:n,height:r},e.__rect}},e("../tool/util").inherits(r,n),r}),define("zrender/shape/Rectangle",["require","./Base","../tool/util"],function(e){var t=e("./Base"),n=function(e){t.call(this,e)};return n.prototype={type:"rectangle",_buildRadiusPath:function(e,t){var n=t.x,r=t.y,i=t.width,s=t.height,o=t.radius,u,a,f,l;typeof o=="number"?u=a=f=l=o:o instanceof Array?o.length===1?u=a=f=l=o[0]:o.length===2?(u=f=o[0],a=l=o[1]):o.length===3?(u=o[0],a=l=o[1],f=o[2]):(u=o[0],a=o[1],f=o[2],l=o[3]):u=a=f=l=0;var c;u+a>i&&(c=u+a,u*=i/c,a*=i/c),f+l>i&&(c=f+l,f*=i/c,l*=i/c),a+f>s&&(c=a+f,a*=s/c,f*=s/c),u+l>s&&(c=u+l,u*=s/c,l*=s/c),e.moveTo(n+u,r),e.lineTo(n+i-a,r),a!==0&&e.quadraticCurveTo(n+i,r,n+i,r+a),e.lineTo(n+i,r+s-f),f!==0&&e.quadraticCurveTo(n+i,r+s,n+i-f,r+s),e.lineTo(n+l,r+s),l!==0&&e.quadraticCurveTo(n,r+s,n,r+s-l),e.lineTo(n,r+u),u!==0&&e.quadraticCurveTo(n,r,n+u,r)},buildPath:function(e,t){t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x,t.y),e.lineTo(t.x+t.width,t.y),e.lineTo(t.x+t.width,t.y+t.height),e.lineTo(t.x,t.y+t.height),e.lineTo(t.x,t.y)),e.closePath();return},getRect:function(e){if(e.__rect)return e.__rect;var t;return e.brushType=="stroke"||e.brushType=="fill"?t=e.lineWidth||1:t=0,e.__rect={x:Math.round(e.x-t/2),y:Math.round(e.y-t/2),width:e.width+t,height:e.height+t},e.__rect}},e("../tool/util").inherits(n,t),n}),define("zrender/loadingEffect/Base",["require","../tool/util","../shape/Text","../shape/Rectangle"],function(e){function o(e){this.setOptions(e)}var t=e("../tool/util"),n=e("../shape/Text"),r=e("../shape/Rectangle"),i="Loading...",s="normal 16px Arial";return o.prototype.createTextShape=function(e){return new n({highlightStyle:t.merge({x:this.canvasWidth/2,y:this.canvasHeight/2,text:i,textAlign:"center",textBaseline:"middle",textFont:s,color:"#333",brushType:"fill"},e,!0)})},o.prototype.createBackgroundShape=function(e){return new r({highlightStyle:{x:0,y:0,width:this.canvasWidth,height:this.canvasHeight,brushType:"fill",color:e}})},o.prototype.start=function(e){function t(t){e.storage.addHover(t)}function n(){e.refreshHover()}this.canvasWidth=e._width,this.canvasHeight=e._height,this.loadingTimer=this._start(t,n)},o.prototype._start=function(){return setInterval(function(){},1e4)},o.prototype.stop=function(){clearInterval(this.loadingTimer)},o.prototype.setOptions=function(e){this.options=e||{}},o.prototype.adjust=function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e},o.prototype.getLocation=function(e,t,n){var r=e.x!=null?e.x:"center";switch(r){case"center":r=Math.floor((this.canvasWidth-t)/2);break;case"left":r=0;break;case"right":r=this.canvasWidth-t}var i=e.y!=null?e.y:"center";switch(i){case"center":i=Math.floor((this.canvasHeight-n)/2);break;case"top":i=0;break;case"bottom":i=this.canvasHeight-n}return{x:r,y:i,width:t,height:n}},o}),define("zrender/shape/Image",["require","./Base","../tool/util"],function(e){var t=[],n,r=e("./Base"),i=function(e){r.call(this,e),this._imageCache={}};return i.prototype={type:"image",brush:function(e,r,i){var s=this.style||{};r&&(s=this.getHighlightStyle(s,this.highlightStyle||{}));var o=s.image,u=this;if(typeof o=="string"){var a=o;this._imageCache[a]?o=this._imageCache[a]:(o=new Image,o.onload=function(){o.onload=null,clearTimeout(n),t.push(u),n=setTimeout(function(){i&&i(t),t=[]},10)},o.src=a,this._imageCache[a]=o)}if(o){if(o.nodeName.toUpperCase()=="IMG")if(window.ActiveXObject){if(o.readyState!="complete")return}else if(!o.complete)return;var f=s.width||o.width,l=s.height||o.height,c=s.x,h=s.y;if(!o.width||!o.height)return;e.save(),this.doClip(e),this.setContext(e,s),this.setTransform(e);if(s.sWidth&&s.sHeight){var p=s.sx||0,d=s.sy||0;e.drawImage(o,p,d,s.sWidth,s.sHeight,c,h,f,l)}else if(s.sx&&s.sy){var p=s.sx,d=s.sy,v=f-p,m=l-d;e.drawImage(o,p,d,v,m,c,h,f,l)}else e.drawImage(o,c,h,f,l);s.width||(s.width=f),s.height||(s.height=l),this.style.width||(this.style.width=f),this.style.height||(this.style.height=l),this.drawText(e,s,this.style),e.restore()}},getRect:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height}},clearCache:function(){this._imageCache={}}},e("../tool/util").inherits(i,r),i}),define("zrender/Painter",["require","./config","./tool/util","./tool/log","./tool/matrix","./loadingEffect/Base","./mixin/Transformable","./shape/Image"],function(e){function f(){return!1}function l(){}function h(e,t,n){var r=document.createElement(t),i=n._width,s=n._height;return r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.width=i+"px",r.style.height=s+"px",r.setAttribute("width",i*u),r.setAttribute("height",s*u),r.setAttribute("data-zr-dom-id",e),r}var t=e("./config"),n=e("./tool/util"),r=e("./tool/log"),i=e("./tool/matrix"),s=e("./loadingEffect/Base"),o=e("./mixin/Transformable"),u=window.devicePixelRatio||1;u=Math.max(u,1);var a=window.G_vmlCanvasManager,c=function(e,t){this.root=e,this.storage=t,e.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",e.appendChild(n),this._layers={},this._layerConfig={},this._loadingEffect=new s({}),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=h("bg","div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=f,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var r=new p("_zrender_hover_",this);this._layers.hover=r,n.appendChild(r.dom),r.initContext(),r.dom.onselectstart=f,r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none";var i=this;this.updatePainter=function(e,t){i.refreshShapes(e,t)}};c.prototype.render=function(e){return this.isLoading()&&this.hideLoading(),this.refresh(e,!0),this},c.prototype.refresh=function(e,t){var n=this.storage.getShapeList(!0);return this._paintList(n,t),typeof e=="function"&&e(),this},c.prototype._paintList=function(e,n){typeof n=="undefined"&&(n=!1),this._updateLayerStatus(e);var s,o,u;for(var f in this._layers)f!=="hover"&&(this._layers[f].unusedCount++,this._layers[f].updateTransform());var l=[];for(var c=0,h=e.length;c<h;c++){var p=e[c];o!==p.zlevel&&(s&&s.needTransform&&u.restore(),s=this.getLayer(p.zlevel,s),u=s.ctx,o=p.zlevel,s.unusedCount=0,(s.dirty||n)&&s.clear(),s.needTransform&&(u.save(),s.setTransform(u)));if(p.__startClip&&!a){var d=p.__startClip;u.save();if(d.needTransform){var v=d.transform;i.invert(l,v),u.transform(v[0],v[1],v[2],v[3],v[4],v[5])}u.beginPath(),d.buildPath(u,d.style),u.clip();if(d.needTransform){var v=l;u.transform(v[0],v[1],v[2],v[3],v[4],v[5])}}if((s.dirty||n)&&!p.invisible)if(!p.onbrush||p.onbrush&&!p.onbrush(u,!1))if(t.catchBrushException)try{p.brush(u,!1,this.updatePainter)}catch(m){r(m,"brush error of "+p.type,p)}else p.brush(u,!1,this.updatePainter);p.__stopClip&&!a&&u.restore(),p.__dirty=!1}s&&s.needTransform&&u.restore();for(var f in this._layers)if(f!=="hover"){var g=this._layers[f];g.dirty=!1,g.unusedCount==1&&g.clear()}},c.prototype.getLayer=function(e,t){var r=this._layers[e];if(!r){r=new p(e,this);var i=t?t.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(r.dom,i.nextSibling):i.parentNode.appendChild(r.dom),r.initContext(),this._layers[e]=r,this._layerConfig[e]&&n.merge(r,this._layerConfig[e],!0),r.updateTransform()}return r},c.prototype.getLayers=function(){return this._layers},c.prototype._updateLayerStatus=function(e){var t=this._layers,n={};for(var r in t)r!=="hover"&&(n[r]=t[r].elCount,t[r].elCount=0);for(var i=0,s=e.length;i<s;i++){var o=e[i],u=o.zlevel,a=t[u];if(a){a.elCount++;if(a.dirty)continue;a.dirty=o.__dirty}}for(var r in t)r!=="hover"&&n[r]!==t[r].elCount&&(t[r].dirty=!0)},c.prototype.refreshShapes=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];this.storage.mod(i.id)}return this.refresh(t),this},c.prototype.setLoadingEffect=function(e){return this._loadingEffect=e,this},c.prototype.clear=function(){for(var e in this._layers){if(e=="hover")continue;this._layers[e].clear()}return this},c.prototype.modLayer=function(e,t){if(t){this._layerConfig[e]?n.merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&n.merge(r,this._layerConfig[e],!0)}},c.prototype.delLayer=function(e){var t=this._layers[e];if(!t)return;this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e]},c.prototype.refreshHover=function(){this.clearHover();var e=this.storage.getHoverShapes(!0);for(var t=0,n=e.length;t<n;t++)this._brushHover(e[t]);return this.storage.delHover(),this},c.prototype.clearHover=function(){var e=this._layers.hover;return e&&e.clear(),this},c.prototype.showLoading=function(e){return this._loadingEffect&&this._loadingEffect.stop(),e&&this.setLoadingEffect(e),this._loadingEffect.start(this),this.loading=!0,this},c.prototype.hideLoading=function(){return this._loadingEffect.stop(),this.clearHover(),this.loading=!1,this},c.prototype.isLoading=function(){return this.loading},c.prototype.resize=function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),n=this._getHeight();e.style.display="";if(this._width!=t||n!=this._height){this._width=t,this._height=n,e.style.width=t+"px",e.style.height=n+"px";for(var r in this._layers)this._layers[r].resize(t,n);this.refresh(null,!0)}return this},c.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},c.prototype.dispose=function(){this.isLoading()&&this.hideLoading(),this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},c.prototype.getDomHover=function(){return this._layers.hover.dom},c.prototype.toDataURL=function(e,n,i){if(a)return null;var s=h("image","canvas",this);this._bgDom.appendChild(s);var o=s.getContext("2d");u!=1&&o.scale(u,u),o.fillStyle=n||"#fff",o.rect(0,0,this._width*u,this._height*u),o.fill();var f=this;this.storage.iterShape(function(e){if(!e.invisible)if(!e.onbrush||e.onbrush&&!e.onbrush(o,!1))if(t.catchBrushException)try{e.brush(o,!1,f.updatePainter)}catch(n){r(n,"brush error of "+e.type,e)}else e.brush(o,!1,f.updatePainter)},{normal:"up",update:!0});var l=s.toDataURL(e,i);return o=null,this._bgDom.removeChild(s),l},c.prototype.getWidth=function(){return this._width},c.prototype.getHeight=function(){return this._height},c.prototype._getWidth=function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0},c.prototype._getHeight=function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0},c.prototype._brushHover=function(e){var n=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(n,!0)){var i=this.getLayer(e.zlevel);i.needTransform&&(n.save(),i.setTransform(n));if(t.catchBrushException)try{e.brush(n,!0,this.updatePainter)}catch(s){r(s,"hoverBrush error of "+e.type,e)}else e.brush(n,!0,this.updatePainter);i.needTransform&&n.restore()}},c.prototype._shapeToImage=function(t,n,r,i,s){var o=document.createElement("canvas"),u=o.getContext("2d"),s=window.devicePixelRatio||1;o.style.width=r+"px",o.style.height=i+"px",o.setAttribute("width",r*s),o.setAttribute("height",i*s),u.clearRect(0,0,r*s,i*s);var a={position:n.position,rotation:n.rotation,scale:n.scale};n.position=[0,0,0],n.rotation=0,n.scale=[1,1],n&&n.brush(u,!1);var f=e("./shape/Image"),l=new f({id:t,style:{x:0,y:0,image:o}});return a.position!=null&&(l.position=n.position=a.position),a.rotation!=null&&(l.rotation=n.rotation=a.rotation),a.scale!=null&&(l.scale=n.scale=a.scale),l},c.prototype._createShapeToImageProcessor=function(){if(a)return l;var e=this;return function(t,n,r,i){return e._shapeToImage(t,n,r,i,u)}};var p=function(e,t){this.dom=h(e,"canvas",t),this.dom.onselectstart=f,this.dom.style["-webkit-user-select"]="none",this.dom.style["user-select"]="none",this.dom.style["-webkit-touch-callout"]="none",a&&a.initElement(this.dom),this.domBack=null,this.ctxBack=null,this.painter=t,this.unusedCount=0,this.config=null,this.dirty=!0,this.elCount=0,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.zoomable=!1,this.panable=!1,this.maxZoom=Infinity,this.minZoom=0,o.call(this)};return p.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),u!=1&&this.ctx.scale(u,u)},p.prototype.createBackBuffer=function(){if(a)return;this.domBack=h("back-"+this.id,"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),u!=1&&this.ctxBack.scale(u,u)},p.prototype.resize=function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*u),this.dom.setAttribute("height",t*u),u!=1&&this.ctx.scale(u,u),this.domBack&&(this.domBack.setAttribute("width",e*u),this.domBack.setAttribute("height",t*u),u!=1&&this.ctxBack.scale(u,u))},p.prototype.clear=function(){var e=this.dom,t=this.ctx,n=e.width,r=e.height,i=this.clearColor&&!a,s=this.motionBlur&&!a,o=this.lastFrameAlpha;s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/u,r/u)),i?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,n/u,r/u),t.restore()):t.clearRect(0,0,n/u,r/u);if(s){var f=this.domBack;t.save(),t.globalAlpha=o,t.drawImage(f,0,0,n/u,r/u),t.restore()}},n.merge(p.prototype,o.prototype),c}),define("zrender/Group",["require","./tool/guid","./tool/util","./mixin/Transformable","./mixin/Eventful"],function(e){var t=e("./tool/guid"),n=e("./tool/util"),r=e("./mixin/Transformable"),i=e("./mixin/Eventful"),s=function(e){e=e||{},this.id=e.id||t();for(var n in e)this[n]=e[n];this.type="group",this.clipShape=null,this._children=[],this._storage=null,this.__dirty=!0,r.call(this),i.call(this)};return s.prototype.ignore=!1,s.prototype.children=function(){return this._children.slice()},s.prototype.childAt=function(e){return this._children[e]},s.prototype.addChild=function(e){if(e==this)return;if(e.parent==this)return;e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof s&&e.addChildrenToStorage(this._storage))},s.prototype.removeChild=function(e){var t=n.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof s&&e.delChildrenFromStorage(this._storage))},s.prototype.eachChild=function(e,t){var n=!!t;for(var r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i)}},s.prototype.traverse=function(e,t){var n=!!t;for(var r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i),i.type==="group"&&i.traverse(e,t)}},s.prototype.addChildrenToStorage=function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToMap(n),n.type==="group"&&n.addChildrenToStorage(e)}},s.prototype.delChildrenFromStorage=function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromMap(n.id),n.type==="group"&&n.delChildrenFromStorage(e)}},s.prototype.modSelf=function(){this.__dirty=!0},n.merge(s.prototype,r.prototype,!0),n.merge(s.prototype,i.prototype,!0),s}),define("zrender/Storage",["require","./tool/util","./Group"],function(e){function i(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}var t=e("./tool/util"),n=e("./Group"),r={hover:!1,normal:"down",update:!1},s=function(){this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0};return s.prototype.iterShape=function(e,t){t||(t=r);if(t.hover)for(var n=0,i=this._hoverElements.length;n<i;n++){var s=this._hoverElements[n];s.updateTransform();if(e(s))return this}t.update&&this.updateShapeList();switch(t.normal){case"down":var i=this._shapeList.length;while(i--)if(e(this._shapeList[i]))return this;break;default:for(var n=0,i=this._shapeList.length;n<i;n++)if(e(this._shapeList[n]))return this}return this},s.prototype.getHoverShapes=function(e){if(e)for(var t=0,n=this._hoverElements.length;t<n;t++)this._hoverElements[t].updateTransform();return this._hoverElements},s.prototype.getShapeList=function(e){return e&&this.updateShapeList(),this._shapeList},s.prototype.updateShapeList=function(){this._shapeListOffset=0;for(var e=0,t=this._roots.length;e<t;e++){var n=this._roots[e];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var e=0,t=this._shapeList.length;e<t;e++)this._shapeList[e].__renderidx=e;this._shapeList.sort(i)},s.prototype._updateAndAddShape=function(e,t){if(e.ignore)return;e.updateTransform();if(e.type=="group"){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice(),t.push(e.clipShape)):t=[e.clipShape]);for(var n=0;n<e._children.length;n++){var r=e._children[n];r.__dirty=e.__dirty||r.__dirty,this._updateAndAddShape(r,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e},s.prototype.mod=function(e,n){var r=this._elements[e];if(r){r.modSelf();if(n)if(n.parent||n._storage||n.__startClip){var i={};for(var s in n){if(s=="parent"||s=="_storage"||s=="__startClip")continue;n.hasOwnProperty(s)&&(i[s]=n[s])}t.merge(r,i,!0)}else t.merge(r,n,!0)}return this},s.prototype.drift=function(e,t,n){var r=this._elements[e];return r&&(r.needTransform=!0,(!r.ondrift||r.ondrift&&!r.ondrift(t,n))&&r.drift(t,n)),this},s.prototype.addHover=function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this},s.prototype.delHover=function(){return this._hoverElements=[],this},s.prototype.hasHoverShape=function(){return this._hoverElements.length>0},s.prototype.addRoot=function(e){e instanceof n&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)},s.prototype.delRoot=function(e){if(typeof e=="undefined"){for(var r=0;r<this._roots.length;r++){var i=this._roots[r];i instanceof n&&i.delChildrenFromStorage(this)}this._elements={},this._hoverElements=[],this._roots=[];return}if(e instanceof Array){for(var r=0,s=e.length;r<s;r++)this.delRoot(e[r]);return}var o;typeof e=="string"?o=this._elements[e]:o=e;var u=t.indexOf(this._roots,o);u>=0&&(this.delFromMap(o.id),this._roots.splice(u,1),o instanceof n&&o.delChildrenFromStorage(this))},s.prototype.addToMap=function(e){return e instanceof n&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this},s.prototype.get=function(e){return this._elements[e]},s.prototype.delFromMap=function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof n&&(t._storage=null)),this},s.prototype.dispose=function(){this._elements=this._renderList=this._roots=this._hoverElements=null},s}),define("zrender/animation/easing",[],function(){var e={Linear:function(e){return e},QuadraticIn:function(e){return e*e},QuadraticOut:function(e){return e*(2-e)},QuadraticInOut:function(e){return(e*=2)<1?.5*e*e:-0.5*(--e*(e-2)-1)},CubicIn:function(e){return e*e*e},CubicOut:function(e){return--e*e*e+1},CubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},QuarticIn:function(e){return e*e*e*e},QuarticOut:function(e){return 1- --e*e*e*e},QuarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},QuinticIn:function(e){return e*e*e*e*e},QuinticOut:function(e){return--e*e*e*e*e+1},QuinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},SinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},SinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},SinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},ExponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},ExponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},ExponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},CircularIn:function(e){return 1-Math.sqrt(1-e*e)},CircularOut:function(e){return Math.sqrt(1- --e*e)},CircularInOut:function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},ElasticIn:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)))},ElasticOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/r)+1)},ElasticInOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-0.5*n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r):n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)*.5+1)},BackIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},BackOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},BackInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)},BounceIn:function(t){return 1-e.BounceOut(1-t)},BounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},BounceInOut:function(t){return t<.5?e.BounceIn(t*2)*.5:e.BounceOut(t*2-1)*.5+.5}};return e}),define("zrender/animation/Clip",["require","./easing"],function(e){function n(e){this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+this._life*1e3,this.loop=typeof e.loop=="undefined"?!1:e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart}var t=e("./easing");return n.prototype={step:function(e){var n=(e-this._startTime)/this._life;if(n<0)return;n=Math.min(n,1);var r=typeof this.easing=="string"?t[this.easing]:this.easing,i=typeof r=="function"?r(n):n;return this.fire("frame",i),n==1?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null},restart:function(){var e=(new Date).getTime(),t=(e-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap},fire:function(e,t){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+e]&&this["on"+e](this._targetPool[n],t)},constructor:n},n}),define("zrender/animation/Animation",["require","./Clip","../tool/color","../tool/util","../tool/event"],function(e){function a(e,t){return e[t]}function f(e,t,n){e[t]=n}function l(e,t,n){return(t-e)*n+e}function c(e,t,n,r,i){var s=e.length;if(i==1)for(var o=0;o<s;o++)r[o]=l(e[o],t[o],n);else{var u=e[0].length;for(var o=0;o<s;o++)for(var a=0;a<u;a++)r[o][a]=l(e[o][a],t[o][a],n)}}function h(e){switch(typeof e){case"undefined":case"string":return!1}return typeof e.length!="undefined"}function p(e,t,n,r,i,s,o,u,a){var f=e.length;if(a==1)for(var l=0;l<f;l++)u[l]=d(e[l],t[l],n[l],r[l],i,s,o);else{var c=e[0].length;for(var l=0;l<f;l++)for(var h=0;h<c;h++)u[l][h]=d(e[l][h],t[l][h],n[l][h],r[l][h],i,s,o)}}function d(e,t,n,r,i,s,o){var u=(n-e)*.5,a=(r-t)*.5;return(2*(t-n)+u+a)*o+(-3*(t-n)-2*u-a)*s+u*i+t}function v(e){if(h(e)){var t=e.length;if(h(e[0])){var n=[];for(var r=0;r<t;r++)n.push(o.call(e[r]));return n}return o.call(e)}return e}function m(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}var t=e("./Clip"),n=e("../tool/color"),r=e("../tool/util"),i=e("../tool/event").Dispatcher,s=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},o=Array.prototype.slice,u=function(e){e=e||{},this.stage=e.stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._time=0,i.call(this)};u.prototype={add:function(e){this._clips.push(e)},remove:function(e){var t=r.indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)},_update:function(){var e=(new Date).getTime(),t=e-this._time,n=this._clips,r=n.length,i=[],s=[];for(var o=0;o<r;o++){var u=n[o],a=u.step(e);a&&(i.push(a),s.push(u))}this.stage.update&&this.stage.update();for(var o=0;o<r;)n[o]._needsRemove?(n[o]=n[r-1],n.pop(),r--):o++;r=i.length;for(var o=0;o<r;o++)s[o].fire(i[o]);this._time=e,this.onframe(t),this.dispatch("frame",t)},start:function(){function t(){e._running&&(e._update(),s(t))}var e=this;this._running=!0,this._time=(new Date).getTime(),s(t)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(e,t){t=t||{};var n=new g(e,t.loop,t.getter,t.setter);return n.animation=this,n},constructor:u},r.merge(u.prototype,i.prototype,!0);var g=function(e,t,n,r){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||a,this._setter=r||f,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};return g.prototype={when:function(e,t){for(var n in t)this._tracks[n]||(this._tracks[n]=[],e!==0&&this._tracks[n].push({time:0,value:v(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(e,10),value:t[n]});return this},during:function(e){return this._onframeList.push(e),this},start:function(e){var r=this,i=this._setter,s=this._getter,o=r._onframeList.length,u=e==="spline",a=function(){r._clipCount--;if(r._clipCount===0){r._tracks={};var e=r._doneList.length;for(var t=0;t<e;t++)r._doneList[t].call(r)}},f=function(f,v){var g=f.length;if(!g)return;var y=f[0].value,b=h(y),w=!1,E=b&&h(y[0])?2:1;f.sort(function(e,t){return e.time-t.time});var S;if(!g)return;S=f[g-1].time;var x=[],T=[];for(var N=0;N<g;N++){x.push(f[N].time/S);var C=f[N].value;typeof C=="string"&&(C=n.toArray(C),C.length===0&&(C[0]=C[1]=C[2]=0,C[3]=1),w=!0),T.push(C)}var k=0,L=0,A,N,O,M,_,D,P;if(w)var H=[0,0,0,0];var B=function(e,t){if(t<L){A=Math.min(k+1,g-1);for(N=A;N>=0;N--)if(x[N]<=t)break;N=Math.min(N,g-2)}else{for(N=k;N<g;N++)if(x[N]>t)break;N=Math.min(N-1,g-2)}k=N,L=t;var n=x[N+1]-x[N];if(n===0)return;O=(t-x[N])/n;if(u){_=T[N],M=T[N===0?N:N-1],D=T[N>g-2?g-1:N+1],P=T[N>g-3?g-1:N+2];if(b)p(M,_,D,P,O,O*O,O*O*O,s(e,v),E);else{var a;w?(a=p(M,_,D,P,O,O*O,O*O*O,H,1),a=m(H)):a=d(M,_,D,P,O,O*O,O*O*O),i(e,v,a)}}else if(b)c(T[N],T[N+1],O,s(e,v),E);else{var a;w?(c(T[N],T[N+1],O,H,1),a=m(H)):a=l(T[N],T[N+1],O),i(e,v,a)}for(N=0;N<o;N++)r._onframeList[N](e,t)},j=new t({target:r._target,life:S,loop:r._loop,delay:r._delay,onframe:B,ondestroy:a});e&&e!=="spline"&&(j.easing=e),r._clipList.push(j),r._clipCount++,r.animation.add(j)};for(var v in this._tracks)f(this._tracks[v],v);return this},stop:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this}},u}),define("zrender/zrender",["require","./dep/excanvas","./tool/util","./tool/log","./tool/guid","./Handler","./Painter","./Storage","./animation/Animation","./tool/env"],function(e){function l(e){return function(){var t=e.animatingElements;for(var n=0,r=t.length;n<r;n++)e.storage.mod(t[n].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}e("./dep/excanvas");var t=e("./tool/util"),n=e("./tool/log"),r=e("./tool/guid"),i=e("./Handler"),s=e("./Painter"),o=e("./Storage"),u=e("./animation/Animation"),a={},f={};f.version="2.0.4",f.init=function(e){var t=new c(r(),e);return a[t.id]=t,t},f.dispose=function(e){if(e)e.dispose();else{for(var t in a)a[t].dispose();a={}}return f},f.getInstance=function(e){return a[e]},f.delInstance=function(e){return delete a[e],f};var c=function(t,n){this.id=t,this.env=e("./tool/env"),this.storage=new o,this.painter=new s(n,this.storage),this.handler=new i(n,this.storage,this.painter),this.animatingElements=[],this.animation=new u({stage:{update:l(this)}}),this.animation.start(),this._needsRefreshNextFrame=!1};return c.prototype.getId=function(){return this.id},c.prototype.addShape=function(e){return this.storage.addRoot(e),this},c.prototype.addGroup=function(e){return this.storage.addRoot(e),this},c.prototype.delShape=function(e){return this.storage.delRoot(e),this},c.prototype.delGroup=function(e){return this.storage.delRoot(e),this},c.prototype.modShape=function(e,t){return this.storage.mod(e,t),this},c.prototype.modGroup=function(e,t){return this.storage.mod(e,t),this},c.prototype.modLayer=function(e,t){return this.painter.modLayer(e,t),this},c.prototype.addHoverShape=function(e){return this.storage.addHover(e),this},c.prototype.render=function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this},c.prototype.refresh=function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this},c.prototype.refreshNextFrame=function(){return this._needsRefreshNextFrame=!0,this},c.prototype.refreshHover=function(e){return this.painter.refreshHover(e),this},c.prototype.refreshShapes=function(e,t){return this.painter.refreshShapes(e,t),this},c.prototype.resize=function(){return this.painter.resize(),this},c.prototype.animate=function(e,r,i){typeof e=="string"&&(e=this.storage.get(e));if(e){var s;if(r){var o=r.split("."),u=e;for(var a=0,f=o.length;a<f;a++){if(!u)continue;u=u[o[a]]}u&&(s=u)}else s=e;if(!s){n('Property "'+r+'" is not existed in element '+e.id);return}var l=this.animatingElements;return typeof e.__aniCount=="undefined"&&(e.__aniCount=0),e.__aniCount===0&&l.push(e),e.__aniCount++,this.animation.animate(s,{loop:i}).done(function(){e.__aniCount--;if(e.__aniCount===0){var n=t.indexOf(l,e);l.splice(n,1)}})}n("Element not existed")},c.prototype.clearAnimation=function(){this.animation.clear()},c.prototype.showLoading=function(e){return this.painter.showLoading(e),this},c.prototype.hideLoading=function(){return this.painter.hideLoading(),this},c.prototype.getWidth=function(){return this.painter.getWidth()},c.prototype.getHeight=function(){return this.painter.getHeight()},c.prototype.toDataURL=function(e,t,n){return this.painter.toDataURL(e,t,n)},c.prototype.shapeToImage=function(e,t,n){var i=r();return this.painter.shapeToImage(i,e,t,n)},c.prototype.on=function(e,t){return this.handler.on(e,t),this},c.prototype.un=function(e,t){return this.handler.un(e,t),this},c.prototype.trigger=function(e,t){return this.handler.trigger(e,t),this},c.prototype.clear=function(){return this.storage.delRoot(),this.painter.clear(),this},c.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.animatingElements=this.storage=this.painter=this.handler=null,f.delInstance(this.id)},f}),define("zrender",["zrender/zrender"],function(e){return e}),define("echarts/layout/forceLayoutWorker",["require","zrender/tool/vector"],function __echartsForceLayoutWorker(e){function i(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new r(4),this.size=0}function s(){this.position=t.create(),this.force=t.create(),this.forcePrev=t.create(),this.speed=t.create(),this.speedPrev=t.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function o(e,t){this.node1=e,this.node2=t,this.weight=1}function u(){this.barnesHutOptimize=!1,this.barnesHutTheta=1.5,this.repulsionByDegree=!1,this.preventOverlap=!1,this.strongGravity=!0,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.center=[0,0],this.width=500,this.height=500,this.maxSpeedIncrease=1,this.enableAcceleration=!0,this.nodes=[],this.edges=[],this.bbox=new r(4),this._rootRegion=new i,this._rootRegion.centerOfMass=t.create(),this._massArr=null,this._k=0}var t,n=typeof window=="undefined"&&typeof e=="undefined";n?t={create:function(e,t){var n=new Float32Array(2);return n[0]=e||0,n[1]=t||0,n},dist:function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},len:function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},sub:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},normalize:function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,n){return e[0]=t,e[1]=n,e}}:t=e("zrender/tool/vector");var r=typeof Float32Array=="undefined"?Array:Float32Array;i.prototype.beforeUpdate=function(){for(var e=0;e<this.nSubRegions;e++)this.subRegions[e].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},i.prototype.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var e=0;e<this.nSubRegions;e++)this.subRegions[e].afterUpdate()},i.prototype.addNode=function(e){if(this.nSubRegions===0){if(this.node==null){this.node=e;return}this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(e),this._updateCenterOfMass(e)},i.prototype.findSubRegion=function(e,t){for(var n=0;n<this.nSubRegions;n++){var r=this.subRegions[n];if(r.contain(e,t))return r}},i.prototype.contain=function(e,t){return this.bbox[0]<=e&&this.bbox[2]>=e&&this.bbox[1]<=t&&this.bbox[3]>=t},i.prototype.setBBox=function(e,t,n,r){this.bbox[0]=e,this.bbox[1]=t,this.bbox[2]=n,this.bbox[3]=r,this.size=(n-e+r-t)/2},i.prototype._newSubRegion=function(){var e=this.subRegions[this.nSubRegions];return e||(e=new i,this.subRegions[this.nSubRegions]=e),this.nSubRegions++,e},i.prototype._addNodeToSubRegion=function(e){var t=this.findSubRegion(e.position[0],e.position[1]),n=this.bbox;if(!t){var r=(n[0]+n[2])/2,i=(n[1]+n[3])/2,s=(n[2]-n[0])/2,o=(n[3]-n[1])/2,u=e.position[0]>=r?1:0,a=e.position[1]>=i?1:0,t=this._newSubRegion();t.setBBox(u*s+n[0],a*o+n[1],(u+1)*s+n[0],(a+1)*o+n[1])}t.addNode(e)},i.prototype._updateCenterOfMass=function(e){this.centerOfMass==null&&(this.centerOfMass=t.create());var n=this.centerOfMass[0]*this.mass,r=this.centerOfMass[1]*this.mass;n+=e.position[0]*e.mass,r+=e.position[1]*e.mass,this.mass+=e.mass,this.centerOfMass[0]=n/this.mass,this.centerOfMass[1]=r/this.mass},u.prototype.initNodes=function(e,t,n){this.temperature=1;var r=e.length/2;this.nodes.length=0;var i=typeof n!="undefined";for(var o=0;o<r;o++){var u=new s;u.position[0]=e[o*2],u.position[1]=e[o*2+1],u.mass=t[o],i&&(u.size=n[o]),this.nodes.push(u)}this._massArr=t,i&&(this._sizeArr=n)},u.prototype.initEdges=function(e,t){var n=e.length/2;this.edges.length=0;var r=typeof t!="undefined";for(var i=0;i<n;i++){var s=e[i*2],u=e[i*2+1],a=this.nodes[s],f=this.nodes[u];if(!a||!f)continue;a.outDegree++,f.inDegree++;var l=new o(a,f);r&&(l.weight=t[i]),this.edges.push(l)}},u.prototype.update=function(){var e=this.nodes.length;this.updateBBox(),this._k=.4*this.scaling*Math.sqrt(this.width*this.height/e);if(this.barnesHutOptimize){this._rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this._rootRegion.beforeUpdate();for(var n=0;n<e;n++)this._rootRegion.addNode(this.nodes[n]);this._rootRegion.afterUpdate()}else{var r=0,i=this._rootRegion.centerOfMass;t.set(i,0,0);for(var n=0;n<e;n++){var s=this.nodes[n];r+=s.mass,t.scaleAndAdd(i,i,s.position,s.mass)}r>0&&t.scale(i,i,1/r)}for(var n=0;n<e;n++){var s=this.nodes[n];t.copy(s.forcePrev,s.force),t.copy(s.speedPrev,s.speed),t.set(s.force,0,0)}for(var n=0;n<e;n++){var o=this.nodes[n];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this._rootRegion,o);else for(var u=n+1;u<e;u++){var a=this.nodes[u];this.applyNodeToNodeRepulsion(o,a,!1)}this.gravity>0&&this.applyNodeGravity(o)}for(var n=0;n<this.edges.length;n++)this.applyEdgeAttraction(this.edges[n]);var f=t.create();for(var n=0;n<e;n++){var s=this.nodes[n],l=s.speed;t.scale(s.force,s.force,1/30);var c=t.len(s.force)+.1,h=Math.min(c,500)/c;t.scale(s.force,s.force,h),this.enableAcceleration?(t.add(l,l,s.force),t.scale(l,l,this.temperature)):t.copy(l,s.force),t.sub(f,l,s.speedPrev);var p=t.len(f);if(p>0){t.scale(f,f,1/p);var d=t.len(s.speedPrev);d>0&&(p=Math.min(p/d,this.maxSpeedIncrease)*d,t.scaleAndAdd(l,s.speedPrev,f,p))}var v=t.len(l),h=Math.min(v,100)/(v+.1);t.scale(l,l,h),t.add(s.position,s.position,l)}},u.prototype.applyRegionToNodeRepulsion=function(){var e=t.create();return function(r,i){if(r.node)this.applyNodeToNodeRepulsion(r.node,i,!0);else{if(r.mass===0&&i.mass===0)return;t.sub(e,i.position,r.centerOfMass);var s=e[0]*e[0]+e[1]*e[1];if(s>this.barnesHutTheta*r.size*r.size){var o=this._k*this._k*(i.mass+r.mass)/(s+1);t.scaleAndAdd(i.force,i.force,e,o*2)}else for(var u=0;u<r.nSubRegions;u++)this.applyRegionToNodeRepulsion(r.subRegions[u],i)}}}(),u.prototype.applyNodeToNodeRepulsion=function(){var e=t.create();return function(r,i,s){if(r===i)return;if(r.mass===0&&i.mass===0)return;t.sub(e,r.position,i.position);var o=e[0]*e[0]+e[1]*e[1];if(o===0)return;var u,a=this._k*this._k,f=r.mass+i.mass;if(this.preventOverlap){var l=Math.sqrt(o);l=l-r.size-i.size,l>0?u=a*f/(l*l):l<=0&&(u=a*10*f)}else u=a*f/o;s||t.scaleAndAdd(r.force,r.force,e,u*2),t.scaleAndAdd(i.force,i.force,e,-u*2)}}(),u.prototype.applyEdgeAttraction=function(){var e=t.create();return function(r){var i=r.node1,s=r.node2;t.sub(e,i.position,s.position);var o=t.len(e),u;this.edgeWeightInfluence===0?u=1:this.edgeWeightInfluence==1?u=r.weight:u=Math.pow(r.weight,this.edgeWeightInfluence);var a;if(this.preventOverlap){o=o-i.size-s.size;if(o<=0)return}var a=-u*o/this._k;t.scaleAndAdd(i.force,i.force,e,a),t.scaleAndAdd(s.force,s.force,e,-a)}}(),u.prototype.applyNodeGravity=function(){var e=t.create();return function(n){t.sub(e,this.center,n.position),this.width>this.height?e[1]*=this.width/this.height:e[0]*=this.height/this.width;var r=t.len(e)/100;this.strongGravity?t.scaleAndAdd(n.force,n.force,e,r*this.gravity*n.mass):t.scaleAndAdd(n.force,n.force,e,this.gravity*n.mass/(r+1))}}(),u.prototype.updateBBox=function(){var e=Infinity,t=Infinity,n=-Infinity,r=-Infinity;for(var i=0;i<this.nodes.length;i++){var s=this.nodes[i].position;e=Math.min(e,s[0]),t=Math.min(t,s[1]),n=Math.max(n,s[0]),r=Math.max(r,s[1])}this.bbox[0]=e,this.bbox[1]=t,this.bbox[2]=n,this.bbox[3]=r},u.getWorkerCode=function(){var e=__echartsForceLayoutWorker.toString();return e.slice(e.indexOf("{")+1,e.lastIndexOf("return"))},u.prototype.setToken=function(e){this._token=e},u.prototype.tokenMatch=function(e){return e===this._token};if(n){var a=null;self.onmessage=function(e){if(e.data instanceof ArrayBuffer){if(!a)return;var t=new Float32Array(e.data),n=(t.length-1)/2;for(var r=0;r<n;r++){var i=a.nodes[r];i.position[0]=t[r*2+1],i.position[1]=t[r*2+2]}return}switch(e.data.cmd){case"init":a||(a=new u),a.initNodes(e.data.nodesPosition,e.data.nodesMass,e.data.nodesSize),a.initEdges(e.data.edges,e.data.edgesWeight),a._token=e.data.token;break;case"updateConfig":if(a)for(var s in e.data.config)a[s]=e.data.config[s];break;case"update":var o=e.data.steps;if(a){var n=a.nodes.length,t=new Float32Array(n*2+1);a.temperature=e.data.temperature;for(var r=0;r<o;r++)a.update(),a.temperature*=e.data.coolDown;for(var r=0;r<n;r++){var i=a.nodes[r];t[r*2+1]=i.position[0],t[r*2+2]=i.position[1]}t[0]=a._token,self.postMessage(t.buffer,[t.buffer])}else{var f=new Float32Array;self.postMessage(f.buffer,[f.buffer])}}}}return u}),define("echarts/layout/Force",["require","./forceLayoutWorker","zrender/tool/vector"],function(e){function o(){return Math.round(Date.now()/100)%1e7}function u(){if(typeof Worker!="undefined"&&typeof Blob!="undefined")try{var e=new Blob([t.getWorkerCode()]);s=window.URL.createObjectURL(e)}catch(n){s=""}return s}var t=e("./forceLayoutWorker"),n=e("zrender/tool/vector"),r=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},i=typeof Float32Array=="undefined"?Array:Float32Array,s,a=function(e){typeof s=="undefined"&&u(),e=e||{},this.width=e.width||500,this.height=e.height||500,this.center=e.center||[this.width/2,this.height/2],this.ratioScaling=e.ratioScaling||!1,this.scaling=e.scaling||1,this.gravity=typeof e.gravity!="undefined"?e.gravity:1,this.large=e.large||!1,this.preventOverlap=e.preventOverlap||!1,this.maxSpeedIncrease=e.maxSpeedIncrease||1,this.enableAcceleration=typeof e.enableAcceleration=="undefined"?!0:e.enableAcceleration,this.onupdate=e.onupdate||function(){},this.temperature=e.temperature||1,this.coolDown=e.coolDown||.99,this._layout=null,this._layoutWorker=null,this._token=0;var t=this,n=this._$onupdate;this._$onupdate=function(e){n.call(t,e)}};return a.prototype.updateConfig=function(){var e=this.width,t=this.height,n=Math.min(e,t),r={center:this.center,width:this.ratioScaling?e:n,height:this.ratioScaling?t:n,scaling:this.scaling||1,gravity:this.gravity||1,barnesHutOptimize:this.large,preventOverlap:this.preventOverlap,enableAcceleration:this.enableAcceleration,maxSpeedIncrease:this.maxSpeedIncrease};if(this._layoutWorker)this._layoutWorker.postMessage({cmd:"updateConfig",config:r});else for(var i in r)this._layout[i]=r[i]},a.prototype.init=function(e,n){if(s&&n)try{this._layoutWorker||(this._layoutWorker=new Worker(s),this._layoutWorker.onmessage=this._$onupdate),this._layout=null}catch(r){this._layoutWorker=null,this._layout||(this._layout=new t)}else this._layout||(this._layout=new t),this._layoutWorker&&(this._layoutWorker.terminate(),this._layoutWorker=null);this.temperature=1,this.graph=e;var u=e.nodes.length,a=new i(u*2),f=new i(u),l=new i(u);for(var c=0;c<u;c++){var h=e.nodes[c];a[c*2]=h.layout.position[0],a[c*2+1]=h.layout.position[1],f[c]=typeof h.layout.mass=="undefined"?1:h.layout.mass,l[c]=typeof h.layout.size=="undefined"?1:h.layout.size,h.layout.__index=c}u=e.edges.length;var p=new i(u*2),d=new i(u);for(var c=0;c<u;c++){var v=e.edges[c];p[c*2]=v.node1.layout.__index,p[c*2+1]=v.node2.layout.__index,d[c]=v.layout.weight||1}this._token=o(),this._layoutWorker?this._layoutWorker.postMessage({cmd:"init",nodesPosition:a,nodesMass:f,nodesSize:l,edges:p,edgesWeight:d,token:this._token}):(this._layout.setToken(this._token),this._layout.initNodes(a,f,l),this._layout.initEdges(p,d)),this.updateConfig()},a.prototype.step=function(e){var t=this.graph.nodes;if(this._layoutWorker){var s=new i(t.length*2+1);for(var o=0;o<t.length;o++){var u=t[o];s[o*2+1]=u.layout.position[0],s[o*2+2]=u.layout.position[1]}this._layoutWorker.postMessage(s.buffer,[s.buffer]),this._layoutWorker.postMessage({cmd:"update",steps:e,temperature:this.temperature,coolDown:this.coolDown});for(var o=0;o<e;o++)this.temperature*=this.coolDown}else{r(this._$onupdate);for(var o=0;o<t.length;o++){var u=t[o];n.copy(this._layout.nodes[o].position,u.layout.position)}for(var o=0;o<e;o++)this._layout.temperature=this.temperature,this._layout.update(),this.temperature*=this.coolDown}},a.prototype._$onupdate=function(e){if(this._layoutWorker){var t=new Float32Array(e.data),r=t[0];if(r===this._token){for(var i=0;i<this.graph.nodes.length;i++){var s=this.graph.nodes[i];s.layout.position[0]=t[i*2+1],s.layout.position[1]=t[i*2+2]}this.onupdate&&this.onupdate()}}else if(this._layout&&this._layout.tokenMatch(this._token)){for(var i=0;i<this.graph.nodes.length;i++){var s=this.graph.nodes[i];n.copy(s.layout.position,this._layout.nodes[i].position)}this.onupdate&&this.onupdate()}},a.prototype.dispose=function(){this._layoutWorker&&this._layoutWorker.terminate(),this._layoutWorker=null,this._layout=null,this._token=0},a}),define("echarts/data/Graph",["require","zrender/tool/util"],function(e){var t=e("zrender/tool/util"),n=function(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}};n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(e,t){if(this._nodesMap[e])return this._nodesMap[e];var r=new n.Node(e,t);return this.nodes.push(r),this._nodesMap[e]=r,r},n.prototype.getNodeById=function(e){return this._nodesMap[e]},n.prototype.addEdge=function(e,t,r){typeof e=="string"&&(e=this._nodesMap[e]),typeof t=="string"&&(t=this._nodesMap[t]);if(!e||!t)return;var i=e.id+"-"+t.id;if(this._edgesMap[i])return this._edgesMap[i];var s=new n.Edge(e,t,r);return this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),this._edgesMap[i]=s,s},n.prototype.removeEdge=function(e){var n=e.node1,r=e.node2,i=n.id+"-"+r.id;this._directed&&(n.outEdges.splice(t.indexOf(n.outEdges,e),1),r.inEdges.splice(t.indexOf(r.inEdges,e),1)),n.edges.splice(t.indexOf(n.edges,e),1),n!==r&&r.edges.splice(t.indexOf(r.edges,e),1),delete this._edgesMap[i],this.edges.splice(t.indexOf(this.edges,e),1)},n.prototype.getEdge=function(e,t){return typeof e!="string"&&(e=e.id),typeof t!="string"&&(t=t.id),this._directed?this._edgesMap[e+"-"+t]||this._edgesMap[t+"-"+e]:this._edgesMap[e+"-"+t]},n.prototype.removeNode=function(e){if(typeof e=="string"){e=this._nodesMap[e];if(!e)return}delete this._nodesMap[e.id],this.nodes.splice(t.indexOf(this.nodes,e),1);for(var n=0;n<this.edges.length;){var r=this.edges[n];r.node1===e||r.node2===e?this.removeEdge(r):n++}},n.prototype.eachNode=function(e,t){for(var n=0;n<this.nodes.length;n++)e.call(t,this.nodes[n],n)},n.prototype.eachEdge=function(e,t){for(var n=0;n<this.edges.length;n++)e.call(t,this.edges[n],n)},n.prototype.clear=function(){this.nodes.length=0,this.edges.length=0,this._nodesMap={},this._edgesMap={}},n.prototype.breadthFirstTraverse=function(e,t,n,r){typeof t=="string"&&(t=this._nodesMap[t]);if(!t)return;var i="edges";n==="out"?i="outEdges":n==="in"&&(i="inEdges");for(var s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(e.call(r,t,null))return;var o=[t];while(o.length){var u=o.shift(),a=u[i];for(var s=0;s<a.length;s++){var f=a[s],l=f.node1===u?f.node2:f.node1;if(!l.__visited){if(e.call(l,l,u))return;o.push(l),l.__visited=!0}}}},n.prototype.clone=function(){var e=new n(this._directed);for(var t=0;t<this.nodes.length;t++)e.addNode(this.nodes[t].id,this.nodes[t].data);for(var t=0;t<this.edges.length;t++){var r=this.edges[t];e.addEdge(r.node1.id,r.node2.id,r.data)}return e};var r=function(e,t){this.id=e,this.data=t||null,this.inEdges=[],this.outEdges=[],this.edges=[]};r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length};var i=function(e,t,n){this.node1=e,this.node2=t,this.data=n||null};return n.Node=r,n.Edge=i,n.fromMatrix=function(e,t,r){if(!t||!t.length||t[0].length!==t.length||e.length!==t.length)return;var i=t.length,s=new n(r);for(var o=0;o<i;o++){var u=s.addNode(e[o].id,e[o]);u.data.value=0,r&&(u.data.outValue=u.data.inValue=0)}for(var o=0;o<i;o++)for(var a=0;a<i;a++){var f=t[o][a];r&&(s.nodes[o].data.outValue+=f,s.nodes[a].data.inValue+=f),s.nodes[o].data.value+=f,s.nodes[a].data.value+=f}for(var o=0;o<i;o++)for(var a=o;a<i;a++){var f=t[o][a];if(f===0)continue;var l=s.nodes[o],c=s.nodes[a],h=s.addEdge(l,c,{});r&&(h.data.sourceWeight=f,h.data.targetWeight=t[a][o]),h.data.weight=f;if(o!==a){if(r){var p=s.addEdge(c,l,{});p.data.sourceWeight=t[a][o],p.data.targetWeight=f}h.data.weight+=t[a][o]}}return s},n}),define("echarts/data/Tree",["require"],function(e){function t(e){this.id=e,this.depth=0,this.height=0,this.children=[],this.data={},this.layout={}}function n(e){this.root=new t(e)}return t.prototype.traverse=function(e,t){e.call(t,this);for(var n=0;n<this.children.length;n++)this.children[n].traverse(e,t)},t.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(e+1),r.height>t&&(t=r.height)}this.height=t+1},t.prototype.getNodeById=function(e){if(this.id===e)return this;for(var t=0;t<this.children.length;t++){var n=this.children[t].getNodeById(e);if(n)return n}},n.prototype.traverse=function(e,t){this.root.traverse(e,t)},n.prototype.getSubTree=function(e){var t=this.getNodeById(e);if(t){var r=new n(t.id);return r.root=t,r}},n.prototype.getNodeById=function(e){return this.root.getNodeById(e)},n.fromGraph=function(e){function r(t){var n=e.getNodeById(t.id);for(var i=0;i<n.outEdges.length;i++){var o=n.outEdges[i],u=s[o.node2.id];t.children.push(u),r(u)}}var i={},s={};for(var o=0;o<e.nodes.length;o++){var u=e.nodes[o],a;u.inDegree()==0?(i[u.id]=new n(u.id),a=i[u.id].root):a=new t(u.id),a.data=u.data,s[u.id]=a}var f=[];for(var l in i)r(i[l].root),i[l].root.updateDepthAndHeight(0),f.push(i[l]);return f},n}),define("echarts/layout/Tree",["require","zrender/tool/vector"],function(e){function n(e){e=e||{},this.nodePadding=e.nodePadding||30,this.layerPadding=e.layerPadding||100,this._layerOffsets=[],this._layers=[]}var t=e("zrender/tool/vector");return n.prototype.run=function(e){this._layerOffsets.length=0;for(var t=0;t<e.root.height+1;t++)this._layerOffsets[t]=0,this._layers[t]=[];this._updateNodeXPosition(e.root);var n=e.root;this._updateNodeYPosition(n,0,n.layout.height)},n.prototype._updateNodeXPosition=function(e){var n=Infinity,r=-Infinity;e.layout.position=e.layout.position||t.create();for(var i=0;i<e.children.length;i++){var s=e.children[i];this._updateNodeXPosition(s);var o=s.layout.position[0];o<n&&(n=o),o>r&&(r=o)}e.children.length>0?e.layout.position[0]=(n+r)/2:e.layout.position[0]=0;var u=this._layerOffsets[e.level]||0;if(u>e.layout.position[0]){var a=u-e.layout.position[0];this._shiftSubtree(e,a);for(var i=e.level+1;i<e.height+e.level;i++)this._layerOffsets[i]+=a}this._layerOffsets[e.level]=e.layout.position[0]+e.layout.width+this.nodePadding,this._layers[e.level].push(e)},n.prototype._shiftSubtree=function(e,t){e.layout.position[0]+=t;for(var n=0;n<e.children.length;n++)this._shiftSubtree(e.children[n],t)},n.prototype._updateNodeYPosition=function(e,t,n){e.layout.position[1]=t;var r=0;for(var i=0;i<e.children.length;i++)r=Math.max(e.children[i].layout.height,r);var s=this.layerPadding;typeof s=="function"&&(s=s(e.level));for(var i=0;i<e.children.length;i++)this._updateNodeYPosition(e.children[i],t+s+n,r)},n}),define("bkgraph/component/Component",["require"],function(e){var t=function(){this.el=document.createElement("div")};return t.prototype.type="COMPONENT",t.prototype.initialize=function(e){},t.prototype.resize=function(e,t){},t}),define("bkgraph/entity/Entity",["require","zrender/mixin/Eventful","zrender/tool/util"],function(e){var t=e("zrender/mixin/Eventful"),n=e("zrender/tool/util"),r=function(){t.call(this),this._animations={}};return r.prototype.initialize=function(){},r.prototype.addAnimation=function(e,t){this._animations[e]==null&&(this._animations[e]=[]),n.indexOf(this._animations[e],t)<0&&this._animations[e].push(t);var r=this;return t.done(function(){var i=r._animations[e];i.splice(n.indexOf(t),1)}),t},r.prototype.stopAnimation=function(e){var t=this._animations[e];if(t){for(var n=0;n<t.length;n++)t[n].stop();this._animations[e]=null}},r.prototype.haveAnimation=function(e){return this._animations[e]!=null},r.prototype.stopAnimationAll=function(){for(var e in this._animations)this.stopAnimation(e);this._animations={}},n.merge(r.prototype,t.prototype,!0),r}),define("zrender/shape/Circle",["require","./Base","../tool/util"],function(e){var t=e("./Base"),n=function(e){t.call(this,e)};return n.prototype={type:"circle",buildPath:function(e,t){e.arc(t.x,t.y,t.r,0,Math.PI*2,!0);return},getRect:function(e){if(e.__rect)return e.__rect;var t;return e.brushType=="stroke"||e.brushType=="fill"?t=e.lineWidth||1:t=0,e.__rect={x:Math.round(e.x-e.r-t/2),y:Math.round(e.y-e.r-t/2),width:e.r*2+t,height:e.r*2+t},e.__rect}},e("../tool/util").inherits(n,t),n}),define("bkgraph/shape/Crescent",["require","zrender/shape/Base","zrender/tool/util"],function(e){var t=e("zrender/shape/Base"),n=e("zrender/tool/util"),r=function(e){t.call(this,e)};return r.prototype.type="cresent",r.prototype.buildPath=function(e,t){var n=t.r,r=t.x,i=t.y,s=Math.PI/2,o=Math.acos((n-t.height)/n),u=s-o,a=s+o,f=r+Math.cos(u)*n,l=i+Math.sin(u)*n;e.moveTo(f,l),e.arc(r,i,n,u,a),e.closePath()},r.prototype.getRect=function(e){var t=e.r,n=e.x,r=e.y,i=Math.PI/2,s=Math.acos((t-e.height)/t),o=i-s,u=i+s,a=n+Math.cos(o)*t,f=r+Math.sin(o)*t,l=n+Math.cos(u)*t,c=r+Math.sin(u)*t;return{x:a,y:f,width:l-a,height:t-f}},n.inherits(r,t),r}),define("bkgraph/entity/Node",["require","./Entity","zrender/Group","zrender/shape/Circle","zrender/shape/Image","../shape/Crescent","zrender/tool/util","zrender/tool/color","zrender/tool/vector"],function(e){var t=e("./Entity"),n=e("zrender/Group"),r=e("zrender/shape/Circle"),i=e("zrender/shape/Image"),s=e("../shape/Crescent"),o=e("zrender/tool/util"),u=e("zrender/tool/color"),a=e("zrender/tool/vector"),f=50,l=new Image;l.src="img/default-avatar.png";var c=function(e){t.call(this),this.el=new n,e=e||{},this.radius=e.radius||20,this.label=e.label||"",this.image=e.image||"",this.style={color:"#0e90fe",lineWidth:3,labelColor:"white"},this.highlightStyle={color:"#f9dd05",lineWidth:5,labelColor:"black"},e.style&&o.merge(this.style,e.style),e.highlightStyle&&o.merge(this.highlightStyle,e.highlightStyle),this._animatingCircles=[]};c.prototype.initialize=function(e){var t=this,n=this.radius,o=!1,a=new r({style:{strokeColor:this.style.color,brushType:"stroke",r:f,x:0,y:0,lineWidth:this.style.lineWidth},highlightStyle:{opacity:0},z:10,zlevel:1,clickable:!0,onmouseover:function(){t.dispatch("mouseover")},onmouseout:function(){t.dispatch("mouseout")},onclick:function(){t.dispatch("click")}}),c=new Image;c.onload=function(){h.style.image=c,h.modSelf(),e.refreshNextFrame()},c.src=this.image;var h=new i({style:{image:l,x:-f,y:-f,width:f*2,height:f*2},z:10,hoverable:!1,zlevel:1});if(this.label)var p=new s({style:{height:25,x:0,y:0,r:f,color:u.alpha(this.style.color,.8),brushType:"fill",text:this.label,textPosition:"inside",textAlign:"center",brushType:"both",textColor:this.style.labelColor,textFont:"14px 微软雅黑"},z:10,hoverable:!1,zlevel:1});this.el.addChild(h),p&&this.el.addChild(p),this.el.addChild(a),this._imageShape=h,this._labelShape=p,this._outlineShape=a,this.el.scale[0]=this.el.scale[1]=this.radius/f},c.prototype.setRadius=function(e){this.radius=e,this.el.scale[0]=this.el.scale[1]=e/f,this.el.modSelf()},c.prototype.highlight=function(e){this._outlineShape.style.strokeColor=this.highlightStyle.color,this._outlineShape.style.lineWidth=this.highlightStyle.lineWidth,this._labelShape.style.color=u.alpha(this.highlightStyle.color,.8),this._labelShape.style.textColor=this.highlightStyle.labelColor,this._outlineShape.zlevel=3,this._labelShape.zlevel=3,this._imageShape.zlevel=3,this.el.modSelf()},c.prototype.lowlight=function(e){this._outlineShape.style.strokeColor=this.style.color,this._outlineShape.style.lineWidth=this.style.lineWidth,this._labelShape.style.color=u.alpha(this.style.color,.8),this._labelShape.style.textColor=this.style.labelColor,this._outlineShape.zlevel=1,this._labelShape.zlevel=1,this._imageShape.zlevel=1,this.el.modSelf()},c.prototype.animateRadius=function(e,t,n,r){this.stopAnimation("radius");var i=this;this.addAnimation("radius",e.animation.animate(this).when(n||1e3,{radius:t}).during(function(){i.setRadius(i.radius),e.refreshNextFrame()}).done(function(){r&&r()})).start("ElasticOut")},c.prototype.startActiveAnimation=function(e){if(this._animatingCircles.length)return;var t=Math.random()*Math.PI*2;for(var n=0;n<3;n++){var i=n/3*Math.PI*2+t,s=Math.cos(i)*8,o=Math.sin(i)*8,u=Math.cos(i+Math.PI)*8,a=Math.sin(i+Math.PI)*8,l=new r({style:{x:0,y:0,r:f+5,color:this.highlightStyle.color,opacity:.5},hoverable:!1,zlevel:2});this.addAnimation("glowcircle",e.animation.animate(l.style,{loop:!0}).when(1e3,{x:u,y:a}).when(3e3,{x:s,y:o}).when(4e3,{x:0,y:0}).during(function(){l.modSelf(),e.refreshNextFrame()}).delay(-500*n).start()),this.el.addChild(l),this._animatingCircles.push(l)}},c.prototype.stopActiveAnimation=function(e){if(this._animatingCircles.length){for(var t=0;t<this._animatingCircles.length;t++){var n=this._animatingCircles[t];this.el.removeChild(n)}this._animatingCircles.length=0,this.stopAnimation("glowcircle"),e.refreshNextFrame()}};var h=[0,0],p=[0,0];return c.prototype.isInsideRect=function(e){var t=this.radius+this.style.lineWidth;return h[0]=this.el.position[0]-t,h[1]=this.el.position[1]-t,p[0]=this.el.position[0]+t,p[1]=this.el.position[1]+t,!(h[0]>e.x+e.width||h[1]>e.y+e.height||p[0]<e.x||p[1]<e.y)},o.inherits(c,t),c}),define("zrender/shape/util/dashedLineTo",[],function(){var e=[5,5];return function(t,n,r,i,s,o){if(t.setLineDash){e[0]=e[1]=o,t.setLineDash(e),t.moveTo(n,r),t.lineTo(i,s);return}o=typeof o!="number"?5:o;var u=i-n,a=s-r,f=Math.floor(Math.sqrt(u*u+a*a)/o);u/=f,a/=f;var l=!0;for(var c=0;c<f;++c)l?t.moveTo(n,r):t.lineTo(n,r),l=!l,n+=u,r+=a;t.lineTo(i,s)}}),define("zrender/shape/Line",["require","./Base","./util/dashedLineTo","../tool/util"],function(e){var t=e("./Base"),n=e("./util/dashedLineTo"),r=function(e){this.brushTypeOnly="stroke",this.textPosition="end",t.call(this,e)};return r.prototype={type:"line",buildPath:function(e,t){if(!t.lineType||t.lineType=="solid")e.moveTo(t.xStart,t.yStart),e.lineTo(t.xEnd,t.yEnd);else if(t.lineType=="dashed"||t.lineType=="dotted"){var r=(t.lineWidth||1)*(t.lineType=="dashed"?5:1);n(e,t.xStart,t.yStart,t.xEnd,t.yEnd,r)}},getRect:function(e){if(e.__rect)return e.__rect;var t=e.lineWidth||1;return e.__rect={x:Math.min(e.xStart,e.xEnd)-t,y:Math.min(e.yStart,e.yEnd)-t,width:Math.abs(e.xStart-e.xEnd)+t,height:Math.abs(e.yStart-e.yEnd)+t},e.__rect}},e("../tool/util").inherits(r,t),r}),define("bkgraph/shape/LabelLine",["require","zrender/shape/Base","zrender/shape/Line","zrender/tool/util"],function(e){var t=e("zrender/shape/Base"),n=e("zrender/shape/Line"),r=e("zrender/tool/util"),i=function(e){t.call(this,e)};return i.prototype.type="labelline",i.prototype.brush=function(e,t){var n=this.style;t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),e.beginPath(),e.moveTo(n.xStart,n.yStart),e.lineTo(n.xEnd,n.yEnd),e.stroke(),e.globalAlpha=1;var r=n.cx,i=n.cy,s=n.r||10;r==null&&(r=(n.xStart+n.xEnd)/2,i=(n.yStart+n.yEnd)/2),e.beginPath(),e.arc(r,i,s,0,Math.PI*2),e.fill();var o=n.text,u=n.textPadding;u==null&&(u=5),e.font=n.textFont;var a=Math.atan2(n.yEnd-n.yStart,n.xEnd-n.xStart);a=Math.abs(a);var f=r,l=i,c=e.measureText(o).width,h=e.measureText("国").width;a<.2||a>2.94?(l-=s+u,f-=c/2,e.textBaseline="bottom",this.__rect={x:Math.min(f,r-s*2),y:l-h,width:Math.max(c,s*4),height:h+u+s*4}):(f+=s+u,e.textBaseline="middle",this.__rect={x:r-s*2,y:i-Math.max(s*2,h/2),width:c+s*4+u,height:Math.max(h,s*4)}),e.fillText(o,f,l),e.restore()},i.prototype.getRect=function(e){return this.__rect},i.prototype.isCover=function(e,t){var n=this.getTansform(e,t);e=n[0],t=n[1];var r=this.getRect(this.style);return r?e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height:!1},r.inherits(i,t),i}),define("bkgraph/util/util",["require"],function(e){var t=document.createElement("canvas").getContext,n={indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},bind:function(e,t){return e.bind?e.bind(t):function(){e.apply(t,arguments)}},addEventListener:function(e,t,n,r){window.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n,r){window.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n)},getStyle:function(e,t){var n;return window.getComputedStyle?n=window.getComputedStyle(e,null):document.documentElement.currentStyle&&(n=e.currentStyle),t?n[t]:n},addClass:function(e,t){e.classList?e.classList.add(t):e.className.indexOf(t)<0&&(e.className+=" "+t)},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className.replace(t,"")},hasClass:function(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>=0},debounce:function(e,t){var n;return function(){var r=this,i=arguments,s=function(){n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t)}},truncate:function(e,t,n){return e.length>t?(n=n==null?"…":n,e.substring(0,t-n.length)+n):e},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},getHeight:function(e){var t=e.getBoundingClientRect();return t.height},getWidth:function(e){var t=e.getBoundingClientRect();return t.width},supportCanvas:function(){return t}};return n}),define("bkgraph/util/intersect",["require","zrender/tool/vector","zrender/tool/curve"],function(e){function o(e,t,n,r,i){var s=(i-t)/(r-t);return s>1||s<0?-Infinity:s*(n-e)+e}function u(e,t,n,r,i){var s=(i-e)/(n-e);return s>1||s<0?-Infinity:s*(r-t)+t}function f(e,t,r,i,s,o,u){var f=n.quadraticRootAt(t,i,o,u,a);return f===0?-Infinity:n.quadraticAt(e,r,s,a[0])}function l(e,t,r,i,s,o,u){var f=n.quadraticRootAt(e,r,s,u,a);return f===0?-Infinity:n.quadraticAt(t,i,o,a[0])}var t=e("zrender/tool/vector"),n=e("zrender/tool/curve"),r=t.create(),i=t.create(),s=t.create(),a=[],c=function(e,t,n){var r=e.xStart,i=e.yStart,s=e.xEnd,a=e.yEnd,f=o(r,i,s,a,t.y);if(f>=t.x&&f<=t.x+t.width)return n[0]=f,n[1]=t.y,"top";var l=u(r,i,s,a,t.x);if(l>=t.y&&l<=t.y+t.height)return n[0]=t.x,n[1]=l,"left";var f=o(r,i,s,a,t.y+t.height);if(f>=t.x&&f<=t.x+t.width)return n[0]=f,n[1]=t.y+t.height,"bottom";var l=u(r,i,s,a,t.x+t.width);if(l>=t.y&&l<=t.y+t.height)return n[0]=t.x+t.width,n[1]=l,"right"},h=function(e,t,n){var r=e.xStart,i=e.yStart,s=e.cpX1,o=e.cpY1,u=e.xEnd,a=e.yEnd,c=f(r,i,s,o,u,a,t.y);if(c>=t.x&&c<=t.x+t.width)return n[0]=c,n[1]=t.y,"top";var h=l(r,i,s,o,u,a,t.x);if(h>=t.y&&h<=t.y+t.height)return n[0]=t.x,n[1]=h,"left";var c=f(r,i,s,o,u,a,t.y+t.height);if(c>=t.x&&c<=t.x+t.width)return n[0]=c,n[1]=t.y+t.height,"bottom";var h=l(r,i,s,o,u,a,t.x+t.width);if(h>=t.y&&h<=t.y+t.height)return n[0]=t.x+t.width,n[1]=h,"right"};return{lineRect:c,curveRect:h}}),define("bkgraph/entity/Edge",["require","./Entity","zrender/Group","zrender/tool/util","../shape/LabelLine","../util/util","../util/intersect","zrender/tool/vector"],function(e){function h(e,t,n){return!(e>n.x+n.width||t>n.y+n.height||e<n.x||t<n.y)}var t=e("./Entity"),n=e("zrender/Group"),r=e("zrender/tool/util"),i=e("../shape/LabelLine"),s=e("../util/util"),o=e("../util/intersect"),u=e("zrender/tool/vector"),a=u.create(),f=u.create(),l=u.create(),c=function(e){t.call(this),e=e||{},this.sourceEntity=e.sourceEntity||null,this.targetEntity=e.targetEntity||null,this.label=e.label||"",this.style={color:"#0e90fe",labelColor:"#0e90fe"},this.highlightStyle={color:"#f9dd05",labelColor:"#f9dd05"},e.style&&r.merge(this.style,e.style),e.highlightStyle&&r.merge(this.highlightStyle,e.highlightStyle);var n=this;this.el=new i({style:{lineWidth:1,opacity:this.style.opacity,color:this.style.color,strokeColor:this.style.color,text:s.truncate(this.label,6),textFont:"12px 微软雅黑",textPadding:5},z:0,zlevel:0,clickable:!0,onclick:function(){n.dispatch("click")},onmouseover:function(){n.dispatch("mouseover")},onmouseout:function(){n.dispatch("mouseout")}})};return c.prototype.initialize=function(e){this.update(e)},c.prototype.update=function(){this.sourceEntity&&this.targetEntity&&(this._computeLinePoints(f,l),this._setLinePoints(f,l)),this.el.modSelf()},c.prototype.highlight=function(){this.el.style.color=this.highlightStyle.color,this.el.style.strokeColor=this.highlightStyle.color,this.el.zlevel=3,this.el.modSelf(),this._isHighlight=!0},c.prototype.lowlight=function(){this.el.style.color=this.style.color,this.el.style.strokeColor=this.style.color,this.el.zlevel=0,this.el.style.opacity=.7,this.el.modSelf(),this._isHighlight=!1},c.prototype.animateLength=function(e,t,n,r,i){this._computeLinePoints(f,l);var s=this;this.addAnimation("length",e.animation.animate(this.el.style)).when(0,{xStart:f[0],yStart:f[1],xEnd:f[0],yEnd:f[1]}).when(t||1e3,{xStart:f[0],yStart:f[1],xEnd:l[0],yEnd:l[1]}).during(function(){s.el.modSelf(),e.refreshNextFrame()}).done(i).start()},c.prototype.highlightLabel=function(){this._isHighlight||(this.el.style.color=this.highlightStyle.color),this.el.style.text=this.label,this.el.modSelf()},c.prototype.lowlightLabel=function(){this._isHighlight||(this.el.style.color=this.style.color),this.el.style.text=s.truncate(this.label,6),this.el.modSelf()},c.prototype.animateTextPadding=function(e,t,n,r){var i=this;this.stopAnimation("textPadding"),this.addAnimation("textPadding",e.animation.animate(this.el.style)).when(t,{textPadding:n}).during(function(){i.el.modSelf(),e.refreshNextFrame()}).done(r).start("ElasticOut")},c.prototype._computeLinePoints=function(e,t){var n=this.sourceEntity,r=this.targetEntity,i=n.el.position,s=r.el.position;u.copy(e,i),u.copy(t,s);var o=this.el},c.prototype._setLinePoints=function(e,t){var n=this.el;n.style.xStart=e[0],n.style.yStart=e[1],n.style.xEnd=t[0],n.style.yEnd=t[1],n.style.cx=(e[0]+t[0])/2,n.style.cy=(e[1]+t[1])/2,n.style.r=(this.sourceEntity.radius+this.targetEntity.radius)/20+3},c.prototype.intersectRect=function(e,t){return o.lineRect(this.el.style,e,t)},c.prototype.isInsideRect=function(e){var t=this.el.style;return h(t.xStart,t.yStart,e)||h(t.xEnd,t.yEnd,e)},r.inherits(c,t),c}),define("zrender/shape/BezierCurve",["require","./Base","../tool/util"],function(e){var t=e("./Base"),n=function(e){this.brushTypeOnly="stroke",this.textPosition="end",t.call(this,e)};return n.prototype={type:"bezier-curve",buildPath:function(e,t){e.moveTo(t.xStart,t.yStart),typeof t.cpX2!="undefined"&&typeof t.cpY2!="undefined"?e.bezierCurveTo(t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd):e.quadraticCurveTo(t.cpX1,t.cpY1,t.xEnd,t.yEnd)},getRect:function(e){if(e.__rect)return e.__rect;var t=Math.min(e.xStart,e.xEnd,e.cpX1),n=Math.min(e.yStart,e.yEnd,e.cpY1),r=Math.max(e.xStart,e.xEnd,e.cpX1),i=Math.max(e.yStart,e.yEnd,e.cpY1),s=e.cpX2,o=e.cpY2;typeof s!="undefined"&&typeof o!="undefined"&&(t=Math.min(t,s),n=Math.min(n,o),r=Math.max(r,s),i=Math.max(i,o));var u=e.lineWidth||1;return e.__rect={x:t-u,y:n-u,width:r-t+u,height:i-n+u},e.__rect}},e("../tool/util").inherits(n,t),n}),define("bkgraph/shape/LabelCurve",["require","zrender/shape/Base","zrender/shape/Line","zrender/tool/util","zrender/tool/curve","./LabelLine"],function(e){var t=e("zrender/shape/Base"),n=e("zrender/shape/Line"),r=e("zrender/tool/util"),i=e("zrender/tool/curve"),s=e("./LabelLine"),o=function(e){t.call(this,e)};return o.prototype.type="labelcurve",o.prototype.brush=function(e,t){var n=this.style;t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),e.beginPath(),e.moveTo(n.xStart,n.yStart),e.quadraticCurveTo(n.cpX1,n.cpY1,n.xEnd,n.yEnd),e.stroke(),e.globalAlpha=1;var r=n.cx,s=n.cy,o=n.r||10;r==null&&(r=i.quadraticAt(n.xStart,n.cpX1,n.xEnd,.5),s=i.quadraticAt(n.yStart,n.cpY1,n.yEnd,.5)),e.beginPath(),e.arc(r,s,o,0,Math.PI*2),e.fill();var u=n.text,a=n.textPadding;a==null&&(a=5),e.font=n.textFont;var f=r+o+a,l=s;e.textBaseline="middle",e.fillText(u,f,l);var c=e.measureText(u).width,h=e.measureText("国").width;this.__rect={x:r-o*2,y:s-Math.max(o*2,h/2),width:c+o*4+a,height:Math.max(h,o*4)},e.restore()},o.prototype.getRect=s.prototype.getRect,o.prototype.isCover=s.prototype.isCover,r.inherits(o,t),o}),define("bkgraph/entity/ExtraEdge",["require","./Entity","zrender/shape/BezierCurve","zrender/Group","zrender/tool/util","zrender/tool/curve","../shape/LabelCurve","./Edge","../util/util","../util/intersect","zrender/tool/vector"],function(e){function d(e,t,n){return e*(1-n)+t*n}function m(e,t,n){return!(e>n.x+n.width||t>n.y+n.height||e<n.x||t<n.y)}var t=e("./Entity"),n=e("zrender/shape/BezierCurve"),r=e("zrender/Group"),i=e("zrender/tool/util"),s=e("zrender/tool/curve"),o=e("../shape/LabelCurve"),u=e("./Edge"),a=e("../util/util"),f=e("../util/intersect"),l=e("zrender/tool/vector"),c=l.create(),h=l.create(),p=l.create(),v=function(e){t.call(this),e=e||{},this.sourceEntity=e.sourceEntity||null,this.targetEntity=e.targetEntity||null,this.label=e.label||"",this.style={color:"#0e90fe",opacity:.15,labelColor:"white"},this.highlightStyle={color:"#f9dd05",opacity:1,labelColor:"#f9dd05"},e.style&&i.merge(this.style,e.style),e.highlightStyle&&i.merge(this.highlightStyle,e.highlightStyle);var n=this;this.el=new o({style:{xStart:0,yStart:0,xEnd:0,yEnd:0,cpX1:0,cpY1:0,lineWidth:1,opacity:this.highlightStyle.opacity,color:this.highlightStyle.color,strokeColor:this.highlightStyle.color,text:a.truncate(this.label,10),textFont:"12px 微软雅黑",textPadding:5},z:0,zlevel:0,clickable:!0,onclick:function(){n.dispatch("click")},onmouseover:function(){n.dispatch("mouseover")},onmouseout:function(){n.dispatch("mouseout")}})};return v.prototype.hidden=!0,v.prototype.initialize=function(e){this.update()},v.prototype.update=function(){this.sourceEntity&&this.targetEntity&&this._setCurvePoints(this.sourceEntity.el.position,this.targetEntity.el.position,1,!0),this.el.modSelf()},v.prototype.highlight=function(){this.hidden=!1,this._isHighlight=!0},v.prototype.lowlight=function(){this.hidden=!0,this._isHighlight=!1},v.prototype.animateLength=function(e,t,n,r,i){var s=1;r===this.targetEntity?(l.copy(h,this.targetEntity.el.position),l.copy(p,this.sourceEntity.el.position),s=-1):(l.copy(h,this.sourceEntity.el.position),l.copy(p,this.targetEntity.el.position));var o=this,u={t:0},a=this.el;this._setCurvePoints(h,p,s);var f=a.style.xStart,c=a.style.cpX1,v=a.style.xEnd,m=a.style.yStart,g=a.style.cpY1,y=a.style.yEnd;this.addAnimation("length",e.animation.animate(u).when(t||1e3,{t:1}).during(function(t,n){var r=d(f,c,n),i=d(c,v,n),s=d(r,i,n),u=d(m,g,n),l=d(g,y,n),h=d(u,l,n);a.style.cpX1=r,a.style.cpY1=u,a.style.xEnd=s,a.style.yEnd=h,o.el.modSelf(),e.refreshNextFrame()}).done(function(){i&&i()}).start())},v.prototype.highlightLabel=u.prototype.highlightLabel,v.prototype.lowlightLabel=u.prototype.highlightLabel,v.prototype.animateTextPadding=u.prototype.animateTextPadding,v.prototype._setCurvePoints=function(e,t,n){var r=this.sourceEntity,i=this.targetEntity,o=this.el;o.style.xStart=e[0],o.style.yStart=e[1],o.style.xEnd=t[0],o.style.yEnd=t[1],o.style.cpX1=(e[0]+t[0])/2-n*(t[1]-e[1])/4,o.style.cpY1=(e[1]+t[1])/2-n*(e[0]-t[0])/4,o.style.cx=s.quadraticAt(o.style.xStart,o.style.cpX1,o.style.xEnd,.5),o.style.cy=s.quadraticAt(o.style.yStart,o.style.cpY1,o.style.yEnd,.5),n=n||1},v.prototype.intersectRect=function(e,t){return f.curveRect(this.el.style,e,t)},v.prototype.isInsideRect=function(e){var t=this.el.style;return m(t.xStart,t.yStart,e)||m(t.cpX1,t.cpY1,e)||m(t.xEnd,t.yEnd,e)},i.inherits(v,t),v}),define("bkgraph/entity/OutTip",["require","./Entity","zrender/tool/util","zrender/shape/Rectangle"],function(e){var t=e("./Entity"),n=e("zrender/tool/util"),r=e("zrender/shape/Rectangle"),i=function(e){t.call(this),this.label=e.label||"",this.color=e.color||"#f9dd05",this.el=new r({style:{x:-25,y:0,width:50,height:25,radius:5,textPosition:"inside",textColor:"black",textFont:"12px 微软雅黑",opacity:.7},highlightStyle:{opacity:0},hoverable:!1,zlevel:3,z:100})};return i.prototype.initialize=function(e){this.el.style.color=this.color,this.el.style.text=this.label},n.inherits(i,t),i}),define("bkgraph/shape/CurveBundle",["require","zrender/shape/Base","zrender/tool/util"],function(e){var t=e("zrender/shape/Base"),n=e("zrender/tool/util"),r=function(e){t.call(this,e)};return r.prototype={type:"curvebundle",brushTypeOnly:"stroke",buildPath:function(e,t){for(var n=0;n<t.segments.length;n++){var r=t.segments[n];e.moveTo(r[0],r[1]),e.quadraticCurveTo(r[2],r[3],r[4],r[5])}}},n.inherits(r,t),r}),define("bkgraph/entity/ExtraEdgeBundle",["require","./Entity","zrender/tool/curve","zrender/tool/util","../shape/CurveBundle","zrender/tool/vector"],function(e){var t=e("./Entity"),n=e("zrender/tool/curve"),r=e("zrender/tool/util"),i=e("../shape/CurveBundle"),s=e("zrender/tool/vector"),o=function(e){e=e||{},t.call(this),this.el=new i({style:{segments:[],lineWidth:1},hoverable:!1}),this.style={color:"#0e90fe",opacity:.15},e.style&&r.merge(this.style,e.style),this.edges=[]};return o.prototype.initialize=function(e){this.el.style.strokeColor=this.style.color,this.el.style.opacity=this.style.opacity,this.update(e)},o.prototype.update=function(e){var t=0;for(var n=0;n<this.edges.length;n++){var r=this.edges[n],i=r.source.entity,s=r.target.entity,o=this.el.style.segments,u=o[n];u||(u=o[n]=[]),i&&s&&(this._calCurvePoints(i.el.position,s.el.position,u),t++)}this.el.style.segments.length=t,this.el.modSelf()},o.prototype.addEdge=function(e){var t=e.node1.entity,n=e.node2.entity,r=[];t&&n&&(this._calCurvePoints(t.el.position,n.el.position,r),this.edges.push(e),this.el.style.segments.push(r),this.el.modSelf())},o.prototype.removeEdge=function(e){var t=this.edges.indexOf(e);t>0&&(this.edges.splice(t,1),this.el.style.segments.splice(t,1))},o.prototype._calCurvePoints=function(e,t,n){n[0]=e[0],n[1]=e[1],n[2]=(e[0]+t[0])/2-(t[1]-e[1])/4,n[3]=(e[1]+t[1])/2-(e[0]-t[0])/4,n[4]=t[0],n[5]=t[1]},r.inherits(o,t),o}),define("bkgraph/component/Cycle",["require"],function(e){var t=function(){this.nodes=[]};return t.findFromGraph=function(e){for(var n=0;n<e.nodes.length;n++)e.nodes[n].__visited=!1;var r=e.nodes[0];r.__stack=[r];var i=[],s=function(e,n){for(var r=0;r<e.edges.length;r++){var o=e.edges[r],u=o.node1===e?o.node2:o.node1;if(u===n)continue;if(u.__visited){var a=new t;for(var f=0;f<Math.min(u.__stack.length,e.__stack.length);f++){var l=u.__stack[r],c=e.__stack[r];if(l!==c)break}f--;for(var h=f;h<u.__stack.length;h++)a.nodes.push(u.__stack[h]);for(var h=e.__stack.length-1;h>=f+1;h--)a.nodes.push(e.__stack[h]);a.nodes.length>2&&i.push(a)}else u.__stack=e.__stack.slice(),u.__stack.push(u),u.__visited=!0,s(u,e)}};s(r);for(var n=0;n<e.nodes.length;n++)e.nodes[n].__stack=null;return i},t}),define("bkgraph/component/GraphMain",["require","zrender","echarts/layout/Force","echarts/data/Graph","echarts/data/Tree","echarts/layout/Tree","zrender/tool/util","zrender/Group","./Component","zrender/tool/vector","../entity/Node","../entity/Edge","../entity/ExtraEdge","../entity/OutTip","../entity/ExtraEdgeBundle","zrender/shape/Circle","./Cycle","../util/util","../util/intersect"],function(e){function E(e){return e>b||e<-b}function x(e,t,n){var r=f.create(),i=Math.random()*Math.PI*2;return r[0]=Math.cos(i)*n+e,r[1]=Math.sin(i)*n+t,r}var t=e("zrender"),n=e("echarts/layout/Force"),r=e("echarts/data/Graph"),i=e("echarts/data/Tree"),s=e("echarts/layout/Tree"),o=e("zrender/tool/util"),u=e("zrender/Group"),a=e("./Component"),f=e("zrender/tool/vector"),l=e("../entity/Node"),c=e("../entity/Edge"),h=e("../entity/ExtraEdge"),p=e("../entity/OutTip"),d=e("../entity/ExtraEdgeBundle"),v=e("zrender/shape/Circle"),m=e("./Cycle"),g=e("../util/util"),y=e("../util/intersect"),b=.01,w=function(e){return e>-b&&e<b},S=function(){a.call(this),this.minRadius=30,this.maxRadius=40,this.minRelationWeight=30,this.maxRelationWeight=40,this._kgraph=null,this._zr=null,this._graph=null,this._graphLayout=null,this._layouting=!1,this._animating=!1,this._root=null,this._mainNode=null,this._lastClickNode=null,this._lastHoverNode=null,this._nodeEntityCount=0,this._baseEntityCount=0,this._firstShowEntityDetail=!0};return S.prototype.type="GRAPH",S.prototype.initialize=function(e){this._kgraph=e;var n=this.el;this.el.className="bkg-graph",n.style.width=e.getWidth()+"px",n.style.height=e.getHeight()+"px",this._zr=t.init(n);var r=this._zr.painter.refresh,i=this,s=this._zr;this._min=[Infinity,Infinity],this._max=[s.getWidth()/2,s.getHeight()/2];var o=0,u=0,a=0,l=0;s.painter.refresh=function(){i._culling();var e=s.painter.getLayers(),t=e[0];if(t){var n=t.position,c=t.scale;n[0]=Math.max(-i._max[0]*c[0]+s.getWidth()-500,n[0]),n[1]=Math.max(-i._max[1]*c[1]+s.getHeight()-300,n[1]),n[0]=Math.min(-i._min[0]*c[0]+300,n[0]),n[1]=Math.min(-i._min[1]*c[1]+300,n[1]);if(E(n[0]-o)||E(n[1]-u)||E(c[0]-a)||E(c[1]-l)){for(var h in e)h!=="hover"&&(f.copy(e[h].position,e[0].position),f.copy(e[h].scale,e[0].scale),e[h].dirty=!0);i._syncOutTipEntities()}o=n[0],u=n[1],a=c[0],l=c[1]}r.apply(this,arguments)};var c=s.painter.getLayers();for(var h in c)h==="hover"&&c[h].dom.parentNode.removeChild(c[h].dom)},S.prototype.resize=function(e,t){this.el.style.width=e+"px",this.el.style.height=t+"px",this._zr.resize()},S.prototype.setData=function(e){var t=new r(!0);this._graphLayout=t;var n=this._zr,i=this._kgraph.getWidth()/2,s=this._kgraph.getHeight()/2,o=n.getWidth(),u=n.getHeight(),a=-Infinity,f=Infinity;for(var l=0;l<e.entities.length;l++){var c=e.entities[l];f=Math.min(f,c.hotValue),a=Math.max(a,c.hotValue)}var h=a-f,p=!1;for(var l=0;l<e.entities.length;l++){var c=e.entities[l],d=t.addNode(c.ID,c),v=h>0?(c.hotValue-f)*(this.maxRadius-this.minRadius)/h+this.minRadius:(this.maxRadius+this.minRadius)/2;c.layerCounter===0&&(v=70,this._mainNode=d),d.layout={position:c.position,mass:1,size:v},c.position||(p=!0,c.layerCounter===0&&(d.layout.fixed=!0,d.layout.position=[o/2,u/2],d.position=Array.prototype.slice.call(d.layout.position)))}a=-Infinity,f=Infinity;for(var l=0;l<e.relations.length;l++){var m=e.relations[l];f=Math.min(f,m.relationWeight),a=Math.max(a,m.relationWeight)}h=a-f;for(var l=0;l<e.relations.length;l++){var m=e.relations[l];if(m.isExtra)continue;var y=h>0?(m.relationWeight-f)/h*(this.maxRelationWeight-this.minRelationWeight)+this.minRelationWeight:(this.maxRelationWeight+this.minRelationWeight)/2,b=t.addEdge(m.fromID,m.toID,m);b.layout={weight:y*8/Math.pow(b.node1.data.layerCounter+1,1)}}this._graph=this._graphLayout.clone(),this._graph.eachNode(function(e){e.layout=this._graphLayout.getNodeById(e.id).layout},this);for(var l=0;l<e.relations.length;l++){var m=e.relations[l];if(!m.isExtra)continue;var b=this._graph.addEdge(m.fromID,m.toID,m);b.isExtra=!0}var w=this._zr.painter.getLayer(0),E=this._zr.painter.getLayer(1,w),S=this._zr.painter.getLayer(2,E),x=this._zr.painter.getLayer(3,S);if(p)this.radialTreeLayout();else{var T=o/2-this._mainNode.layout.position[0],N=u/2-this._mainNode.layout.position[1];this._graph.eachNode(function(e){e.layout.position[0]+=T,e.layout.position[1]+=N})}this.render();var C=this._findCircles("男友,女友,前男友,前女友,妻子,老婆,丈夫,老公,绯闻,暧昧,情敌".split(","));for(var l=0;l<C.length;l++)this.highlightCircle(C[l]);g.supportCanvas()&&this._entryAnimation()},S.prototype.render=function(){var e=this._zr,t=this._graph;this._root&&e.delGroup(this._root),this._root=new u,e.addGroup(this._root),g.supportCanvas()&&(this._extraEdgeBundle=new d,this._extraEdgeBundle.initialize(e),this._root.addChild(this._extraEdgeBundle.el)),t.eachNode(function(e){if(e.data.layerCounter>2)return;this._baseEntityCount++,this._createNodeEntity(e)},this),t.eachEdge(function(e){if(e.node1.data.layerCounter>2||e.node2.data.layerCounter>2)return;this._createEdgeEntity(e)},this),e.render(),e.modLayer(0,{panable:!0,zoomable:!0,maxZoom:1.5,minZoom:.5})},S.prototype.naiveLayout=function(e){graph.breadthFirstTraverse(function(e,t){if(t&&!e.layout.position){var n=t.layout.position[0],r=t.layout.position[1],i=1e3/Math.pow(t.data.layerCounter+1,2);t.__count=t.__count||0;var s=Math.PI*2*t.__count/t.outDegree();t.__count++,t.__count===t.outDegree()&&(t.__count=0),e.layout.position=[Math.cos(s)*i+n,Math.sin(s)*i+r]}},e,"out")},S.prototype.radialTreeLayout=function(){var e=this._zr.getWidth()/2,t=this._zr.getHeight()/2,n=i.fromGraph(this._graphLayout)[0];n.traverse(function(e){var t=this._graphLayout.getNodeById(e.id);e.layout={width:t.layout.size*2,height:t.layout.size*2}},this);var r=new s,o=[100,400,200,200,200,200,200];r.layerPadding=function(e){return o[e]||200},r.run(n);var u=[Infinity,Infinity],a=[-Infinity,-Infinity];n.traverse(function(e){f.min(u,u,e.layout.position),f.max(a,a,e.layout.position)});var l=a[0]-u[0],c=a[1]-u[1];n.traverse(function(n){var r=this._graphLayout.getNodeById(n.id),i=n.layout.position[0],s=n.layout.position[1],o=s,u=i/l*Math.PI*2;r.layout.position=[o*Math.cos(u)+e,o*Math.sin(u)+t]},this)},S.prototype.startForceLayout=function(e){var t=this._graphLayout,r=new n;r.center=[this._kgraph.getWidth()/2,this._kgraph.getHeight()/2],r.scaling=12,r.coolDown=.99,r.maxSpeedIncrease=100,r.preventOverlap=!0,t.eachNode(function(e){e.layout.mass=e.degree()*3});var i=[];r.init(t,!1),this._layouting=!0;var s=this;r.onupdate=function(){for(var n=0;n<t.nodes.length;n++)t.nodes[n].layout.fixed&&f.copy(t.nodes[n].layout.position,t.nodes[n].position);for(var n=0;n<i.length;n++){var o=i[n],u=o.data,a=o.layout.position;f.add(a,u.node1.layout.position,u.node2.layout.position),f.scale(a,a,.5)}s._updateNodePositions(),r.temperature<.01?(s.stopForceLayout(),e&&e.call(s)):s._layouting&&r.step(10)},r.step(10)},S.prototype.stopForceLayout=function(){var e=this._graphLayout,t=[];e.eachNode(function(e){e.isEdgeNode&&t.push(e)});for(var n=0;n<t.length;n++)e.removeNode(t[n]);this._layouting=!1},S.prototype.unhoverAll=function(){var e=this._zr,t=this._graph;for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];r.entity&&r!==this._lastClickNode&&(this.unhoverNode(r),r._isHighlight&&r.entity.highlight(e))}},S.prototype.lowlightAll=function(){var e=this._zr,t=this._graph;for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];r.entity&&(this.unhoverNode(r),this.lowlightNode(r)),r._outTipEntity&&(this._root.removeChild(r._outTipEntity.el),r._outTipEntity=null)}for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.entity&&i.entity.lowlight()}e.refreshNextFrame()},S.prototype.unhoverNode=function(e){e._isHover&&(g.supportCanvas()?(e.entity.stopActiveAnimation(this._zr),e.entity.animateRadius(this._zr,e.layout.size,500)):e.entity.setRadius(e.layout.size),e.entity.lowlight(),e._isHover=!1)},S.prototype.hoverNode=function(e){if(e._isHover)return;e._isHover=!0,g.supportCanvas()?(e.entity.animateRadius(this._zr,e.layout.size*1.2,500),e.entity.startActiveAnimation(this._zr)):e.entity.setRadius(e.layout.size*1.2),e.entity.highlight()},S.prototype.lowlightNode=function(e){e.entity&&e._isHighlight&&(e.entity.lowlight(),e._isHighlight=!1)},S.prototype.highlightNode=function(e){e.entity&&!e._isHighlight&&(e.entity.highlight(),e._isHighlight=!0)},S.prototype.highlightNodeAndAdjeceny=function(e){typeof e=="string"&&(e=this._graph.getNodeById(e));var t=this._zr;this.lowlightAll(),this.hoverNode(e),e._isHighlight=!0;for(var n=0;n<e.edges.length;n++){var r=e.edges[n],i=r.node1===e?r.node2:r.node1;if(e.data.layerCounter===0&&r.isExtra)continue;var s=!1;i.entity||(this._createNodeEntity(i),s=!0),i.entity.highlight(),r.entity||this._createEdgeEntity(r),r.entity.highlight(),s&&g.supportCanvas()&&this._growNodeAnimation(i,e,Math.random()*500),i._isHighlight=!0,this._syncOutTipEntities()}this._syncHeaderBarExplorePercent(),t.refreshNextFrame()},S.prototype.highlightNodeToMain=function(e){typeof e=="string"&&(e=this._graphLayout.getNodeById(e));var t=this._graphLayout,n=this._graph,r=this._zr;e=t.getNodeById(e.id),this.lowlightAll();var i=e,s=[i];while(i){var o=n.getNodeById(i.id);o.entity||this._createNodeEntity(o),e===i?(this.hoverNode(o),o._isHighlight=!0):(o.entity.highlight(),o._isHighlight=!0);var u=i.inEdges[0];if(!u)break;i=u.node1,s.push(i)}for(var a=0;a<s.length-1;a++){var f=s[a],l=s[a+1],c=n.getEdge(l.id,f.id);c.entity||this._createEdgeEntity(c),c.entity.highlight()}this._syncHeaderBarExplorePercent(),r.refreshNextFrame()},S.prototype.highlightCircle=function(e){var t=e.nodes.length;for(var n=0;n<t;n++){var r=e.nodes[n],i=e.nodes[(n+1)%t],s=this._graph.getEdge(r,i)||this._graph.getEdge(i,r);r.entity||this._createNodeEntity(r),i.entity||this._createNodeEntity(i),s.entity||this._createEdgeEntity(s),this.highlightNode(r),this.highlightNode(i),s.entity.highlight()}this._zr.refreshNextFrame(),this._syncHeaderBarExplorePercent()},S.prototype.showEntityDetail=function(e){var t=this._graphLayout;typeof e=="string"&&(e=t.getNodeById(e));var n=this._kgraph.getComponentByType("SIDEBAR");n&&(n.setData(e.data),this._firstShowEntityDetail&&n.show(),this._firstShowEntityDetail=!1)},S.prototype.showRelationDetail=function(e){var t=this._kgraph.getComponentByType("SIDEBAR");if(t){var n={};for(var r in e.data)n[r]=e.data[r];n.fromEntity=this._graph.getNodeById(n.fromID).data,n.toEntity=this._graph.getNodeById(n.toID).data,t.setData(n,!0),t.show()}},S.prototype.moveToEntity=function(e){var t=this._graph;typeof e=="string"&&(e=t.getNodeById(e));var n=this._zr;if(!e)return;var r=e.entity,i=n.painter.getLayer(0),s=Array.prototype.slice.call(r.el.position);f.mul(s,s,i.scale),f.sub(s,[n.getWidth()/2,n.getHeight()/2],s),this.moveTo(s[0],s[1])},S.prototype.moveTo=function(e,t,n){var r=this._zr,i=r.painter.getLayers(),s=this;s._animating=!0,r.animation.animate(i[0]).when(800,{position:[e,t]}).during(function(){r.refreshNextFrame()}).done(function(){s._animating=!1,n&&n()}).start("CubicInOut")},S.prototype.moveLeft=function(e){if(!zr)return;var t=zr.painter.getLayer(0),n=Array.prototype.slice.call(t.position);n[0]+=zr.getWidth()*.6,hierarchy.moveTo(n[0],n[1],e)},S.prototype.moveRight=function(e){if(!zr)return;var t=zr.painter.getLayer(0),n=Array.prototype.slice.call(t.position);n[0]-=zr.getWidth()*.6,hierarchy.moveTo(n[0],n[1],e)},S.prototype.moveTop=function(e){if(!zr)return;var t=zr.painter.getLayer(0),n=Array.prototype.slice.call(t.position);n[1]+=zr.getHeight()*.3,hierarchy.moveTo(n[0],n[1],e)},S.prototype.moveDown=function(e){if(!zr)return;var t=zr.painter.getLayer(0),n=Array.prototype.slice.call(t.position);n[1]-=zr.getHeight()*.3,hierarchy.moveTo(n[0],n[1],e)},S.prototype.uncollapse=function(){var e=this._zr;this._graph.eachNode(function(e){e.entity||(this._createNodeEntity(e),e.canCollapse=!0)},this),this._graph.eachEdge(function(e){e.entity||(this._createEdgeEntity(e),e.canCollapse=!0)},this),this._syncHeaderBarExplorePercent(),e.refreshNextFrame()},S.prototype.collapse=function(){var e=this._zr;this._graph.eachNode(function(e){e.canCollapse&&(e.entity.stopAnimationAll(),this._root.removeChild(e.entity.el),e.canCollapse=!1,e.entity=null,this._nodeEntityCount--)},this),this._graph.eachEdge(function(e){e.canCollapse&&(e.entity.stopAnimationAll(),this._root.removeChild(e.entity.el),e.canCollapse=!1,e.entity=null,g.supportCanvas()&&this._extraEdgeBundle.removeEdge(e))},this),this._syncHeaderBarExplorePercent(),e.refreshNextFrame()},S.prototype.expandNode=function(e){var t=this._zr;for(var n=0;n<e.edges.length;n++){var r=e.edges[n],i=r.node1===e?r.node2:r.node1;if(r.isExtra||i.entity)continue;this._createNodeEntity(i),this._createEdgeEntity(r),g.supportCanvas()&&this._growNodeAnimation(i,e,Math.random()*500)}this._syncHeaderBarExplorePercent(),t.refreshNextFrame()},S.prototype.toJSON=function(){var e=this._graph,t={viewport:{x:0,y:0,width:this._zr.getWidth(),height:this._zr.getHeight()},entities:[],relations:[]};return e.eachNode(function(e){e.data.position=e.layout.position,t.entities.push(e.data)}),e.eachEdge(function(e){t.relations.push(e.data)}),t},S.prototype.getExplorePercent=function(){var e=this._graph.nodes;return(this._nodeEntityCount-this._baseEntityCount)/(e.length-this._baseEntityCount)},S.prototype._findCircles=function(e){function t(t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}var n=m.findFromGraph(this._graph),r=[];for(var i=0;i<n.length;i++){var s=n[i];if(s.nodes.length>3)continue;r.push(s)}return r},S.prototype._entryAnimation=function(e){var t=this._zr,n=this,r=new v({style:{x:t.getWidth()/2,y:t.getHeight()/2,r:70}});this._root.clipShape=r,this._root.modSelf(),t.refreshNextFrame(),t.animation.animate(r.style).when(3e3,{r:1500}).during(function(){n._root.modSelf(),t.refreshNextFrame()}).done(function(){n._root.clipShape=null,e&&e()}).delay(500).start()},S.prototype._syncOutTipEntities=function(){var e=this._zr,t=this._lastClickNode;if(!t)return;var n=this._kgraph.getComponentByType("HEADERBAR"),r=n.el.clientHeight,i=-parseInt(this.el.style.right),s=f.create(),o=this._zr.painter.getLayer(0),u={x:-o.position[0]/o.scale[0],y:(-o.position[1]+r)/o.scale[1],width:(e.getWidth()-i)/o.scale[0],height:(e.getHeight()-r)/o.scale[1]};for(var a=0;a<t.edges.length;a++){var l=t.edges[a],c=l.node1===t?l.node2:l.node1;if(t.data.layerCounter===0&&l.isExtra)continue;if(!l.entity||!c.entity)continue;if(!c.entity.isInsideRect(u)){var h=l.entity.intersectRect(u,s);if(h){c._outTipEntity||(c._outTipEntity=new p({label:c.data.name}),c._outTipEntity.initialize(e),this._root.addChild(c._outTipEntity.el));var d=c._outTipEntity.el.position;f.copy(d,s);switch(h){case"top":break;case"left":d[0]+=25;break;case"bottom":d[1]-=25;break;case"right":d[0]-=25}c._outTipEntity.el.modSelf()}}else c._outTipEntity&&(this._root.removeChild(c._outTipEntity.el),c._outTipEntity=null)}},S.prototype._growNodeAnimation=function(e,t,n){var r=this._zr,i=this._graph.getEdge(t.id,e.id),s=this,o=e.entity.radius;e.entity.setRadius(1),this._animating=!0,r.refreshNextFrame(),i.entity.animateLength(r,300,Math.random()*300,t.entity,function(){e.entity.animateRadius(r,o,500,function(){s._animating=!1})})},S.prototype._createNodeEntity=function(e){var t=new l({radius:e.layout.size,label:e.data.name,image:e.data.image});t.initialize(this._zr),f.min(this._min,this._min,e.layout.position),f.max(this._max,this._max,e.layout.position),f.copy(t.el.position,e.layout.position);var n=this;return t.bind("mouseover",function(){if(n._animating)return;n._lastHoverNode!==e&&(n.hoverNode(e),n.expandNode(e)),n._lastHoverNode=e}),t.bind("mouseout",function(){e!==n._lastClickNode&&(n.unhoverNode(e),e._isHighlight&&e.entity.highlight(n._zr)),n._lastHoverNode=null}),t.bind("click",function(){n.showEntityDetail(e),n._lastClickNode!==e&&(n._lastClickNode=e,n._syncOutTipEntities(),n.highlightNodeAndAdjeceny(e))}),e.entity=t,this._root.addChild(t.el),this._nodeEntityCount++,t},S.prototype._createEdgeEntity=function(e){var t,n=this._zr;if(e.node1.entity&&e.node2.entity)return e.isExtra?(t=new h({sourceEntity:e.node1.entity,targetEntity:e.node2.entity,label:e.data.relationName}),g.supportCanvas()&&this._extraEdgeBundle.addEdge(e)):t=new c({sourceEntity:e.node1.entity,targetEntity:e.node2.entity,label:e.data.relationName}),t.initialize(this._zr),t.bind("click",function(){this.showRelationDetail(e)},this),t.bind("mouseover",function(){g.supportCanvas()&&t.animateTextPadding(n,300,12),t.highlightLabel()}),t.bind("mouseout",function(){g.supportCanvas()&&t.animateTextPadding(n,300,5),t.lowlightLabel()}),e.entity=t,this._root.addChild(t.el),t},S.prototype._updateNodePositions=function(){var e=this._zr,t=this._graph;for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];r.entity&&(r.layout.fixed?f.copy(r.layout.position,r.entity.el.position):f.copy(r.entity.el.position,r.layout.position),e.modGroup(r.entity.el.id))}for(var n=0;n<t.edges.length;n++){var i=t.edges[n];i.entity&&i.entity.update(e)}e.refreshNextFrame()},S.prototype._syncHeaderBarExplorePercent=function(){var e=this._kgraph.getComponentByType("HEADERBAR");e&&e.setExplorePercent(this.getExplorePercent())},S.prototype._culling=function(){var e=this._graph,t=this._zr;if(!e)return;var n=-parseInt(this.el.style.right),r=t.painter.getLayer(1),i=t.getWidth(),s=t.getHeight(),o=[0,0],u=[0,0];r.updateTransform();var a=this._zr.painter.getLayer(0),f={x:-a.position[0]/a.scale[0],y:-a.position[1]/a.scale[1],width:(t.getWidth()-n)/a.scale[0],height:t.getHeight()/a.scale[1]};for(var l=0;l<e.nodes.length;l++){var c=e.nodes[l];c.entity&&(c.entity.el.ignore=!c.entity.isInsideRect(f))}for(var l=0;l<e.edges.length;l++){var h=e.edges[l];h.entity&&(h.entity.el.ignore=h.entity.hidden||!h.entity.isInsideRect(f))}},o.inherits(S,a),S}),define("bkgraph/component/PanControl",["require"],function(e){}),define("bkgraph/component/ZoomControl",["require"],function(e){}),function(e){function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(){this.raw=[],this.length=0}function i(){return"___"+r++}function s(e,t){var n=new Function;n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function u(e){return o[e]}function f(e){return'"'+e.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function l(e){return e.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(e){return"\\"+e})}function c(e){var t=arguments;return e.replace(/\{([0-9]+)\}/g,function(e,n){return t[n-0+1]})}function m(e){return e=e.replace(/^\s*\*/,""),c('gv({0},["{1}"])',f(e),e.replace(/\[['"]?([^'"]+)['"]?\]/g,function(e,t){return"."+t}).split(".").join('","'))}function g(e,t,n,r,i,s){var o=n.length,u=e.split(t),a=0,f=[];for(var l=0,c=u.length;l<c;l++){var h=u[l];if(l){var p=1;a++;for(;;){var d=h.indexOf(n);if(d<0){f.push(a>1&&p?t:"",h);break}a=r?a-1:0,f.push(a>0&&p?t:"",h.slice(0,d),a>0?n:""),h=h.slice(d+o),p=0;if(a===0)break}a===0&&(i(f.join("")),s(h),f=[])}else h&&s(h)}a>0&&f.length>0&&(s(t),s(f.join("")))}function y(e,t,n){var r=[],i=t.options,s="",o="",u="",a="",l;return n&&(s="ts(",o=")",u=p,a=d,l=i.defaultFilter),g(e,i.variableOpen,i.variableClose,1,function(e){n&&e.indexOf("|")<0&&l&&(e+="|"+l);var i=e.indexOf("|"),f=(i>0?e.slice(0,i):e).replace(/^\s+/,"").replace(/\s+$/,""),c=i>0?e.slice(i+1):"",h=f.indexOf("*")===0,p=[h?"":s,m(f),h?"":o];if(c){c=y(c,t);var d=c.split("|");for(var v=0,g=d.length;v<g;v++){var b=d[v];/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(b)&&(p.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3&&p.push(",",RegExp.$3),p.push(")"))}}r.push(u,p.join(""),a)},function(e){r.push(u,n?f(e):e,a)}),r.join("")}function b(e,t){this.value=e,this.engine=t}function w(e,t){this.value=e,this.engine=t,this.children=[],this.cloneProps=[]}function E(e,t){var n=e.stack,r=t?n.find(function(e){return e instanceof t}):n.bottom();if(r){var i;while((i=n.top())!==r){if(!i.autoClose)throw new Error(i.type+" must be closed manually: "+i.value);i.autoClose(e)}r.close(e)}return r}function x(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.master=RegExp.$3,this.name=RegExp.$1,w.call(this,e,t),this.blocks={}}function T(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,w.call(this,e,t),this.cloneProps=["name"]}function N(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,w.call(this,e,t),this.cloneProps=["name","state","blocks"],this.blocks={}}function C(e,t){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.expr=RegExp.$2,w.call(this,e,t),this.cloneProps=["name","expr"]}function k(e,t){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,w.call(this,e,t),this.cloneProps=["name","args"]}function L(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,w.call(this,e,t),this.cloneProps=["name","args"]}function A(e,t){var n=new RegExp(c("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",l(t.options.variableOpen),l(t.options.variableClose)),"i");if(!n.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,w.call(this,e,t),this.cloneProps=["list","item","index"]}function O(e,t){w.call(this,e,t)}function M(e,t){O.call(this,e,t)}function _(e,t){w.call(this,e,t)}function P(e,t){t.target=e;var n=t.engine,r=e.name;if(n.targets[r])switch(n.options.namingConflict){case"override":n.targets[r]=e,t.targets.push(r);case"ignore":break;default:throw new Error("Target exists: "+r)}else n.targets[r]=e,t.targets.push(r)}function B(e,t){H[e]=t,t.prototype.type=e}function j(e){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(e),this.targets={},this.filters=t({},a)}function F(e,t){function f(){var e;if(a.length>0&&(e=a.join(""))){var n=new b(e,t);n.beforeAdd(u),o.top().addChild(n),a=[],t.options.strip&&u.current instanceof w&&(n.value=e.replace(/^[\x20\t\r]*\n/,"")),u.current=n}}var r=t.options.commandOpen,i=t.options.commandClose,s=t.options.commandSyntax,o=new n,u={engine:t,targets:[],stack:o,target:null},a=[],l;return g(e,r,i,0,function(e){var n=s.exec(e);if(n&&(l=H[n[2].toLowerCase()])&&typeof l=="function"){f();var o=u.current;t.options.strip&&o instanceof b&&(o.value=o.value.replace(/\r?\n[\x20\t]*$/,"\n")),n[1]?o=E(u,l):(o=new l(n[3],t),typeof o.beforeOpen=="function"&&o.beforeOpen(u),o.open(u)),u.current=o}else/^\s*\/\//.test(e)||a.push(r,e,i);l=null},function(e){a.push(e)}),f(),E(u),u.targets}n.prototype={push:function(e){this.raw[this.length++]=e},pop:function(){if(this.length>0){var e=this.raw[--this.length];return this.raw.length=this.length,e}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(e){var t=this.length;while(t--){var n=this.raw[t];if(e(n))return n}}};var r=178245,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a={html:function(e){return e.replace(/[&<>"']/g,u)},url:encodeURIComponent,raw:function(e){return e}},h='var r="";',p="r+=",d=";",v="return r;";typeof navigator!="undefined"&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8&&(h="var r=[],ri=0;",p="r[ri++]=",v='return r.join("");'),b.prototype={getRendererBody:function(){var e=this.value,t=this.engine.options;return!e||t.strip&&/^\s*$/.test(e)?"":y(e,this.engine,1)},clone:function(){return this}},w.prototype={addChild:function(e){this.children.push(e)},open:function(e){var t=e.stack.top();t&&t.addChild(this),e.stack.push(this)},close:function(e){e.stack.top()===this&&e.stack.pop()},getRendererBody:function(){var e=[],t=this.children;for(var n=0;n<t.length;n++)e.push(t[n].getRendererBody());return e.join("")},clone:function(){var e=new this.constructor(this.value,this.engine);for(var t=0,n=this.children.length;t<n;t++)e.addChild(this.children[t].clone());for(var t=0,n=this.cloneProps.length;t<n;t++){var r=this.cloneProps[t];e[r]=this[r]}return e}};var S='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';s(x,w),s(T,w),s(N,w),s(C,w),s(k,w),s(L,w),s(A,w),s(O,w),s(M,O),s(_,O);var D={READING:1,READED:2,APPLIED:3,READY:4};N.prototype.applyMaster=x.prototype.applyMaster=function(e){function n(e){var r=e.children;if(r instanceof Array)for(var i=0,s=r.length;i<s;i++){var o=r[i];o instanceof T&&t[o.name]&&(o=r[i]=t[o.name]),n(o)}}if(this.state>=D.APPLIED)return 1;var t=this.blocks,r=this.engine.targets[e];if(r&&r.applyMaster(r.master))return this.children=r.clone().children,n(this),this.state=D.APPLIED,1},x.prototype.isReady=function(){function n(r){for(var i=0,s=r.children.length;i<s;i++){var o=r.children[i];if(o instanceof N){var u=e.targets[o.name];t=t&&u&&u.isReady(e)}else o instanceof w&&n(o)}}if(this.state>=D.READY)return 1;var e=this.engine,t=1;if(this.applyMaster(this.master))return n(this),t&&(this.state=D.READY),t},x.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var e=new Function("data","engine",[S,h,this.getRendererBody(),v].join("\n")),t=this.engine;return this.renderer=function(n){return e(n,t)},this.renderer}return null},x.prototype.open=function(e){E(e),w.prototype.open.call(this,e),this.state=D.READING,P(this,e)},C.prototype.open=L.prototype.open=function(e){e.stack.top().addChild(this)},T.prototype.open=function(e){w.prototype.open.call(this,e),(e.imp||e.target).blocks[this.name]=this},M.prototype.open=function(e){var t=new _;t.open(e);var n=E(e,O);n.addChild(this),e.stack.push(this)},_.prototype.open=function(e){var t=E(e,O);t.addChild(this),e.stack.push(this)},N.prototype.open=function(e){this.parent=e.stack.top(),this.target=e.target,w.prototype.open.call(this,e),this.state=D.READING,e.imp=this},L.prototype.close=C.prototype.close=function(){},N.prototype.close=function(e){w.prototype.close.call(this,e),this.state=D.READED,e.imp=null},x.prototype.close=function(e){w.prototype.close.call(this,e),this.state=this.master?D.READED:D.APPLIED,e.target=null},N.prototype.autoClose=function(e){var t=this.parent.children;t.push.apply(t,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(e)},L.prototype.beforeOpen=N.prototype.beforeOpen=C.prototype.beforeOpen=A.prototype.beforeOpen=k.prototype.beforeOpen=T.prototype.beforeOpen=O.prototype.beforeOpen=b.prototype.beforeAdd=function(e){if(e.stack.bottom())return;var t=new x(i(),e.engine);t.open(e)},N.prototype.getRendererBody=function(){return this.applyMaster(this.name),w.prototype.getRendererBody.call(this)},L.prototype.getRendererBody=function(){return c("{0}engine.render({2},{{3}}){1}",p,d,f(this.name),y(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/ig,function(e,t,n){return(t||"")+f(n)+":"}))},C.prototype.getRendererBody=function(){return this.expr?c("v[{0}]={1};",f(this.name),y(this.expr,this.engine)):""},O.prototype.getRendererBody=function(){return c("if({0}){{1}}",y(this.value,this.engine),w.prototype.getRendererBody.call(this))},_.prototype.getRendererBody=function(){return c("}else{{0}",w.prototype.getRendererBody.call(this))},A.prototype.getRendererBody=function(){return c('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',i(),y(this.list,this.engine),f(this.index||i()),f(this.item),i(),i(),w.prototype.getRendererBody.call(this))},k.prototype.getRendererBody=function(){var e=this.args;return c("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",h,v,p,d,w.prototype.getRendererBody.call(this),f(this.name),e?","+y(e,this.engine):"")};var H={};B("target",x),B("block",T),B("import",N),B("use",L),B("var",C),B("for",A),B("if",O),B("elif",M),B("else",_),B("filter",k),j.prototype.config=function(e){t(this.options,e)},j.prototype.compile=j.prototype.parse=function(e){if(e){var t=F(e,this);if(t.length)return this.targets[t[0]].getRenderer()}return new Function('return ""')},j.prototype.getRenderer=function(e){var t=this.targets[e];if(t)return t.getRenderer()},j.prototype.render=function(e,t){var n=this.getRenderer(e);return n?n(t):""},j.prototype.addFilter=function(e,t){typeof t=="function"&&(this.filters[e]=t)};var I=new j;I.Engine=j,typeof exports=="object"&&typeof module=="object"?exports=module.exports=I:typeof define=="function"&&define.amd?define("etpl",I):e.etpl=I}(this),function(e){function it(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType;if(typeof e!="string"||!e||l!==1&&l!==9&&l!==11)return r;if(!i&&v){if(l!==11&&(s=Y.exec(e)))if(f=s[1]){if(l===9){u=t.getElementById(f);if(!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){y=g=w,S=t,x=l!==1&&e;if(l===1&&t.nodeName.toLowerCase()!=="object"){d=o(e),(g=t.getAttribute("id"))?y=g.replace(et,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+vt(d[c]);S=Z.test(e)&&pt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(U,"$1"),t,r,i)}function st(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ot(e){return e[w]=!0,e}function ut(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function at(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ft(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ht(e){return ot(function(t){return t=+t,ot(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function pt(e){return e&&typeof e.getElementsByTagName!="undefined"&&e}function dt(){}function vt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function mt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[w]||(t[w]={});if((u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function yt(e,t,n){var r=0,i=t.length;for(;r<i;r++)it(e,t[r],n);return n}function bt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function wt(e,t,n,r,i,s){return r&&!r[w]&&(r=wt(r)),i&&!i[w]&&(i=wt(i,s)),ot(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||yt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?bt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=bt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=bt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function Et(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=mt(function(e){return e===t},u,!0),c=mt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[mt(gt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return wt(a>1&&gt(h),a>1&&vt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(U,"$1"),n,a<i&&Et(e.slice(a,i)),i<s&&Et(e=e.slice(i)),i<s&&vt(e))}h.push(n)}return gt(h)}function St(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=b==null?1:Math.random()||.1,x=w.length;l&&(f=o!==p&&o);for(;m!==x&&(c=w[m])!=null;m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}v+=m;if(n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=M.call(a));y=bt(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&it.uniqueSort(a)}return l&&(S=E,f=b),g};return n?ot(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=st(),N=st(),C=st(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){var n=0,r=e.length;for(;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+j+"*\\]",q=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|"+".*"+")\\)|)",R=new RegExp(j+"+","g"),U=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),z=new RegExp("^"+j+"*,"+j+"*"),W=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),X=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),V=new RegExp(q),$=new RegExp("^"+F+"$"),J={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,et=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),nt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(rt){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=it.support={},s=it.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=it.setDocument=function(e){var t,i=e?e.ownerDocument||e:E,o=i.defaultView;if(i===p||i.nodeType!==9||!i.documentElement)return p;p=i,d=i.documentElement,v=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){h()},!1):o.attachEvent&&o.attachEvent("onunload",function(){h()})),n.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ut(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=G.test(i.getElementsByClassName),n.getById=ut(function(e){return d.appendChild(e).id=w,!i.getElementsByName||!i.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!="undefined"&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e);if(n.qsa)return t.querySelectorAll(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=G.test(i.querySelectorAll))ut(function(e){e.innerHTML="<select msallowcapture=''><option id='d\f]' selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~=d]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked")}),ut(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=G.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=G.test(d.compareDocumentPosition),b=t||G.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===E&&b(E,e)?-1:t===i||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:l?H(l,e)-H(l,t):0;if(s===o)return ft(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ft(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},i},it.matches=function(e,t){return it(e,null,null,t)},it.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(X,"='$1']");if(n.matchesSelector&&v&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return it(t,p,null,[e]).length>0},it.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},it.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):undefined;return s!==undefined?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},it.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},it.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=it.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=it.selectors={cacheLength:50,createPseudo:ot,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(tt,nt),e[3]=(e[3]||e[4]||e[5]||"").replace(tt,nt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||it.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&it.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(tt,nt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=it.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i.replace(R," ")+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||it.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ot(function(e){var t=[],n=[],r=u(e.replace(U,"$1"));return r[w]?ot(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ot(function(e){return function(t){return it(e,t).length>0}}),contains:ot(function(e){return e=e.replace(tt,nt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ot(function(e){return $.test(e||"")||it.error("unsupported lang: "+e),e=e.replace(tt,nt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[n<0?n+t:n]}),even:ht(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ht(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=lt(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ct(t);dt.prototype=r.filters=r.pseudos,r.setFilters=new dt,o=it.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=z.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=W.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(U," ")}),u=u.slice(n.length);for(o in r.filter)(i=J[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?it.error(e):N(e,a).slice(0)},u=it.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=Et(t[n]),s[w]?r.push(s):i.push(s);s=C(e,St(i,r)),s.selector=e}return s},a=it.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(tt,nt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=J.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(tt,nt),Z.test(f[0].type)&&pt(t.parentNode)||t)){f.splice(a,1),e=s.length&&vt(f);if(!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,Z.test(e)&&pt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ut(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),ut(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||at("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&at("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ut(function(e){return e.getAttribute("disabled")==null})||at(B,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),typeof define=="function"&&define.amd?define("Sizzle",[],function(){return it}):typeof module!="undefined"&&module.exports?module.exports=it:e.Sizzle=it}(window),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!bkgraph/html/personlist.html",[],function(){return'<!-- target: personlist -->\n<ul>\n    <!-- for: ${entities} as ${entity}-->\n    <li class="bkg-person" data-bkg-entity-id="${entity.ID}">\n        <img data-src="${entity.imageSquare}" alt="">\n        <h5>${entity.name}</h5>\n    </li>\n    <!-- /for -->\n</ul>'}),define("text!bkgraph/html/searchbar.html",[],function(){return'<div class="bkg-search">\n    <h3>人物搜索</h3>\n    <div class="bkg-search-input">\n        <input type="text" placeholder="输入看看${mainEntity.name}与TA之间的关系哟">\n        <!-- <div class="bkg-search-btn"></div> -->\n    </div>\n</div>\n<div class="bkg-person-list">\n    <div class="bkg-prev-page disable"></div>\n    <div class="bkg-person-list-viewport">\n    <!-- import: personlist-->\n    </div>\n    <div class="bkg-next-page"></div>\n</div>\n<div class="bkg-toggle">显 示</div>'}),define("bkgraph/component/SearchBar",["require","./Component","zrender/tool/util","etpl","../util/util","Sizzle","text!../html/personlist.html","text!../html/searchbar.html"],function(e){var t=e("./Component"),n=e("zrender/tool/util"),r=e("etpl"),i=e("../util/util"),s=e("Sizzle"),o=r.compile(e("text!../html/personlist.html")),u=r.compile(e("text!../html/searchbar.html")),a=function(){t.call(this);var e=this;i.addEventListener(this.el,"click",function(t){e._dispatchClick(t)})};return a.prototype.type="SEARCHBAR",a.prototype.initialize=function(e,t){this._kgraph=e;var n=this.el;n.className="bkg-searchbar hidden",this.render(t)},a.prototype.setData=function(e){this.render(e)},a.prototype.render=function(e){this.el.innerHTML=u(e),this._$viewport=s(".bkg-person-list-viewport",this.el)[0],this._$prevPageBtn=s(".bkg-prev-page",this.el)[0],this._$nextPageBtn=s(".bkg-next-page",this.el)[0],this._$input=s(".bkg-search-input input",this.el)[0],this._$toggleBtn=s(".bkg-toggle",this.el)[0],this._viewportWidth=this._$viewport.clientWidth,this._itemWidth=s;var t=this;i.addEventListener(this._$input,"keydown",i.debounce(function(){t.filter(t._$input.value)},200)),this._updateSlider()},a.prototype.resize=function(e,t){},a.prototype.hide=function(){i.addClass(this.el,"hidden"),this._$toggleBtn.innerHTML="显 示"},a.prototype.show=function(){i.removeClass(this.el,"hidden"),this._$toggleBtn.innerHTML="隐 藏"},a.prototype.toggle=function(){i.hasClass(this.el,"hidden")?this.show():this.hide()},a.prototype.nextPage=function(){if(this._isLastPage)return;this._left+=this._viewportWidth,this._left+this._viewportWidth>this._width&&(this._left=this._width-this._viewportWidth,this._isLastPage=!0,i.addClass(this._$nextPageBtn,"disable")),this._$list.style.left=-this._left+"px",this._isFirstPage=!1,i.removeClass(this._$prevPageBtn,"disable"),this._loadImage()},a.prototype.prevPage=function(){if(this._isFirstPage)return;this._left-=this._viewportWidth,this._left<0&&(this._left=0,this._isFirstPage=!0,i.addClass(this._$prevPageBtn,"disable")),this._$list.style.left=-this._left+"px",this._isLastPage=!1,i.removeClass(this._$nextPageBtn,"disable"),this._loadImage()},a.prototype.filter=function(e){var t=this._kgraph.getRawData(),n=[];if(!e)n=t.entities;else for(var r=0;r<t.entities.length;r++)t.entities[r].name.indexOf(e)>=0&&n.push(t.entities[r]);this._$viewport.innerHTML=o({entities:n}),this._updateSlider()},a.prototype.clickPerson=function(e){var t=this._kgraph.getComponentByType("GRAPH");t&&(t.highlightNodeToMain(e),t.moveToEntity(e))},a.prototype._dispatchClick=function(e){var t=e.target||e.srcElement;if(s.matchesSelector(t,".bkg-prev-page"))this.prevPage();else if(s.matchesSelector(t,".bkg-next-page"))this.nextPage();else if(s.matchesSelector(t,".bkg-toggle"))this.toggle();else if(s.matchesSelector(t,".bkg-person *")){var n=t;while(n){if(n.className.indexOf("bkg-person")>=0)break;n=t.parentNode}this.clickPerson(n.getAttribute("data-bkg-entity-id"))}},a.prototype._updateSlider=function(){this._$list=s("ul",this._$viewport)[0],this._width=this._$list.clientWidth,this._isLastPage=!1,this._isFirstPage=!0,this._width<this._viewportWidth&&(this._isLastPage=!0),this._isLastPage?i.addClass(this._$nextPageBtn,"disable"):i.removeClass(this._$nextPageBtn,"disable"),this._isFirstPage?i.addClass(this._$prevPageBtn,"disable"):i.removeClass(this._$prevPageBtn,"disable"),this._left=0,this._$imageList=s("li img",this._$list);var e=this._$imageList[0];if(e){var t=e.parentNode;this._itemWidth=t.clientWidth;var n=i.getStyle(t);this._itemWidth+=parseInt(n["margin-left"])+parseInt(n["margin-right"])}this._loadImage()},a.prototype._loadImage=function(){var e=Math.floor(this._left/this._itemWidth),t=Math.ceil((this._left+this._viewportWidth)/this._itemWidth);for(var n=e;n<t;n++){var r=this._$imageList[n];r&&!r.getAttribute("src")&&(r.src=r.getAttribute("data-src"))}},n.inherits(a,t),a}),define("bkgraph/util/ScrollBar",["require","./util","Sizzle"],function(e){var t=e("./util"),n=e("Sizzle"),r=function(e){this._$viewport=e.parentNode,this._$content=e,this._$scrollButton=null,this._$scrollBar=null,this._scroll=0,this._onMouseDown=t.bind(this._onMouseDown,this),this._onMouseMove=t.bind(this._onMouseMove,this),this._onMouseUp=t.bind(this._onMouseUp,this),this._onMouseScroll=t.bind(this._onMouseScroll,this),this._init(),this._sx=0,this._sy=0,this._thumbTop=0};return r.prototype._init=function(){t.getStyle(this._$viewport,"position")!=="absolute"&&(this._$viewport.style.position="relative"),t.addClass(this._$viewport,"bkg-scrollbar-viewport"),t.addClass(this._$content,"bkg-scrollbar-content"),this._$scrollButton=document.createElement("div"),this._$scrollButton.className="bkg-scrollbar-button",this._$scrollBar=document.createElement("div"),this._$scrollBar.className="bkg-scrollbar-bar-y",this._$viewport.appendChild(this._$scrollBar),this._$scrollBar.appendChild(this._$scrollButton),t.addEventListener(this._$scrollButton,"mousedown",this._onMouseDown),t.addEventListener(this._$viewport,"mousewheel",this._onMouseScroll),t.addEventListener(this._$viewport,"DOMMouseScroll",this._onMouseScroll),this.resize()},r.prototype._onMouseDown=function(e){t.addEventListener(document.body,"mousemove",this._onMouseMove),t.addEventListener(document.body,"mouseup",this._onMouseUp),this._sx=e.screenX,this._sy=e.screenY},r.prototype._onMouseUp=function(){t.removeEventListener(document.body,"mouseup",this._onMouseUp),t.removeEventListener(document.body,"mousemove",this._onMouseMove)},r.prototype._onMouseMove=function(e){this._thumbTop+=e.screenY-this._sy,this._thumbTop=Math.max(this._thumbTop,0);var t=this._scrollBarHeight-this._scrollButtonHeight;this._thumbTop=Math.min(t,this._thumbTop),this._$scrollButton.style.top=this._thumbTop+"px",this._scroll=(this._contentHeight-this._viewportHeight)*this._thumbTop/t,this._$content.style.top=-this._scroll+"px",this._sy=e.screenY,this._sx=e.screenX},r.prototype._onMouseScroll=function(e){var t=e.wheelDelta||-e.detail*5;this.scrollTo(this._scroll-t)},r.prototype.scrollTo=function(e){e=Math.max(0,e);var t=this._contentHeight-this._viewportHeight;if(t<0)return;e=Math.min(e,t),this._scroll=e,this._$content.style.top=-e+"px",this._thumbTop=(this._scrollBarHeight-this._scrollButtonHeight)*e/t,this._$scrollButton.style.top=this._thumbTop+"px"},r.prototype.resize=function(){this._contentHeight=parseInt(this._$content.clientHeight),this._viewportHeight=parseInt(this._$viewport.clientHeight);if(this._viewportHeight>this._contentHeight){this._$scrollBar.style.display="none";return}this._$scrollBar.style.display="block",this._scrollBarHeight=parseInt(this._$scrollBar.clientHeight);var e=this._scrollBarHeight*this._viewportHeight/this._contentHeight;this._scrollButtonHeight=e,this._$scrollButton.style.height=e+"px"},r}),define("text!bkgraph/html/sidebarmodule.html",[],function(){return'<!-- target: sidebarNews -->\n<div class="bkg-news bkg-sidebar-module">\n    <div class="bkg-module-title">\n        <div class="bkg-circle"></div>\n        <!-- block: newsModuleTitle -->\n        <h4 class="bkg-title">最新动态</h4>\n        <!-- /block -->\n    </div>\n    <ul>\n        <!-- for: ${news} as ${new}, ${index} -->\n        <li class="bkg-news-item">\n            <div class="bkg-circle"></div>\n            <!-- if: ${index} == 0 -->\n            ${new.summary}\n            <!-- else -->\n            <a href="${new.url}" target="_blank" class="bkg-news-title">\n            ${new.title|truncate(20)}\n            </a>\n            <!-- /if-->\n            <div class="bkg-news-tail">\n                <a class="bkg-news-source" href="${new.url}" target="_blank">${new.source}</a>\n                <span class="bkg-news-publish-time">${new.publishTime|truncate(10, \'\')}</span>\n            </div>\n        </li>\n        <!-- /for -->\n    </ul>\n</div>\n\n<!-- target: sidebarWeibo -->\n<div class="bkg-weibo bkg-sidebar-module">\n    <div class="bkg-module-title">\n        <div class="bkg-circle"></div>\n        <h4>新浪微博</h4>\n    </div>\n    <div class="bkg-weibo-info">\n        <img class="bkg-left" src="${weibo.image}" alt="">\n        <div class="bkg-right">\n            <h5>${weibo.name}</h5>\n            <p>粉丝: ${weibo.fans}&nbsp;&nbsp;微博: ${weibo.weiboNum}</p>\n        </div>\n    </div>\n    <div class="bkg-latest-weibo">\n        <p class="bkg-latest-weibo-content">${weibo.latestWeibo|trim}<a href="${weibo.latestWeiboUrl}">查看全文</a></p>\n        <div class="bkg-latest-weibo-info">\n            <span class="bkg-latest-weibo-time" target="_blank">${weibo.latestWeiboTime}</span>\n            <a class="bkg-latest-weibo-comment" href="${weibo.latestWeiboUrl}" target="_blank">${weibo.latestWeiboComment}</a>\n            <a class="bkg-latest-weibo-forward" href="${weibo.latestWeiboUrl}" target="_blank">${weibo.latestWeiboForward}</a>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n</div>\n\n<!-- target: sidebarWorks -->\n<div class="bkg-works bkg-sidebar-module">\n    <div class="bkg-module-title">\n        <div class="bkg-circle"></div>\n        <h4>主要代表作品</h4>\n    </div>\n    <ul>\n    <!-- for: ${representativeWork} as ${work}, ${idx} -->\n        <li>\n            <a href="${work.movieRedir}" target="_blank">\n                <img src="${work.movieImage}" alt="" />\n                <span class="bkg-work-title">${work.movieName|truncate(5)}</span>\n            </a>\n        </li>\n    <!-- /for -->\n    </ul>\n</div>\n\n<!-- target: sidebarRelationNews(master=sidebarNews) -->\n<!-- block: newsModuleTitle -->\n<h4 class="bkg-title"> ${fromEntity.name} 和 ${toEntity.name} 的最新动态</h4>\n<!-- /block -->'}),define("text!bkgraph/html/entitydetail.html",[],function(){return'<div class="bkg-entity-detail">\n    <div class="bkg-entity-detail-title">\n        <h3>${name}信息名片</h3>\n    </div>\n    <div class="bkg-sidebar-module bkg-person-info">\n        <div class="bkg-module-title">\n            <div class="bkg-circle"></div>\n            <h4>基本信息 百度百科</h4>\n        </div>\n        <img class="bkg-person-pic" src="${imageSquare}" />\n        <div class="bkg-person-description">\n            <p><b>出生:</b> ${birthDate|raw}</p>\n            <p>\n                <b>简介:</b> ${introduction.content|truncate(65)}\n                <a href="${sourceUrl}" class="bkg-more" target="_blank">更多>></a>\n            </p>\n        </div>\n        <div style="clear:both;"></div>\n    </div>\n    <!-- if: ${news} -->\n    <!-- import: sidebarNews -->\n    <!-- /if -->\n    <!-- if: ${weibo} -->\n    <!-- import: sidebarWeibo -->\n    <!-- /if -->\n    <!-- if: ${representativeWork} -->\n    <!-- import: sidebarWorks -->\n    <!-- /if -->\n    <div style="clear:both;"></div>\n</div>'}),define("text!bkgraph/html/relationdetail.html",[],function(){return'<div class="bkg-relation-detail">\n    <div class="bkg-relation-description">\n        <div class="bkg-relation-entity-from">\n            <img src="${fromEntity.imageSquare}" alt="">\n        </div>\n        <div class="bkg-relation-name">\n            <span>${relationName}</span>\n        </div>\n        <div class="bkg-relation-entity-to">\n            <img src="${toEntity.imageSquare}" alt="">\n        </div>\n        <div style="clear:both"></div>\n    </div>\n    <div class="bkg-relation-source">\n        <!-- if: ${relationSite} -->\n        <a class="bkg-relation-site"  href="${relationUrl}" target="_blank">来源: ${relationSite}</a>\n        <!-- else -->\n        <a class="bkg-relation-baidu" target="_blank">百度一下</a>\n        <!-- /if -->\n    </div>\n\n    <!-- if: ${news} -->\n    <!-- import: sidebarRelationNews -->\n    <!-- /if -->\n</div>'}),define("bkgraph/component/SideBar",["require","./Component","zrender/tool/util","etpl","Sizzle","../util/util","../util/ScrollBar","text!../html/sidebarmodule.html","text!../html/entitydetail.html","text!../html/relationdetail.html"],function(e){var t=e("./Component"),n=e("zrender/tool/util"),r=e("etpl"),i=e("Sizzle"),s=e("../util/util"),o=e("../util/ScrollBar");r.compile(e("text!../html/sidebarmodule.html"));var u=r.compile(e("text!../html/entitydetail.html")),a=r.compile(e("text!../html/relationdetail.html")),f=function(){t.call(this);var e=this;s.addEventListener(this.el,"click",function(t){e._dispatchClick(t)})};return f.prototype.type="SIDEBAR",f.prototype.initialize=function(e,t){this.el.className="bkg-sidebar hidden",this._$viewport=document.createElement("div"),this._$viewport.className="bkg-sidebar-viewport",this.el.appendChild(this._$viewport),this._$content=document.createElement("div"),this._$content.className="bkg-sidebar-content",this._$viewport.appendChild(this._$content),this._$toggleBtn=document.createElement("div"),this._$toggleBtn.className="bkg-toggle",this._$toggleBtn.innerHTML="显<br />示<br />",this.el.appendChild(this._$toggleBtn),this._scrollbar=new o(this._$content),this._kgraph=e,this.render(t.mainEntity);var n=e.getComponentByType("HEADERBAR");return n&&(this.el.style.top=n.el.clientHeight+"px"),this.el},f.prototype.resize=function(e,t){this._scrollbar.resize()},f.prototype.setData=function(e,t){this.render(e,t)},f.prototype.render=function(e,t){t?this._$content.innerHTML=a(e):this._$content.innerHTML=u(e),this._scrollbar.scrollTo(0),this._scrollbar.resize();var n=i(".bkg-relation-name span",this.el)[0];n&&(n.style.top=-s.getHeight(n)-10+"px")},f.prototype.show=function(){if(s.hasClass(this.el,"hidden")){s.removeClass(this.el,"hidden");var e=this._kgraph.getComponentByType("GRAPH");e&&(e.el.style.right=-this.el.clientWidth+"px"),this._$toggleBtn.innerHTML="隐<br />藏<br /><"}},f.prototype.hide=function(){if(!s.hasClass(this.el,"hidden")){s.addClass(this.el,"hidden");var e=this._kgraph.getComponentByType("GRAPH");e&&(e.el.style.right="0px"),this._$toggleBtn.innerHTML="显<br />示<br />>"}},f.prototype.toggle=function(){s.hasClass(this.el,"hidden")?this.show():this.hide()},f.prototype._dispatchClick=function(e){var t=e.target||e.srcElement;i.matchesSelector(t,".bkg-toggle")&&this.toggle()},n.inherits(f,t),f}),define("text!bkgraph/html/headerbar.html",[],function(){return'<div class="bkg-bg"></div>\n\n<h1>${name} <span style="font-weight:normal;">人物关系图谱</span></h1>\n<div class="bkg-explore-percent">\n    <span class="bkg-explore-percent-bar">\n        <span class="bkg-explore-percent-bar-inner"></span>\n        <!-- for: ${levels} as ${level}, ${index} -->\n        <div class="bkg-milestone" style="left:${level.position}%;"></div>\n        <!-- /for -->\n    </span>\n    <!-- for: ${levels} as ${level}, ${index} -->\n    <div class="bkg-level-${index} bkg-level" style="width:${level.interval}%; left:${level.position}%">\n        <div class="bkg-level-icon"></div>\n        <div class="bkg-level-title">${level.title}</div>\n    </div>\n    <!-- /for -->\n</div>\n\n<div class="bkg-share">分享</div>'}),define("bkgraph/component/HeaderBar",["require","./Component","zrender/tool/util","etpl","../util/util","Sizzle","text!../html/headerbar.html"],function(e){var t=e("./Component"),n=e("zrender/tool/util"),r=e("etpl"),i=e("../util/util"),s=e("Sizzle"),o=r.compile(e("text!../html/headerbar.html")),u=[{position:0,title:"僵尸粉"},{position:8,title:"初级粉"},{position:20,title:"中级粉"},{position:40,title:"高级粉"},{position:60,title:"顶级粉"},{position:90,title:"私生粉"},{position:100,title:"",interval:0}],a=function(){t.call(this),this._graphCollapsed=!0};return a.prototype.type="HEADERBAR",a.prototype.initialize=function(e,t){var n=this.el;n.className="bkg-headerbar",this._kgraph=e,this.setData(t);var r=e.getComponentByType("GRAPH");r&&this.setExplorePercent(r.getExplorePercent());var i=e.getComponentByType("SIDEBAR");i&&(i.el.style.top=this.el.clientHeight+"px")},a.prototype.setData=function(e){var t=e.mainEntity;for(var n=0;n<u.length-1;n++)u[n].interval=u[n+1].position-u[n].position;this.render({name:t.name,levels:u})},a.prototype.render=function(e){this.el.innerHTML=o(e),this._$levels=s(".bkg-level",this.el)},a.prototype.setExplorePercent=function(e){e=Math.max(e*100,1),s(".bkg-explore-percent-bar-inner",this.el)[0].style.width=e+"%";for(var t=0;t<u.length;t++)i.removeClass(this._$levels[t],"bkg-active");for(var t=0;t<u.length;t++)u[t].position<=e&&u[t+1].position>e&&i.addClass(this._$levels[t],"bkg-active")},n.inherits(a,t),a}),define("bkgraph/util/jsonp",["require"],function(e){return function(e,t,n,r){e=e||"",t=t||{},n=n||"",r=r||function(){};var i=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};if(typeof t=="object"){var s="",o=i(t);for(var u=0;u<o.length;u++)s+=encodeURIComponent(o[u])+"="+encodeURIComponent(t[o[u]]),u!=o.length-1&&(s+="&");e+="?"+s}else typeof t=="function"&&(n=t,r=n);typeof n=="function"&&(r=n,n="callback"),Date.now||(Date.now=function(){return(new Date).getTime()});var a=Date.now(),f="jsonp"+Math.round(a+Math.random()*1000001);window[f]=function(e){r(e),delete window[f]},e.indexOf("?")===-1?e+="?":e+="&";var l=document.createElement("script");l.setAttribute("src",e+n+"="+f),document.getElementsByTagName("head")[0].appendChild(l)}}),define("zrender/tool/http",["require"],function(e){function t(e,t,n,r){if(typeof e=="object"){var i=e;e=i.url,t=i.onsuccess,n=i.onerror,r=i}else typeof n=="object"&&(r=n);var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");s.open("GET",e,!0),s.onreadystatechange=function(){s.readyState==4&&(s.status>=200&&s.status<300||s.status===304?t&&t(s.responseText):n&&n(),s.onreadystatechange=new Function,s=null)},s.send(null)}return{get:t}}),define("bkgraph/bkgraph",["require","./component/GraphMain","./component/PanControl","./component/ZoomControl","./component/SearchBar","./component/SideBar","./component/HeaderBar","etpl","./util/jsonp","./util/util","zrender/tool/http"],function(require){function init(e,t,n){typeof e=="string"&&(e=document.getElementById(e));var r=new BKGraph(e,t,n);return r}var GraphMain=require("./component/GraphMain"),PanControl=require("./component/PanControl"),ZoomControl=require("./component/ZoomControl"),SearchBar=require("./component/SearchBar"),SideBar=require("./component/SideBar"),HeaderBar=require("./component/HeaderBar"),etpl=require("etpl"),jsonp=require("./util/jsonp"),util=require("./util/util"),http=require("zrender/tool/http");etpl.addFilter("truncate",util.truncate),etpl.addFilter("trim",util.trim);var TUPU_URL="http://cq01-ps-dev377.cq01.baidu.com:8087/api/graph/v1",BKGraph=function(dom,data,onsuccess){this._container=dom,this._components=[],this._width=0,this._height=0,this._root=null;if(typeof data=="string"||typeof data=="number"){var self=this;http.get("../mock/person/"+data,function(data){typeof JSON!="undefined"&&JSON.parse?data=JSON.parse(data):data=eval("("+data+")"),data=self._fixData(data),self._rawData=data,self.initialize(data),onsuccess&&onsuccess(self)})}else data=self._fixData(data),this._rawData=data,this.initialize(data),onsuccess&&onsuccess(this)};BKGraph.prototype._fixData=function(e){for(var t=0;t<e.entities.length;t++){var n=e.entities[t];n.layerCounter=n.layerCounter||0,n.layerCounter=parseInt(n.layerCounter),n.layerCounter===0&&(e.mainEntity=n)}return e},BKGraph.prototype.getRawData=function(){return this._rawData},BKGraph.prototype.initialize=function(e){this._root=document.createElement("div"),this._root.className="bkg-viewport",this._root.style.position="relative",this._root.style.overflow="hidden",this._container.appendChild(this._root),this.resize();var t=new GraphMain;this.addComponent(t),e&&t.setData(e)},BKGraph.prototype.addComponent=function(e){this._components.push(e),e.el&&e.el.nodeType===1&&this._root.appendChild(e.el),e.initialize(this,this._rawData)},BKGraph.prototype.getComponentsAllByType=function(e){var t=[];for(var n=0;n<this._components.length;n++)this._components[n].type.toUpperCase()===e.toUpperCase()&&t.push(this._components[n]);return t},BKGraph.prototype.getComponentByType=function(e){for(var t=0;t<this._components.length;t++)if(this._components[t].type.toUpperCase()===e.toUpperCase())return this._components[t];return null},BKGraph.prototype.resize=function(){var e=this._container,t=e.currentStyle||window.getComputedStyle(e);this._width=e.clientWidth||parseInt(t.width),this._height=e.clientHeight||parseInt(t.height),this._root.style.width=this._width+"px",this._root.style.height=this._height+"px";for(var n=0;n<this._components.length;n++)this._components[n].resize(this._width,this._height)},BKGraph.prototype.getWidth=function(){return this._width},BKGraph.prototype.getHeight=function(){return this._height},BKGraph.prototype.getRoot=function(){return this._root};var bkgraph={SearchBar:SearchBar,SideBar:SideBar,ZoomControl:ZoomControl,PanControl:PanControl,HeaderBar:HeaderBar,init:init};return bkgraph}),define("bkgraph",["bkgraph/bkgraph"],function(e){return e});var bkg=require("bkgraph");for(var name in bkg)_exports[name]=bkg[name]});